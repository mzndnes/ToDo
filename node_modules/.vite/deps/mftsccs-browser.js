// node_modules/mftsccs-browser/dist/main.bundle.js
var e = { 1735: (e2, t2, n2) => {
  n2.d(t2, { J: () => a2 });
  var o2, i2 = n2(2830), r2 = n2(3278), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class a2 {
    static incrementConcept(e3) {
      try {
        e3 && (this.conceptsData[e3] = (this.conceptsData[e3] || 0) + 1);
      } catch (e4) {
        console.error("Failed on increment concept");
      }
    }
    static incrementConnection(e3) {
      try {
        e3 && (this.connectionsData[e3] = (this.connectionsData[e3] || 0) + 1);
      } catch (e4) {
        console.error("Failed on increment connection");
      }
    }
    static getTopConcepts(e3) {
      return Object.entries(this.conceptsData).map((([e4, t3]) => [parseInt(e4), t3])).sort(((e4, t3) => t3[1] - e4[1])).slice(0, e3);
    }
    static getTopConnections(e3) {
      return Object.entries(this.connectionsData).map((([e4, t3]) => [parseInt(e4), t3])).sort(((e4, t3) => t3[1] - e4[1])).slice(0, e3);
    }
    static saveDataToLocalStorage() {
      const e3 = { concepts: this.conceptsData, connections: this.connectionsData };
      null === localStorage || void 0 === localStorage || localStorage.setItem(this.accessData, JSON.stringify(e3));
    }
    static loadDataFromLocalStorage() {
      const e3 = null === localStorage || void 0 === localStorage ? void 0 : localStorage.getItem(this.accessData);
      if (e3) {
        const t3 = JSON.parse(e3);
        this.conceptsData = t3.concepts || {}, this.connectionsData = t3.connections || {};
      }
    }
    static sendToServer() {
      return c2(this, void 0, void 0, (function* () {
        try {
          yield this.syncToServer();
        } catch (e3) {
          console.error("Failed to process Access Tracker Sync with Server");
        }
      }));
    }
    static syncToServer() {
      return c2(this, void 0, void 0, (function* () {
        try {
          if (!Object.keys(this.conceptsData).length && !Object.keys(this.connectionsData).length) return;
          const e3 = r2.b.BearerAccessToken;
          if (!e3) return;
          const t3 = this.conceptsData && Object.keys(this.conceptsData).length > 0 ? this.conceptsData : {}, n3 = this.connectionsData && Object.keys(this.connectionsData).length > 0 ? this.connectionsData : {}, o3 = yield fetch(i2.BaseUrl.PostPrefetchConceptConnections(), { method: "POST", headers: { "Content-Type": "application/json", Authorization: `Bearer ${e3}` }, body: JSON.stringify({ concepts: t3, connections: n3 }) });
          if (!o3.ok) throw new Error("Failed to sync data to the server.");
          yield o3.json(), this.conceptsData = {}, this.connectionsData = {}, this.setNextSyncTime();
        } catch (e3) {
          console.error("Sync error:", e3);
        }
      }));
    }
    static setNextSyncTime() {
      this.nextSyncTime = Date.now() + this.SYNC_INTERVAL_MS;
    }
    static startAutoSync() {
      setInterval((() => {
        const e3 = Date.now();
        this.nextSyncTime && e3 >= this.nextSyncTime && this.syncNow().catch(console.error);
      }), 6e4);
    }
    static syncNow() {
      return c2(this, void 0, void 0, (function* () {
        try {
          this.activateStatus ? yield this.syncToServer() : console.warn("Access Tracker inactive.");
        } catch (e3) {
          console.error("Error on sync access tracker");
        }
      }));
    }
    static GetSuggestedConcepts(e3) {
      return c2(this, void 0, void 0, (function* () {
        try {
          const t3 = r2.b.BearerAccessToken, n3 = new URL(i2.BaseUrl.GetSuggestedConcepts());
          void 0 !== e3 && n3.searchParams.append("top", e3.toString());
          const o3 = yield fetch(n3.toString(), { method: "GET", headers: { "Content-Type": "application/json", Authorization: `Bearer ${t3}` } });
          if (!o3.ok) {
            const e4 = yield o3.text();
            throw new Error(`Failed to load concepts: ${o3.status} ${o3.statusText}. Details: ${e4}`);
          }
          const c3 = (yield o3.json()) || [];
          return yield this.addConceptToBinaryTree(c3.data), c3;
        } catch (e4) {
          throw e4 instanceof Error ? (console.error("Error fetching suggested concepts:", e4.message), new Error("Unable to fetch suggested concepts. Please try again later.")) : (console.error("An unexpected error occurred:", e4), new Error("An unexpected error occurred while fetching suggested concepts."));
        }
      }));
    }
    static GetSuggestedConnections(e3) {
      return c2(this, void 0, void 0, (function* () {
        try {
          const t3 = r2.b.BearerAccessToken, n3 = new URL(i2.BaseUrl.GetSuggestedConnections());
          void 0 !== e3 && n3.searchParams.append("top", e3.toString());
          const o3 = yield fetch(n3.toString(), { method: "GET", headers: { "Content-Type": "application/json", Authorization: `Bearer ${t3}` } });
          if (!o3.ok) {
            const e4 = yield o3.text();
            throw new Error(`Failed to load connections: ${o3.status} ${o3.statusText}. Details: ${e4}`);
          }
          const c3 = (yield o3.json()) || [];
          return yield this.addConnectionToBinaryTree(c3.data), c3;
        } catch (e4) {
          throw e4 instanceof Error ? (console.error("Error fetching suggested Connections:", e4.message), new Error("Unable to fetch suggested connections. Please try again later.")) : (console.error("An unexpected error occurred:", e4), new Error("An unexpected error occurred while fetching suggested Connections."));
        }
      }));
    }
    static addConceptToBinaryTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        try {
          e3.forEach(((e4) => {
            i2.ConceptsData.AddConcept(e4);
          }));
        } catch (e4) {
          console.error("Error on adding Concepts Data into tree");
        }
      }));
    }
    static addConnectionToBinaryTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        try {
          e3.forEach(((e4) => {
            i2.ConnectionData.AddConnection(e4);
          }));
        } catch (e4) {
          console.error("Error on adding Connections Data into tree");
        }
      }));
    }
  }
  o2 = a2, a2.conceptsData = {}, a2.connectionsData = {}, a2.SYNC_INTERVAL_MS = 12e4, a2.nextSyncTime = Date.now(), a2.activateStatus = false, a2.accessData = "Access Data", o2.startAutoSync();
}, 1167: (e2, t2, n2) => {
  n2.d(t2, { Y: () => s2 });
  var o2 = n2(9581), i2 = n2(3518), r2 = n2(2830), c2 = n2(1863), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    return a2(this, void 0, void 0, (function* () {
      const t3 = r2.Logger.logfunction("CreateTheConceptApi", e3);
      let n3 = (0, r2.CreateDefaultConcept)();
      try {
        var a3 = (0, i2.Xr)();
        const s3 = yield fetch(o2.B.CreateTheConceptUrl(), { method: "POST", headers: a3, body: JSON.stringify(e3) });
        if (!s3.ok) throw (0, c2.ry)(s3), new Error(`Error! status: ${s3.status}`);
        return n3 = yield s3.json(), r2.Logger.logUpdate(t3), n3;
      } catch (e4) {
        e4 instanceof Error ? console.log("Create the concept api error message: ", e4.message) : console.log("Create the concept api unexpected error: ", e4), (0, c2.Mb)(e4, o2.B.CreateTheConceptUrl()), (0, c2.ey)(t3, "CreateTheConceptApi", e4);
      }
    }));
  }
}, 2: (e2, t2, n2) => {
  n2.d(t2, { s: () => d2 });
  var o2 = n2(8286), i2 = n2(9581), r2 = n2(1412), c2 = n2(3518), a2 = n2(1863), s2 = n2(2830), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2(e3) {
    var t3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      const n3 = s2.Logger.logfunction("GetAllConnectionsOfComposition", t3);
      var i3 = [];
      if (0 == (i3 = yield o2.d.GetConnectionsOfConcept(e3)).length) i3 = yield h2(e3);
      else {
        var c3 = yield h2(e3);
        (0, r2.e)(c3, i3), i3 = c3;
      }
      return s2.Logger.logUpdate(n3), i3;
    }));
  }
  function h2(e3) {
    var t3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      const n3 = s2.Logger.logfunction("GetAllConnectionsOfCompositionOnline", t3);
      var r3 = [];
      try {
        (0, c2.Xr)("application/json");
        const t4 = new Headers(), d3 = new FormData();
        d3.append("composition_id", e3.toString());
        const h3 = yield fetch(i2.B.GetAllConnectionsOfCompositionUrl(), { method: "POST", headers: t4, body: d3 });
        if (console.log("this is getting connection from online", i2.B.GetAllConnectionsOfCompositionUrl(), e3), !h3.ok) throw (0, a2.ry)(h3), new Error(`Error! status: ${h3.status}`);
        const u2 = yield h3.json();
        for (var l3 = 0; l3 < u2.length; l3++) o2.d.AddConnection(u2[l3]), r3.push(u2[l3]);
        return s2.Logger.logUpdate(n3), r3;
      } catch (e4) {
        e4 instanceof Error ? console.log("Get all connection of composition error : ", e4.message) : console.log("Get all connection of composition error : ", e4), (0, a2.Mb)(e4, i2.B.GetAllConnectionsOfCompositionUrl()), (0, a2.ey)(n3, "GetAllConnectionsOfCompositionOnline", e4);
      }
    }));
  }
}, 8642: (e2, t2, n2) => {
  n2.d(t2, { Y: () => u2 });
  var o2 = n2(8286), i2 = n2(9581), r2 = n2(4364), c2 = n2(5284), a2 = n2(1412), s2 = n2(3518), l2 = n2(1863), d2 = n2(2830), h2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function u2() {
    var e3 = arguments;
    return h2(this, arguments, void 0, (function* (t3 = []) {
      const n3 = d2.Logger.logfunction("GetAllConnectionsOfCompositionBulk", e3);
      if (d2.serviceWorker) {
        n3.serviceWorker = true;
        try {
          const e4 = yield (0, d2.sendMessage)("GetAllConnectionsOfCompositionBulk", { composition_ids: t3 });
          return d2.Logger.logUpdate(n3), e4.data;
        } catch (e4) {
          console.error("GetAllConnectionsOfCompositionBulk sw error: ", e4), (0, l2.ey)(n3, "GetAllConnectionsOfCompositionBulk", e4), (0, d2.handleServiceWorkerException)(e4);
        }
      }
      var u3 = [];
      if (t3.length <= 0) return u3;
      var p2 = yield (0, c2.B)(t3), f2 = yield (function() {
        var e4 = arguments;
        return h2(this, arguments, void 0, (function* (t4 = []) {
          const n4 = d2.Logger.logfunction("GetAllConnectionsOfCompositionOnline", e4);
          var r3 = [];
          try {
            var c3 = (0, s2.Xr)();
            const e5 = yield fetch(i2.B.GetAllConnectionsOfCompositionBulkUrl(), { method: "POST", headers: c3, body: JSON.stringify(t4) });
            if (e5.ok) {
              const t5 = yield e5.json();
              for (var a3 = 0; a3 < t5.length; a3++) o2.d.AddConnection(t5[a3]), r3.push(t5[a3]);
            } else console.log("Get all connections of composition bulk error message: ", "Cannot get response"), (0, l2.ry)(e5);
            return d2.Logger.logUpdate(n4), r3;
          } catch (e5) {
            e5 instanceof Error ? console.log("Get all connections of composition bulk error message: ", e5.message) : console.log("Get all connections of composition bulk unexpected error: ", e5), (0, l2.Mb)(e5, i2.B.GetAllConnectionsOfCompositionBulkUrl()), (0, l2.ey)(n4, "GetAllConnectionsOfCompositionOnline", e5);
          }
        }));
      })(t3);
      return u3 = f2, (0, a2.e)(u3, p2), yield (0, r2.s)(u3), d2.Logger.logUpdate(n3), u3;
    }));
  }
}, 2803: (e2, t2, n2) => {
  n2.d(t2, { x: () => s2 });
  var o2 = n2(8286), i2 = n2(9581), r2 = n2(1863), c2 = n2(2830), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3, t3, n3) {
    var s3 = arguments;
    return a2(this, void 0, void 0, (function* () {
      const a3 = c2.Logger.logfunction("GetCompositionConnectionsBetweenTwoConcepts", s3);
      var l2 = [];
      try {
        if (c2.serviceWorker) {
          a3.serviceWorker = true;
          try {
            const o3 = yield (0, c2.sendMessage)("GetCompositionConnectionsBetweenTwoConcepts", { ofConceptId: e3, toConcept: t3, mainKey: n3 });
            return c2.Logger.logUpdate(a3), o3.data;
          } catch (e4) {
            console.error("GetCompositionConnectionsBetweenTwoConcepts sw error: ", e4), (0, r2.ey)(a3, "GetCompositionConnectionsBetweenTwoConcepts", e4), (0, c2.handleServiceWorkerException)(e4);
          }
        }
        var d2 = new FormData();
        d2.append("ofConceptId", e3.toString()), d2.append("mainKey", n3.toString()), d2.append("toConceptId", t3.toString());
        const s4 = yield fetch(i2.B.GetCompositionConnectionBetweenTwoConceptsUrl(), { method: "POST", body: d2, redirect: "follow" });
        if (s4.ok) {
          const e4 = yield s4.json();
          for (var h2 = 0; h2 < e4.length; h2++) o2.d.AddConnection(e4[h2]), l2.push(e4[h2]);
          c2.Logger.logUpdate(a3);
        } else console.log("Get composition connection between two concepts", s4.status), (0, r2.ry)(s4);
      } catch (e4) {
        e4 instanceof Error ? console.log("Get composition connection between two concepts error message: ", e4.message) : console.log("Get composition connection between two concepts unexpected error: ", e4), (0, r2.Mb)(e4, i2.B.GetCompositionConnectionBetweenTwoConceptsUrl()), (0, r2.ey)(a3, "GetCompositionConnectionsBetweenTwoConcepts", e4);
      }
      return l2;
    }));
  }
}, 7139: (e2, t2, n2) => {
  n2.d(t2, { r: () => l2 });
  var o2 = n2(9639), i2 = n2(9581), r2 = n2(3518), c2 = n2(2830), a2 = n2(1863), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3) {
    var t3 = arguments;
    return s2(this, void 0, void 0, (function* () {
      const n3 = c2.Logger.logfunction("GetConcept", t3);
      try {
        if (c2.serviceWorker) {
          n3.serviceWorker = true;
          try {
            const t5 = yield (0, c2.sendMessage)("GetConcept", { id: e3 });
            return c2.Logger.logUpdate(n3), t5.data;
          } catch (e4) {
            console.error("GetConcept sw error: ", e4), (0, a2.ey)(n3, "GetConcept", e4), (0, c2.handleServiceWorkerException)(e4);
          }
        }
        let t4 = (0, c2.CreateDefaultConcept)();
        if (0 == e3 || null == e3 || null == e3) return t4;
        var s3 = yield o2.I.GetConcept(e3);
        let l3 = o2.I.GetNpc(e3);
        if (0 != s3.id || l3) return c2.Logger.logUpdate(n3), s3;
        {
          (0, r2.Xr)(), console.log("this is the url", i2.B.GetConceptUrl());
          const s4 = new FormData();
          s4.append("id", e3.toString());
          const l4 = yield fetch(i2.B.GetConceptUrl(), { method: "POST", body: s4 });
          return l4.ok ? (t4 = yield l4.json(), t4.id > 0 ? o2.I.AddConcept(t4) : o2.I.AddNpc(e3)) : (console.log("Get the concept error", l4.status), (0, a2.ry)(l4)), c2.Logger.logUpdate(n3), t4;
        }
      } catch (e4) {
        e4 instanceof Error ? console.log("Get the concept error message: ", e4.message) : console.log("Get the concept unexpected error: ", e4), (0, a2.Mb)(e4, i2.B.GetConceptUrl()), (0, a2.ey)(n3, "GetConcept", e4);
      }
    }));
  }
}, 1239: (e2, t2, n2) => {
  n2.d(t2, { I: () => d2, r: () => l2 });
  var o2 = n2(9639), i2 = n2(9581), r2 = n2(3518), c2 = n2(1863), a2 = n2(2830), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3) {
    return s2(this, void 0, void 0, (function* () {
      const t3 = a2.Logger.logfunction("GetConceptBulk", [e3.length]);
      let n3 = [], s3 = ((/* @__PURE__ */ new Date()).getTime(), performance.now()), l3 = Array.from(new Set(e3));
      try {
        if (a2.serviceWorker) {
          t3.serviceWorker = true;
          try {
            const n4 = yield (0, a2.sendMessage)("GetConceptBulk", { passedConcepts: e3 });
            return a2.Logger.logUpdate(t3), n4.data;
          } catch (e4) {
            console.error("GetConceptBulk sw error: ", e4), (0, c2.ey)(t3, "GetConceptBulk", e4), (0, a2.handleServiceWorkerException)(e4);
          }
        }
        if (l3.length > 0) {
          let d3 = [];
          for (let e4 = 0; e4 < l3.length; e4++) 0 == (yield o2.I.GetConcept(l3[e4])).id && d3.push(l3[e4]);
          if (0 == d3.length) return a2.Logger.logfunction(t3), n3;
          {
            let l4 = (0, r2.Xr)();
            const h2 = yield fetch(i2.B.GetConceptBulkUrl(), { method: "POST", headers: l4, body: JSON.stringify(d3) });
            if (h2.ok) {
              if (n3 = yield h2.json(), n3.length > 0) for (let e4 = 0; e4 < n3.length; e4++) {
                let t4 = n3[e4];
                o2.I.AddConcept(t4);
              }
              console.log("added the concepts"), a2.Logger.logUpdate(t3);
            } else console.log("Get Concept Bulk error", h2.status), a2.Logger.logError(s3, "unknown", "read", "unknown", void 0, h2.status, h2, "GetConceptBulk", [e3], "unknown", void 0), (0, c2.ry)(h2);
          }
        }
      } catch (n4) {
        n4 instanceof Error ? console.log("Get Concept Bulk  error message: ", n4.message) : console.log("Get Concept Bulk  unexpected error: ", n4), a2.Logger.logError(s3, "unknown", "read", "unknown", void 0, 500, n4, "GetConceptBulk", [e3], "unknown", void 0), (0, c2.Mb)(n4, i2.B.GetConceptBulkUrl()), (0, c2.ey)(t3, "GetConceptBulk", n4);
      }
      return n3;
    }));
  }
  function d2(e3) {
    return s2(this, void 0, void 0, (function* () {
      const t3 = [];
      if (e3.length > 0) {
        const n3 = { "Content-Type": "application/json" };
        try {
          const r3 = yield fetch(i2.B.GetConceptBulkUrl(), { method: "POST", headers: n3, body: JSON.stringify(e3) });
          if (r3.ok) {
            const e4 = yield r3.json();
            if (e4.length > 0) for (let n4 = 0; n4 < e4.length; n4++) {
              const i3 = e4[n4];
              t3.push(i3), o2.I.AddConcept(i3);
            }
          } else console.log("bulk concept getter api error: ", r3.status), (0, c2.ry)(r3);
        } catch (e4) {
          e4 instanceof Error ? console.log("bulk concept getter api error: ", e4.message) : console.log("bulk concept getter api error: ", e4), (0, c2.Mb)(e4, i2.B.GetConceptBulkUrl());
        }
      }
      return t3;
    }));
  }
}, 4402: (e2, t2, n2) => {
  n2.d(t2, { A: () => l2 });
  var o2 = n2(9639), i2 = n2(9581), r2 = n2(3518), c2 = n2(1863), a2 = n2(2830), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3, t3) {
    var n3 = arguments;
    return s2(this, void 0, void 0, (function* () {
      const s3 = a2.Logger.logfunction("GetConceptByCharacterAndType", n3);
      try {
        if (a2.serviceWorker) try {
          return (yield (0, a2.sendMessage)("GetConceptByCharacterAndType", { characterValue: e3, typeId: t3 })).data;
        } catch (e4) {
          console.error("GetConceptByCharacterAndType sw error: ", e4), (0, a2.handleServiceWorkerException)(e4);
        }
        let n4 = yield o2.I.GetConceptByCharacterAndTypeLocal(e3, t3);
        if (null == n4 || 0 == n4.id) {
          var l3 = { character_value: `${e3}`, type_id: t3 }, d2 = JSON.stringify(l3), h2 = (0, r2.Xr)();
          const a3 = yield fetch(i2.B.GetConceptByCharacterAndTypeUrl(), { method: "POST", headers: h2, body: d2 });
          a3.ok ? (n4 = yield a3.json(), o2.I.AddConcept(n4)) : ((0, c2.ry)(a3), console.log("This is the concept by type and character error", a3.status));
        }
        return a2.Logger.logUpdate(s3), n4;
      } catch (e4) {
        e4 instanceof Error ? console.log(" This is the concept by type and character error message: ", e4.message) : console.log(" This is the concept by type and character unexpected error: ", e4), (0, c2.Mb)(e4, i2.B.GetConceptByCharacterAndTypeUrl()), (0, c2.ey)(s3, "GetConceptByCharacterAndType", e4);
      }
    }));
  }
}, 8146: (e2, t2, n2) => {
  n2.d(t2, { Y: () => s2 });
  var o2 = n2(9639), i2 = n2(9581), r2 = n2(2830), c2 = n2(1863), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    var t3 = arguments;
    return a2(this, void 0, void 0, (function* () {
      const n3 = r2.Logger.logfunction("GetConceptByCharacterValue", t3);
      let a3 = (0, r2.CreateDefaultConcept)();
      try {
        const t4 = new FormData();
        t4.append("character_value", e3);
        const s3 = yield fetch(i2.B.GetConceptByCharacterValueUrl(), { method: "POST", body: t4 });
        s3.ok ? (a3 = yield s3.json(), a3.id > 0 && o2.I.AddConcept(a3), r2.Logger.logUpdate(n3)) : ((0, c2.ry)(s3), console.log("Error in Getting concept by character value Error", s3.status));
      } catch (e4) {
        e4 instanceof Error ? console.log("Error in Getting concept by character value error message: ", e4) : console.log("Error in Getting concept by character value unexpected error: ", e4), (0, c2.Mb)(e4, i2.B.GetConceptByCharacterValueUrl()), (0, c2.ey)(n3, "GetConceptByCharacterValue", e4);
      }
      return a3;
    }));
  }
}, 7467: (e2, t2, n2) => {
  n2.d(t2, { j: () => d2 });
  var o2 = n2(8286), i2 = n2(9581), r2 = n2(4364), c2 = n2(3518), a2 = n2(1863), s2 = n2(2830), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2() {
    return l2(this, arguments, void 0, (function* (e3 = []) {
      const t3 = s2.Logger.logfunction("GetConnectionBulk", e3.length);
      let n3 = [];
      try {
        if (s2.serviceWorker) {
          t3.serviceWorker = true;
          try {
            const n4 = yield (0, s2.sendMessage)("GetConnectionBulk", { connectionIds: e3 });
            return s2.Logger.logUpdate(t3), n4.data;
          } catch (e4) {
            console.error("GetConnectionBulk sw error: ", e4), (0, a2.ey)(t3, "GetConnectionBulk", e4), (0, s2.handleServiceWorkerException)(e4);
          }
        }
        if (e3.length > 0) {
          let r3 = [];
          for (let t4 = 0; t4 < e3.length; t4++) {
            let i3 = yield o2.d.GetConnection(e3[t4]);
            0 == i3.id ? r3.push(e3[t4]) : n3.push(i3);
          }
          if (0 == r3.length) return s2.Logger.logUpdate(t3), n3;
          {
            let e4 = (0, c2.Xr)();
            const l3 = yield fetch(i2.B.GetConnectionBulkUrl(), { method: "POST", headers: e4, body: JSON.stringify(r3) });
            if (l3.ok) {
              const e5 = yield l3.json();
              if (e5.length > 0) for (let t4 = 0; t4 < e5.length; t4++) {
                let i3 = e5[t4];
                n3.push(i3), o2.d.AddConnection(i3);
              }
            } else (0, a2.ey)(t3, "GetConnectionBulk", l3.status), (0, a2.ry)(l3), console.log("Get Connection Bulk error", l3.status);
            s2.Logger.logUpdate(t3);
          }
        }
      } catch (e4) {
        e4 instanceof Error ? console.log("Get Connection Bulk error message: ", e4) : console.log("Get Connection Bulk unexpected error: ", e4), (0, a2.ey)(t3, "GetConnectionBulk", e4), (0, a2.Mb)(e4, i2.B.GetConnectionBulkUrl());
      }
      return yield (0, r2.s)(n3), n3;
    }));
  }
}, 2832: (e2, t2, n2) => {
  n2.d(t2, { j: () => s2 });
  var o2 = n2(2830), i2 = n2(9581), r2 = n2(1863), c2 = n2(3518), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    var t3 = arguments;
    return a2(this, arguments, void 0, (function* (e4, n3 = "") {
      const a3 = o2.Logger.logfunction("SearchLinkMultipleApi", t3);
      let s3 = performance.now();
      var l2 = (0, c2.ab)("application/json", n3);
      const d2 = i2.B.SearchLinkMultipleAllApiUrl(), h2 = JSON.stringify(e4);
      try {
        const t4 = yield fetch(d2, { method: "POST", headers: l2, body: h2 });
        if (t4.ok) {
          let e5 = yield t4.json();
          return o2.Logger.logUpdate(a3), e5;
        }
        return (0, r2.ry)(t4), console.log("This is the searching multiple error", t4.status), o2.Logger.logError(s3, "unknown", "search", "unknown", void 0, t4.status, t4, "SearchLinkMultipleApi", [e4, n3], "unknown", void 0), [];
      } catch (t4) {
        console.log("This is the searching multiple error", t4), o2.Logger.logError(s3, "unknown", "search", "unknown", void 0, 500, t4, "SearchLinkMultipleApi", [e4, n3], "unknown", void 0), (0, r2.Mb)(t4, d2), (0, r2.ey)(a3, "SearchLinkMultipleApi", t4);
      }
    }));
  }
}, 3130: (e2, t2, n2) => {
  n2.d(t2, { BG: () => s2, SL: () => l2, XZ: () => a2, ZJ: () => r2, iw: () => c2, y0: () => i2, yv: () => o2 });
  const o2 = 1, i2 = 2, r2 = 3, c2 = 4, a2 = 5, s2 = 6, l2 = 7;
}, 9635: (e2, t2, n2) => {
  n2.d(t2, { x: () => o2 });
  const o2 = new BroadcastChannel("Freeschema_mftsccs_browser_channel");
}, 9581: (e2, t2, n2) => {
  n2.d(t2, { B: () => o2 });
  class o2 {
    static setRandomizer(e3) {
      console.log("set randomizer", e3), this.BASE_RANDOMIZER = e3;
    }
    static getRandomizer() {
      return this.BASE_RANDOMIZER;
    }
    static GetConceptUrl() {
      return this.BASE_URL + "/api/getConcept";
    }
    static GetConnectionUrl() {
      return this.BASE_URL + "/api/get-connection-by-id";
    }
    static GetConceptBulkUrl() {
      return this.BASE_URL + "/api/get_concept_bulk";
    }
    static GetConnectionBulkUrl() {
      return this.BASE_URL + "/api/get_connection_bulk";
    }
    static GetAllConceptsOfUserUrl() {
      return this.BASE_URL + "/api/get_all_concepts_of_user";
    }
    static GetAllConnectionsOfUserUrl() {
      return this.BASE_URL + "/api/get_all_connections_of_user";
    }
    static GetAllConnectionsOfCompositionUrl() {
      return this.BASE_URL + "/api/get_all_connections_of_composition";
    }
    static GetAllConnectionsOfCompositionBulkUrl() {
      return this.BASE_URL + "/api/get_all_connections_of_composition_bulk";
    }
    static GetConceptByCharacterValueUrl() {
      return this.BASE_URL + "/api/get_concept_by_character_value";
    }
    static GetConceptByCharacterAndTypeUrl() {
      return this.BASE_URL + "/api/get_concept_by_character_and_type";
    }
    static GetConceptByCharacterAndCategoryUrl() {
      return this.BASE_URL + "/api/get_concept_by_character_and_category";
    }
    static GetConceptByCharacterAndCategoryDirectUrl() {
      return this.BASE_URL + "/api/get_concept_by_character_and_category_direct";
    }
    static GetCharacterByCharacterUrl() {
      return this.BASE_URL + "/api/get_character_by_character";
    }
    static GetAllConceptsByTypeUrl() {
      return this.BASE_URL + "/api/get_all_concepts_by_type";
    }
    static GetAllConnectionsOfConceptUrl() {
      return this.BASE_URL + "/api/get-link-connections";
    }
    static GetAllAiData() {
      return this.BASE_URL + "/api/get-preloaded-concepts";
    }
    static PostPrefetchConceptConnections() {
      return this.NODE_URL + "/api/v1/access-tracker/sync-access-tracker";
    }
    static GetSuggestedConcepts() {
      return this.NODE_URL + "/api/v1/access-tracker/list-concepts-file";
    }
    static GetSuggestedConnections() {
      return this.NODE_URL + "/api/v1/access-tracker/list-connections-file";
    }
    static PostLogger() {
      return this.LOG_SERVER + "/api/logger";
    }
    static GetAllPrefetchConnectionsUrl() {
      return this.BASE_URL + "/api/get_all_connections_of_user?inpage=500";
    }
    static GetAllLinkerConnectionOfConceptUrl() {
      return this.BASE_URL + "/api/get-all-linkers-from-concept";
    }
    static GetAllLinkerConnectionToConceptUrl() {
      return this.BASE_URL + "/api/get-all-linkers-to-concept";
    }
    static DeleteConceptUrl() {
      return this.BASE_URL + "/api/delete_concept";
    }
    static DeleteUserUrl() {
      return this.BASE_URL + "/api/deleteuser";
    }
    static RecursiveSearchUrl() {
      return this.BASE_URL + "/api/recursivesearch-concept-connection";
    }
    static SearchLinkMultipleAllApiUrl() {
      return this.BASE_URL + "/api/Connection/search-link-multiple-all-ccs";
    }
    static MakeTheNameInBackendUrl() {
      return this.BASE_URL + "/api/make-name-from-frontend";
    }
    static SearchAllTypeWithLinker(e3 = true) {
      return e3 ? this.BASE_URL + "/api/search-all-with-linker-ccs" : this.BASE_URL + "/api-search-compositions-internal-clean-ccs";
    }
    static LoginUrl() {
      return this.BASE_URL + "/api/auth/login";
    }
    static SignupUrl() {
      return this.BASE_URL + "/api/auth/signup";
    }
    static GetCompositionConnectionBetweenTwoConceptsUrl() {
      return this.BASE_URL + "/api/get-composition-connection-between-two-concepts";
    }
    static SearchCompositionsUrl() {
      return this.BASE_URL + "/api/search-compositions";
    }
    static SearchLinkMultipleAll() {
      return this.BASE_URL + "/api/Connection/search-link-multiple-all";
    }
    static CreateSessionId() {
      return this.BASE_URL + "/api/create-session-id-remote";
    }
    static CreateSessionVisitUrl() {
      return this.BASE_URL + "/api/create-remote-session-visit";
    }
    static ViewInternalDataUrl() {
      return this.BASE_URL + "/api/view-api-internal-data-ccs-id-bulk";
    }
    static SearchInternalWithAuthenticatedCcsUrl() {
      return this.BASE_URL + "/api/search-composition-internal-authenticated-ccs";
    }
    static SearchInternalWithCcsUrl() {
      return this.BASE_URL + "/api-search-compositions-internal-clean-ccs";
    }
    static CreateGhostConceptApiUrl() {
      return o2.NODE_URL + "/api/v1/local-concepts";
    }
    static CreateGhostConnectionApiUrl() {
      return o2.NODE_URL + "/api/v1/local-connections";
    }
    static GetRealConceptById() {
      return o2.NODE_URL + "/api/v1/local-concepts-translate";
    }
    static GetReservedIdUrl() {
      return this.BASE_URL + "/api/get_reserved_ids";
    }
    static GetReservedConnectionIdUrl() {
      return this.BASE_URL + "/api/get_reserved_connection_ids";
    }
    static CreateTheTextDataUrl() {
      return this.BASE_URL + "/api/create_text_data";
    }
    static CreateTheCharacterDataUrl() {
      return this.BASE_URL + "/api/create_character_data";
    }
    static CreateTheConceptUrl() {
      return this.BASE_URL + "/api/create_the_concept";
    }
    static CreateTheConnectionUrl() {
      return this.BASE_URL + "/api/create_the_connection";
    }
    static CreateTheConnectionNewUrl() {
      return this.BASE_URL + "/api/create_the_connection_new";
    }
    static MakeTheTypeConceptUrl() {
      return this.BASE_URL + "/api/make_the_type_concept";
    }
    static DeleteTheConnectionUrl() {
      return this.BASE_URL + "/api/delete_connection";
    }
    static FreeschemaQueryUrl() {
      return this.BASE_URL + "/api/freeschema-query";
    }
    static uploadImageUrl() {
      return this.BASE_URL + "/api/Image/UploadImage";
    }
    static uploadFileUrl() {
      return this.BASE_URL + "/api/Image/UploadFile";
    }
    static sendMail() {
      return this.BASE_URL + "/api/sendmail";
    }
    static sendBulkMail() {
      return this.BASE_URL + "/api/sendmail/bulk";
    }
    static getWidgetData() {
      return this.BASE_URL + "/api/get-widget";
    }
  }
  o2.BASE_URL = "https://localhost:7053/", o2.AI_URL = "https://ai.freeschema.com", o2.MQTT_URL = "192.168.1.249", o2.NODE_URL = "http://localhost:5001", o2.LOG_SERVER = "https://logdev.freeschema.com", o2.BASE_APPLICATION = "", o2.FLAGS = { logApplication: false, logPackage: false, accessTracker: false, isTest: false }, o2.BASE_RANDOMIZER = 999;
}, 6963: (e2, t2, n2) => {
  n2.d(t2, { f: () => c2 });
  var o2 = n2(205), i2 = n2(6731), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a2(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a2);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class c2 {
    static waitForDataToLoad() {
      return r2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isCharacterLoaded) return e3("done");
      setTimeout(c2.checkFlag, 1e3, e3);
    }
    static addNodeToTree(e3) {
      return r2(this, void 0, void 0, (function* () {
        return null == this.characterRoot ? (this.characterRoot = e3, this.characterRoot) : (this.characterRoot = this.characterRoot.addCharacterNode(e3, this.characterRoot, this.characterRoot.height), this.characterRoot);
      }));
    }
    static removeNodeByCharacter(e3, t3) {
      return r2(this, void 0, void 0, (function* () {
        this.characterRoot && this.characterRoot.removeNodeWithVariants(this.characterRoot, e3, t3);
      }));
    }
    static countNumberOfNodes() {
      return this.characterRoot ? this.characterRoot.countNodeBelow(this.characterRoot) : 0;
    }
    static addConceptToTree(e3) {
      if ("" != e3.characterValue) {
        var t3 = new i2.b(e3.characterValue, e3, null, null);
        this.addNodeToTree(t3);
      }
    }
    static getNodeFromTree(e3) {
      return this.characterRoot ? this.characterRoot.getCharacterFromNode(e3, this.characterRoot) : this.characterRoot;
    }
    static getNodeFromTreeUpdated(e3) {
      return this.characterRoot ? this.characterRoot.getCharacterFromNode(e3, this.characterRoot) : this.characterRoot;
    }
    static getCharacterAndTypeFromTree(e3, t3) {
      return r2(this, void 0, void 0, (function* () {
        return this.characterRoot ? this.characterRoot.getFromNodeWithCharacterAndType(e3, t3, this.characterRoot) : this.characterRoot;
      }));
    }
    static getCharacterAndCategoryFromTree(e3, t3) {
      return r2(this, void 0, void 0, (function* () {
        return this.characterRoot ? this.characterRoot.getFromNodeWithCharacterAndCategory(e3, t3, this.characterRoot) : this.characterRoot;
      }));
    }
    static removeConceptCharacter(e3) {
      this.characterRoot && (this.characterRoot = this.characterRoot.removeNode(this.characterRoot, e3));
    }
  }
  c2.characterRoot = null;
}, 2202: (e2, t2, n2) => {
  n2.d(t2, { W: () => s2 });
  var o2 = n2(6963), i2 = n2(6731), r2 = n2(205), c2 = n2(2830), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 {
    static addNodeToTree(e3) {
      if (null == this.root) return this.root = e3, this.root;
      this.root = this.root.addNode(e3, this.root, this.root.height);
    }
    static waitForDataToLoad() {
      return a2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (r2.B.isDataLoaded) return e3("done");
      setTimeout(s2.checkFlag, 1e3, e3);
    }
    static addConceptToTree(e3) {
      let t3 = new i2.b(e3.id, e3, null, null), n3 = new i2.b(e3.characterValue, e3, null, null);
      o2.f.addNodeToTree(n3), this.addNodeToTree(t3);
    }
    static getNodeFromTree(e3) {
      return a2(this, void 0, void 0, (function* () {
        return this.root ? this.root.getFromNode(e3, this.root) : null;
      }));
    }
    static removeNodeFromTree(e3) {
      return a2(this, void 0, void 0, (function* () {
        if (this.root) {
          let t3 = new Event(`${e3}`);
          console.log("this is the fired event after delete", t3), (0, c2.dispatchIdEvent)(e3), this.root = this.root.removeNode(this.root, e3);
        }
      }));
    }
    static getConceptListFromIds(e3, t3, n3) {
      return a2(this, void 0, void 0, (function* () {
        this.root && this.root.checkIfIdsInNode(this.root, e3, t3, n3);
      }));
    }
    static countNumberOfNodes() {
      return this.root ? this.root.countNodeBelow(this.root) : 0;
    }
  }
  s2.root = null;
}, 5457: (e2, t2, n2) => {
  n2.d(t2, { c: () => s2 });
  var o2 = n2(2830), i2 = n2(7282), r2 = n2(205);
  class c2 {
    constructor(e3, t3) {
      this.value = [], this.height = 1, this.key = e3, this.value.push(t3), this.leftNode = null, this.rightNode = null, this.currentNode = null;
    }
    addType(e3, t3, n3) {
      var o3, i3, r3, a3;
      if (null == e3) return new c2(t3, n3);
      if (t3 < e3.key) e3.leftNode = this.addType(e3.leftNode, t3, n3);
      else {
        if (!(t3 > e3.key)) return e3.value.push(n3), e3;
        e3.rightNode = this.addType(e3.rightNode, t3, n3);
      }
      e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1;
      const s3 = this.getBalanceFactor(e3);
      return s3 > 1 && t3 < (null === (o3 = e3.leftNode) || void 0 === o3 ? void 0 : o3.key) ? this.rightRotate(e3) : s3 < -1 && t3 > (null === (i3 = e3.rightNode) || void 0 === i3 ? void 0 : i3.key) ? this.leftRotate(e3) : s3 > 1 && t3 > (null === (r3 = e3.leftNode) || void 0 === r3 ? void 0 : r3.key) ? (e3.leftNode = this.leftRotate(e3.leftNode), this.rightRotate(e3)) : s3 < -1 && t3 < (null === (a3 = e3.rightNode) || void 0 === a3 ? void 0 : a3.key) ? (e3.rightNode = this.rightRotate(e3.rightNode), this.leftRotate(e3)) : e3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    removeNodeWithVariants(e3, t3, n3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNodeWithVariants(e3.leftNode, t3, n3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t3, n3), e3;
      if (e3.value.length > 0) {
        for (let t4 = 0; t4 < e3.value.length; t4++) if (n3 == e3.value[t4]) return e3.value.splice(t4, 1), e3;
      }
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t4.key, n3), e3;
      }
    }
    countNodeBelow(e3) {
      return null == e3 ? 0 : 1 + this.countNodeBelow(e3.leftNode) + this.countNodeBelow(e3.rightNode);
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
  var a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 {
    static addType(e3) {
      return a2(this, void 0, void 0, (function* () {
        return null == this.root ? (this.root = e3, new CustomEvent(`${e3.key}`, { detail: e3.value[0] }), (0, o2.dispatchIdEvent)(e3.key, { detail: e3.value[0] }), this.root) : (new CustomEvent(`${e3.key}`, { detail: e3.value[0] }), (0, o2.dispatchIdEvent)(e3.key, { detail: e3.value[0] }), this.root = this.root.addType(this.root, e3.key, e3.value[0]), this.root);
      }));
    }
    static addConceptToTree(e3) {
      if (0 != e3.typeId) {
        let t3 = new c2(e3.typeId, e3.id);
        this.addType(t3);
      }
    }
    static removeTypeConcept(e3, t3) {
      this.root && (this.root = this.root.removeNodeWithVariants(this.root, e3, t3));
    }
    static getNodeFromTreeNew(e3) {
      return this.root ? this.root.getFromNode(e3, this.root) : this.root;
    }
    static getTypeVariantsFromTreeNew(e3) {
      return a2(this, void 0, void 0, (function* () {
        let t3 = this.getNodeFromTreeNew(e3), n3 = [], i3 = [];
        if (t3) {
          n3 = t3.value;
          for (let e4 = 0; e4 < n3.length; e4++) {
            let t4 = false;
            for (let o3 = 0; o3 < i3.length; o3++) i3[o3].id == n3[e4] && (t4 = true);
            t4 || i3.push(yield (0, o2.GetTheConcept)(n3[e4]));
          }
        }
        return i3;
      }));
    }
    static waitForDataToLoad() {
      return a2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (r2.B.isTypeLoaded) return e3("done");
      setTimeout(s2.checkFlag, 1e3, e3);
    }
    static getTypeVariantsFromTreeWithUserIdNew(e3, t3) {
      return a2(this, void 0, void 0, (function* () {
        let n3 = [], o3 = yield this.getTypeVariantsFromTreeNew(e3);
        console.log("these are all the concepts", o3);
        for (let e4 = 0; e4 < o3.length; e4++) o3[e4].userId == t3 && n3.push(o3[e4]);
        return n3;
      }));
    }
    static getTypeVariantsWithCharacterValueNew(e3, t3) {
      return a2(this, void 0, void 0, (function* () {
        let n3 = yield this.getTypeVariantsFromTreeNew(t3);
        console.log("this is all the concepts for character", n3);
        let o3 = (0, i2.o)();
        for (let t4 = 0; t4 < n3.length; t4++) n3[t4].characterValue == e3 && (o3 = n3[t4]);
        return o3;
      }));
    }
    static countNumberOfNodes() {
      return this.typeRoot ? this.typeRoot.countNodeBelow(this.typeRoot) : 0;
    }
  }
  s2.typeRoot = null, s2.root = null;
}, 2615: (e2, t2, n2) => {
  n2.d(t2, { j: () => i2 });
  var o2 = n2(2830);
  class i2 {
    constructor(e3, t3, n3, i3, r2, c2, a2, s2 = false, l2, d2, h2) {
      this.count = 0, this.typeCharacter = "", this.isComposition = false, this.isTemp = false, this.isSynced = false, this.applicationId = o2.BaseUrl.getRandomizer(), this.x = 0, this.y = 0, this.id = e3, this.userId = t3, this.typeId = n3, this.ghostId = e3, this.categoryId = i3, this.referentId = r2, this.characterValue = `${c2}`, this.accessId = a2, this.typeCharacter = h2, this.type = null, this.isNew = s2, this.entryTimeStamp = l2, this.updatedTimeStamp = d2;
    }
    getType() {
      console.log(this.typeId);
    }
  }
}, 9639: (e2, t2, n2) => {
  n2.d(t2, { I: () => d2 });
  var o2 = n2(3655), i2 = n2(2202), r2 = n2(6963), c2 = n2(5457), a2 = n2(7282), s2 = n2(2830), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class d2 {
    constructor() {
      this.name = "conceptsArray";
    }
    static CheckContains(e3) {
      for (var t3 = false, n3 = 0; n3 < this.conceptsArray.length; n3++) this.conceptsArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static AddNpc(e3) {
      this.NPC.includes(e3) || (this.NPC.length > 10 && (this.NPC = []), this.NPC.push(e3));
    }
    static GetNpc(e3) {
      return !!this.NPC.includes(e3);
    }
    static AddConceptToStorage(e3) {
      e3.id > 0 && (0, o2.kH)("concept", e3);
    }
    static GetConceptBulkData(e3, t3, n3) {
      return l2(this, void 0, void 0, (function* () {
        yield i2.W.getConceptListFromIds(e3, t3, n3);
      }));
    }
    static AddConcept(e3) {
      if (s2.serviceWorker) try {
        (0, s2.sendMessage)("ConceptsData__AddConcept", { concept: e3 });
      } catch (e4) {
        console.error("Concept Data, Add Concpet sw error: ", e4), (0, s2.handleServiceWorkerException)(e4);
      }
      e3.id > 0 && (i2.W.addConceptToTree(e3), c2.c.addConceptToTree(e3));
    }
    static AddConceptToMemory(e3) {
      e3.id > 0 && (i2.W.addConceptToTree(e3), c2.c.addConceptToTree(e3));
    }
    static AddConceptTemporary(e3) {
      var t3 = this.CheckContains(e3);
      this.conceptDictionary[e3.id] = e3, t3 && this.RemoveConcept(e3), this.conceptsArray.push(e3);
    }
    static RemoveConcept(e3) {
      for (var t3 = 0; t3 < this.conceptsArray.length; t3++) this.conceptsArray[t3].id == e3.id && this.conceptsArray.splice(t3, 1);
      (0, o2.wh)("concept", e3.id);
    }
    static GetConcept(e3) {
      return l2(this, void 0, void 0, (function* () {
        if (s2.serviceWorker) try {
          return (yield (0, s2.sendMessage)("ConceptsData__GetConcept", { id: e3 })).data;
        } catch (e4) {
          console.error("Concept Data, Get Concpet sw error: ", e4), (0, s2.handleServiceWorkerException)(e4);
        }
        if (0 == e3 || null == e3 || null == e3) return (0, a2.o)();
        var t3 = (0, a2.o)(), n3 = yield i2.W.getNodeFromTree(e3);
        if (null == n3 ? void 0 : n3.value) {
          var o3 = n3.value;
          o3 && (t3 = o3);
        }
        return t3;
      }));
    }
    static GetConceptByCharacter(e3) {
      return l2(this, void 0, void 0, (function* () {
        var t3 = (0, a2.o)(), n3 = r2.f.getNodeFromTree(e3);
        return n3 && (t3 = n3.value), t3;
      }));
    }
    static GetConceptByCharacterUpdated(e3) {
      return l2(this, void 0, void 0, (function* () {
        var t3 = (0, a2.o)(), n3 = r2.f.getNodeFromTree(e3);
        return n3 && (t3 = n3.value), t3;
      }));
    }
    static GetConceptByCharacterAndTypeLocal(e3, t3) {
      return l2(this, void 0, void 0, (function* () {
        return (0, a2.o)(), yield c2.c.getTypeVariantsWithCharacterValueNew(e3, t3);
      }));
    }
    static GetConceptByCharacterAndCategoryLocal(e3, t3) {
      return l2(this, void 0, void 0, (function* () {
        var n3 = (0, a2.o)(), o3 = yield r2.f.getCharacterAndCategoryFromTree(e3, t3);
        return o3 && (n3 = o3.value), n3;
      }));
    }
    static GetConceptsByTypeId(e3) {
      let t3 = [];
      for (var n3 = 0; n3 < this.conceptsArray.length; n3++) this.conceptsArray[n3].typeId == e3 && t3.push(this.conceptsArray[n3]);
      return t3;
    }
    static GetConceptsByTypeIdAndUser(e3, t3) {
      var n3 = arguments;
      return l2(this, void 0, void 0, (function* () {
        if (s2.Logger.logfunction("ConceptsData.GetConceptsByTypeIdAndUser", n3), s2.serviceWorker) try {
          return (yield (0, s2.sendMessage)("ConceptsData__GetConceptsByTypeIdAndUser", { typeId: e3, userId: t3 })).data;
        } catch (e4) {
          console.error("Concept Data, Get Concpet sw error:", e4), (0, s2.handleServiceWorkerException)(e4);
        }
        let o3 = [];
        return o3 = yield c2.c.getTypeVariantsFromTreeWithUserIdNew(e3, t3), o3;
      }));
    }
    static GetBinaryCharacterTree() {
      return r2.f.characterRoot;
    }
    getName() {
      return this.name;
    }
  }
  d2.conceptsArray = [], d2.NPC = [], d2.conceptDictionary = [];
}, 2155: (e2, t2, n2) => {
  n2.d(t2, { N: () => r2 });
  var o2 = n2(7282), i2 = n2(9581);
  class r2 {
    constructor(e3 = 0, t3, n3, r3, c2, a2, s2) {
      this.count = 0, this.isTemp = false, this.toUpdate = false, this.applicationId = i2.B.getRandomizer(), this.type = (0, o2.o)(), this.ofConcept = (0, o2.o)(), this.toConcept = (0, o2.o)(), this.id = e3, this.ofTheConceptId = t3, this.toTheConceptId = n3, this.userId = r3, this.typeId = c2, this.ghostId = e3, this.orderId = a2, this.accessId = s2, this.entryTimeStamp = /* @__PURE__ */ new Date(), this.terminationDateTime = /* @__PURE__ */ new Date(), this.localSyncTime = /* @__PURE__ */ new Date(), this.typeCharacter = "";
    }
  }
}, 5239: (e2, t2, n2) => {
  n2.d(t2, { O: () => a2 });
  var o2 = n2(205), i2 = n2(2830);
  class r2 {
    constructor(e3, t3, n3, o3) {
      this.leftNode = null, this.rightNode = null, this.variants = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3, this.currentNode = null;
    }
    addCurrentNode(e3, t3) {
      return null == t3 ? t3 = e3 : (e3.value.typeId != t3.value.typeId && (t3.currentNode = this.addCurrentNode(e3, t3.currentNode)), t3);
    }
    addCurrentNodeType(e3, t3) {
      if (null == t3) return e3;
      let n3 = false;
      e3.value.id == t3.value.id && (n3 = true);
      for (let o3 = 0; o3 < t3.variants.length; o3++) t3.variants[o3].value.id == e3.value.id && (n3 = true);
      return n3 || t3.variants.push(e3), t3;
    }
    getMax(e3, t3) {
      return e3 > t3 ? e3 : t3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      let o3 = t3.leftNode, i3 = t3.rightNode;
      if (e3.key < t3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(e3.key > t3.key)) return t3;
        t3.rightNode = this.addNode(e3, i3, n3);
      }
      t3.height = 1 + this.getMax(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r3 = this.getBalanceFactor(t3);
      if (r3 > 1 && t3.leftNode) {
        if (this.getBalanceFactor(t3.leftNode) >= 0) return this.rightRotate(t3);
        if (this.getBalanceFactor(t3.leftNode) < 0) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r3 < -1 && t3.rightNode) {
        if (this.getBalanceFactor(t3.rightNode) <= 0) return this.leftRotate(t3);
        if (this.getBalanceFactor(t3.rightNode) > 0) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
    addTypeNode(e3, t3, n3) {
      if (0 != e3.value.typeId) {
        if (null == t3) return e3;
        let o3 = t3.leftNode, i3 = t3.rightNode;
        if (t3.key > e3.key) t3.leftNode = this.addTypeNode(e3, o3, n3);
        else {
          if (!(t3.key < e3.key)) return t3.key == e3.key && 0 != t3.key && t3.addCurrentNodeType(e3, t3), t3;
          t3.rightNode = this.addTypeNode(e3, i3, n3);
        }
        t3.height = 1 + this.getMax(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
        let r3 = this.getBalanceFactor(t3);
        if (r3 > 1 && t3.leftNode) {
          if (e3.key < t3.leftNode.key) {
            return this.rightRotate(t3);
          }
          if (e3.key > t3.leftNode.key) {
            return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
          }
        }
        if (r3 < -1 && t3.rightNode) {
          if (e3.key > t3.rightNode.key) {
            return this.leftRotate(t3);
          }
          if (e3.key < t3.rightNode.key) {
            return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
          }
        }
      }
      return t3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = this.getMax(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = this.getMax(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
        throw console.log("this is the error in right rotation", e3, t3), new Error("Cannot perform right rotation: left node is null.");
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = this.getMax(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = this.getMax(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
        throw console.log("this is the error in left rotation", e3, t3), new Error("Cannot perform left rotation: right node is null.");
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      try {
        if (t3) return e3 == t3.key ? (t3.value.count ? t3.value.count++ : t3.value.count = 1, t3) : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3;
      } catch (n3) {
        console.log("this is the exception", e3, t3, null == t3 ? void 0 : t3.leftNode, null == t3 ? void 0 : t3.rightNode);
      }
      return t3;
    }
    getCharacterFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getCharacterFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getCharacterFromNode(e3, t3.rightNode) : t3 : t3;
    }
    checkIfIdsInNode(e3, t3, n3, o3) {
      if (e3) {
        if (t3.includes(e3.key)) {
          n3.push(e3.value);
          let o4 = t3.indexOf(e3.key);
          t3.splice(o4, 1);
        }
        e3.leftNode && this.checkIfIdsInNode(e3.leftNode, t3, n3, o3), e3.rightNode && this.checkIfIdsInNode(e3.rightNode, t3, n3, o3);
      }
    }
    traverse(e3) {
      let t3 = 0;
      return e3 && (t3 += 1, (null == e3 ? void 0 : e3.leftNode) && (t3 += this.traverse(e3.leftNode)), e3.rightNode && (t3 += this.traverse(e3.rightNode))), t3;
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (new Event(`${e3.value.ofTheConceptId}`), (0, i2.dispatchIdEvent)(e3.value.ofTheConceptId), null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.variants = t4.variants, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNode(e3.rightNode, t4.key), e3;
      }
    }
    removeNodeWithVariants(e3, t3, n3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNodeWithVariants(e3.leftNode, t3, n3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t3, n3), e3;
      if (e3.variants.length > 0) {
        if (e3.value.id == n3) {
          let t4 = e3.variants[0];
          if (t4) return e3.value = t4.value, e3.key = t4.key, e3.currentNode = t4.currentNode, e3.variants.splice(0, 1), e3;
        } else for (let t4 = 0; t4 < e3.variants.length; t4++) if (n3 == e3.variants[t4].value.id) return e3.variants.splice(t4, 1), e3;
      }
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.variants = t4.variants, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t4.key, n3), e3;
      }
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
  var c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class a2 {
    static addNodeToTree(e3) {
      try {
        if (null == this.connectionroot) return this.connectionroot = e3, this.connectionroot;
        this.connectionroot = this.connectionroot.addNode(e3, this.connectionroot, this.connectionroot.height);
      } catch (e4) {
        throw console.log("This is the error in making the tree", e4), e4;
      }
    }
    static addConnectionToTree(e3) {
      let t3 = new r2(e3.id, e3, null, null);
      this.addNodeToTree(t3);
    }
    static traverse() {
      var e3;
      return null === (e3 = this.connectionroot) || void 0 === e3 ? void 0 : e3.traverse(this.connectionroot);
    }
    static waitForDataToLoad() {
      return c2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isConnectionLoaded) return e3("done");
      setTimeout(a2.checkFlag, 1e3, e3);
    }
    static removeNodeFromTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        this.connectionroot && (this.connectionroot = this.connectionroot.removeNode(this.connectionroot, e3));
      }));
    }
    static getNodeFromTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        try {
          return this.connectionroot ? this.connectionroot.getFromNode(e3, this.connectionroot) : this.connectionroot;
        } catch (t3) {
          console.log("this is the getNodeFromTree", e3, this.connectionroot);
        }
      }));
    }
    static getConnectionListFromIds(e3, t3, n3) {
      return c2(this, void 0, void 0, (function* () {
        this.connectionroot && this.connectionroot.checkIfIdsInNode(this.connectionroot, e3, t3, n3);
      }));
    }
  }
  a2.connectionroot = null;
}, 991: (e2, t2, n2) => {
  n2.d(t2, { H: () => a2 });
  var o2 = n2(2830), i2 = n2(3996);
  class r2 extends i2.i {
    constructor(e3, t3, n3, o3) {
      super(e3, t3, n3, o3), this.key = "", this.value = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      let o3 = t3.leftNode, i3 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return t3;
        t3.rightNode = this.addNode(e3, i3, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r3 = this.getBalanceFactor(t3);
      if (r3 > 1 && t3.leftNode) {
        if (this.getBalanceFactor(t3.leftNode) >= 0) return this.rightRotate(t3);
        if (this.getBalanceFactor(t3.leftNode) < 0) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r3 < -1 && t3.rightNode) {
        if (this.getBalanceFactor(t3.rightNode) <= 0) return this.leftRotate(t3);
        if (this.getBalanceFactor(t3.rightNode) > 0) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
  }
  var c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class a2 {
    static CreateCompositionKey(e3, t3) {
      return e3;
    }
    static GetConnectionByOfTheConceptAndTypeId(e3, t3) {
      let n3 = this.CreateCompositionKey(e3, t3);
      if (this.node) {
        let e4 = this.node.getFromNode(n3, this.node);
        if (e4) return e4.value;
      }
      return null;
    }
    static addConnection(e3) {
      if (e3.id > 0) {
        let t3 = this.CreateCompositionKey(e3.ofTheConceptId, e3.typeId);
        if (this.node) {
          let n3 = this.node.getFromNode(t3, this.node);
          if (n3) {
            let t4 = null == n3 ? void 0 : n3.value;
            0 == t4.length && (n3.value = []), t4.includes(e3.id) || t4.push(e3.id);
          } else {
            let n4 = [];
            n4.push(e3.id);
            let o3 = new r2(t3, n4, null, null);
            this.addNodeToTree(o3);
          }
        } else {
          let n3 = [];
          n3.push(e3.id);
          let o3 = new r2(t3, n3, null, null);
          this.addNodeToTree(o3);
        }
        new Event(`${t3}`);
      } else console.log("cannot insert key id with  n 0 to the connection tree", e3);
    }
    static addNodeToTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        return null == this.node ? (this.node = e3, (0, o2.dispatchIdEvent)(e3.key), this.node) : (this.node = this.node.addNode(e3, this.node, this.node.height), this.node);
      }));
    }
    static removeNodeFromTree(e3) {
      return c2(this, void 0, void 0, (function* () {
        this.node && (this.node = this.node.removeNode(this.node, e3));
      }));
    }
  }
  a2.node = null;
}, 3996: (e2, t2, n2) => {
  n2.d(t2, { i: () => o2 });
  class o2 {
    constructor(e3, t3, n3, o3) {
      this.key = "", this.value = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3;
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.variants = t4.variants, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNode(e3.rightNode, t4.key), e3;
      }
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
}, 8286: (e2, t2, n2) => {
  n2.d(t2, { d: () => f2 });
  var o2 = n2(1735), i2 = n2(2830), r2 = n2(3655), c2 = n2(1863), a2 = n2(2155), s2 = n2(5239), l2 = n2(991), d2 = n2(3996);
  class h2 extends d2.i {
    constructor(e3, t3, n3, o3) {
      super(e3, t3, n3, o3), this.key = "", this.value = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      let o3 = t3.leftNode, i3 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return t3;
        t3.rightNode = this.addNode(e3, i3, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r3 = this.getBalanceFactor(t3);
      if (r3 > 1 && t3.leftNode) {
        if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
        if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r3 < -1 && t3.rightNode) {
        if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
        if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
  }
  class u2 {
    static CreateCompositionKey(e3) {
      return e3;
    }
    static addNodeToTree(e3) {
      return t3 = this, n3 = void 0, i3 = function* () {
        return null == this.connectionTypeRoot ? (this.connectionTypeRoot = e3, this.connectionTypeRoot) : (this.connectionTypeRoot = this.connectionTypeRoot.addNode(e3, this.connectionTypeRoot, this.connectionTypeRoot.height), this.connectionTypeRoot);
      }, new ((o3 = void 0) || (o3 = Promise))((function(e4, r3) {
        function c3(e5) {
          try {
            s3(i3.next(e5));
          } catch (e6) {
            r3(e6);
          }
        }
        function a3(e5) {
          try {
            s3(i3.throw(e5));
          } catch (e6) {
            r3(e6);
          }
        }
        function s3(t4) {
          var n4;
          t4.done ? e4(t4.value) : (n4 = t4.value, n4 instanceof o3 ? n4 : new o3((function(e5) {
            e5(n4);
          }))).then(c3, a3);
        }
        s3((i3 = i3.apply(t3, n3 || [])).next());
      }));
      var t3, n3, o3, i3;
    }
    static addConnectionToTree(e3) {
      if (e3.id > 0) {
        let t3 = this.CreateCompositionKey(e3.typeId);
        if (this.connectionTypeRoot) {
          let n3 = this.connectionTypeRoot.getFromNode(t3, this.connectionTypeRoot);
          if (n3) {
            let t4 = null == n3 ? void 0 : n3.value;
            0 == t4.length && (n3.value = []), t4.includes(e3.id) || t4.push(e3.id);
          } else {
            let n4 = [];
            n4.push(e3.id);
            let o3 = new h2(t3, n4, null, null);
            this.addNodeToTree(o3);
          }
        } else {
          let n3 = [];
          n3.push(e3.id);
          let o3 = new h2(t3, n3, null, null);
          this.addNodeToTree(o3);
        }
      } else console.log("cannot insert key id with  n 0 to the connection tree", e3);
    }
    static GetConnectionByOfTheConceptAndTypeId(e3, t3) {
      let n3 = this.CreateCompositionKey(t3);
      if (this.connectionTypeRoot) {
        let e4 = this.connectionTypeRoot.getFromNode(n3, this.connectionTypeRoot);
        if (e4) return e4.value;
      }
      return null;
    }
  }
  u2.connectionTypeRoot = null;
  var p2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class f2 {
    constructor() {
      this.name = "Connection Array";
    }
    static CheckContains(e3) {
      let t3 = false;
      for (let n3 = 0; n3 < this.connectionArray.length; n3++) this.connectionArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static AddConnectionToStorage(e3) {
      (0, r2.kH)("connection", e3);
    }
    static AddConnection(e3) {
      try {
        s2.O.addConnectionToTree(e3), u2.addConnectionToTree(e3), l2.H.addConnection(e3);
      } catch (e4) {
        throw console.log("this is the error in making the connection"), e4;
      }
    }
    static AddConnectionToMemory(e3) {
      e3.isTemp || (s2.O.addConnectionToTree(e3), u2.addConnectionToTree(e3), l2.H.addConnection(e3));
    }
    static AddToDictionary(e3) {
      this.connectionDictionary[e3.id] = e3;
    }
    static RemoveConnection(e3) {
      0 != e3.id && ((0, r2.wh)("connection", e3.id), s2.O.removeNodeFromTree(e3.id), l2.H.removeNodeFromTree(e3.id));
    }
    static GetConnectionTypeOfTree() {
      l2.H.node;
    }
    static GetConnectionByOfTheConceptAndType(e3, t3) {
      return p2(this, void 0, void 0, (function* () {
        try {
          if (i2.serviceWorker) try {
            return (yield (0, i2.sendMessage)("ConnectionData__GetConnectionByOfTheConceptAndType", { ofTheConceptId: e3, typeId: t3 })).data;
          } catch (e4) {
            console.error("GetConnectionByOfTheConceptAndType sw error: ", e4), (0, i2.handleServiceWorkerException)(e4);
          }
          return l2.H.GetConnectionByOfTheConceptAndTypeId(e3, t3) || [];
        } catch (e4) {
          return console.log("this is the error in GetConnectionByOfTheConceptAndType", e4), [];
        }
      }));
    }
    static GetConnectionByOfType(e3, t3) {
      const n3 = i2.Logger.logfunction("ConnectionData.GetConnectionByOfType", arguments);
      let o3 = u2.GetConnectionByOfTheConceptAndTypeId(e3, t3);
      return o3 ? (i2.Logger.logUpdate(n3), o3) : (i2.Logger.logUpdate(n3), []);
    }
    static GetConnectionTree() {
      return s2.O.connectionroot;
    }
    static GetConnectionTypeTree() {
      return u2.connectionTypeRoot;
    }
    static GetConnectionBulkData(e3, t3, n3) {
      return p2(this, void 0, void 0, (function* () {
        yield s2.O.getConnectionListFromIds(e3, t3, n3);
      }));
    }
    static GetConnection(e3) {
      return p2(this, void 0, void 0, (function* () {
        o2.J.incrementConnection(e3);
        let t3 = new a2.N(0, 0, 0, 0, 0, 0, 0);
        try {
          if (i2.serviceWorker) try {
            return (yield (0, i2.sendMessage)("ConnectionData__GetConnection", { id: e3 })).data;
          } catch (e4) {
            console.error("GetConnection sw error: ", e4), (0, i2.handleServiceWorkerException)(e4);
          }
          let n3 = yield s2.O.getNodeFromTree(e3);
          if (null == n3 ? void 0 : n3.value) {
            let e4 = n3.value;
            e4 && (t3 = e4);
          }
          return t3;
        } catch (e4) {
          return console.log("this is the error in GetConnection", e4), t3;
        }
      }));
    }
    static GetConnectionsOfCompositionLocal(e3) {
      var t3 = arguments;
      return p2(this, void 0, void 0, (function* () {
        const n3 = i2.Logger.logfunction("ConnectionData.GetConnectionsOfCompositionLocal", t3);
        let o3 = [];
        try {
          if (i2.serviceWorker) {
            n3.serviceWorker = true;
            try {
              const t5 = yield (0, i2.sendMessage)("ConnectionData__GetConnectionsOfCompositionLocal", { id: e3 });
              return i2.Logger.logUpdate(n3), t5.data;
            } catch (e4) {
              console.error("GetConnectionsOfCompositionLocal sw error: ", e4), (0, c2.ey)(n3, "GetConnectionsOfCompositionLocal", e4), (0, i2.handleServiceWorkerException)(e4);
            }
          }
          let t4 = [];
          t4 = f2.GetConnectionByOfType(e3, e3);
          for (let e4 = 0; e4 < t4.length; e4++) {
            let r3 = yield s2.O.getNodeFromTree(t4[e4]);
            r3 && o3.push(r3.value), i2.Logger.logUpdate(n3);
          }
        } catch (t4) {
          console.log("this is the error GetConnectionsOfCompositionLocal", e3, o3), (0, c2.ey)(n3, "ConnectionData.GetConnectionsOfCompositionLocal", t4);
        }
        return o3;
      }));
    }
    static GetConnectionsOfConcept(e3) {
      return p2(this, void 0, void 0, (function* () {
        let t3 = [], n3 = [];
        try {
          if (i2.serviceWorker) try {
            return (yield (0, i2.sendMessage)("ConnectionData__GetConnectionsOfConcept", { id: e3 })).data;
          } catch (e4) {
            console.error("GetConnectionsOfConcept sw error: ", e4), (0, i2.handleServiceWorkerException)(e4);
          }
          t3 = yield f2.GetConnectionByOfTheConceptAndType(e3, e3);
          for (let e4 = 0; e4 < t3.length; e4++) {
            let o3 = yield s2.O.getNodeFromTree(t3[e4]);
            o3 && n3.push(o3.value);
          }
          return n3;
        } catch (e4) {
          return console.log("this is the error in GetConnectionsOfConcept", e4), n3;
        }
      }));
    }
    getName() {
      return this.name;
    }
  }
  f2.connectionArray = [], f2.connectionDictionary = [];
}, 205: (e2, t2, n2) => {
  n2.d(t2, { B: () => o2 });
  class o2 {
  }
  o2.isTypeLoaded = false, o2.isCharacterLoaded = false, o2.isDataLoaded = false, o2.isLocalDataLoaded = false, o2.isLocalCharacterLoaded = false, o2.isLocalTypeLoaded = false, o2.isConnectionLoaded = false, o2.isConnectionTypeLoaded = false, o2.isLocalConnectionLoaded = false;
}, 2515: (e2, t2, n2) => {
  n2.d(t2, { x: () => o2 });
  class o2 {
    constructor(e3, t3, n3, o3) {
      this.variants = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3, this.currentNode = null;
    }
    addCurrentNode(e3, t3) {
      return null == t3 ? t3 = e3 : (e3.value.typeId != t3.value.typeId && (t3.currentNode = this.addCurrentNode(e3, t3.currentNode)), t3);
    }
    addCurrentNodeType(e3, t3) {
      if (null == t3) return e3;
      var n3 = false;
      for (let o3 = 0; o3 < t3.variants.length; o3++) t3.variants[o3].value.id == e3.value.id && (n3 = true);
      return n3 || t3.variants.push(e3), t3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      var o3 = t3.leftNode, i2 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return t3;
        t3.rightNode = this.addNode(e3, i2, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r2 = this.getBalanceFactor(t3);
      if (r2 > 1 && t3.leftNode) {
        if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
        if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r2 < -1 && t3.rightNode) {
        if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
        if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
    addCharacterNode(e3, t3, n3) {
      if ("" != e3.value.characterValue) {
        if (null == t3) return e3;
        var o3 = t3.leftNode, i2 = t3.rightNode;
        if (t3.key > e3.key) t3.leftNode = this.addCharacterNode(e3, o3, n3);
        else {
          if (!(t3.key < e3.key)) return t3.key == e3.key && "" != t3.key && t3.value.id != e3.value.id && t3.addCurrentNodeType(e3, t3), t3;
          t3.rightNode = this.addCharacterNode(e3, i2, n3);
        }
        t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
        let r2 = this.getBalanceFactor(t3);
        if (r2 > 1 && t3.leftNode) {
          if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
          if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
        }
        if (r2 < -1 && t3.rightNode) {
          if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
          if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
        }
      }
      return t3;
    }
    addTypeNode(e3, t3, n3) {
      if (0 != e3.value.typeId) {
        if (null == t3) return e3;
        var o3 = t3.leftNode, i2 = t3.rightNode;
        if (t3.key > e3.key) t3.leftNode = this.addTypeNode(e3, o3, n3);
        else {
          if (!(t3.key < e3.key)) return t3.key == e3.key && 0 != t3.key && t3.value.id != e3.value.id && t3.addCurrentNodeType(e3, t3), t3;
          t3.rightNode = this.addTypeNode(e3, i2, n3);
        }
        t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
        let r2 = this.getBalanceFactor(t3);
        if (r2 > 1 && t3.leftNode) {
          if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
          if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
        }
        if (r2 < -1 && t3.rightNode) {
          if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
          if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
        }
      }
      return t3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    updateNodeSyncStatus(e3, t3, n3) {
      if (n3) {
        if (e3 == n3.key) {
          let e4 = n3.value;
          return e4.isSynced = t3, n3.value = e4, n3;
        }
        return e3 < n3.key ? this.updateNodeSyncStatus(e3, t3, n3.leftNode) : e3 > n3.key ? this.updateNodeSyncStatus(e3, t3, n3.rightNode) : n3;
      }
      return n3;
    }
    getCharacterFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getCharacterFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getCharacterFromNode(e3, t3.rightNode) : t3 : t3;
    }
    getFromNodeWithCharacterAndType(e3, t3, n3) {
      if (e3 = `${e3}`, n3) {
        if (e3 == n3.key) {
          if (e3 == n3.value.characterValue && t3 == n3.value.typeId) return n3;
          for (let e4 = 0; e4 < n3.variants.length; e4++) if (n3.variants[e4].value.typeId == t3) return n3.variants[e4];
        } else {
          if (e3 < n3.key) return this.getFromNodeWithCharacterAndType(e3, t3, n3.leftNode);
          if (e3 > n3.key) return this.getFromNodeWithCharacterAndType(e3, t3, n3.rightNode);
        }
        return null;
      }
      return n3;
    }
    getFromNodeWithCharacterAndCategory(e3, t3, n3) {
      if (e3 = `${e3}`, n3) {
        if (e3 == n3.key) {
          if (e3 == n3.value.characterValue && t3 == n3.value.categoryId) return n3;
          for (let e4 = 0; e4 < n3.variants.length; e4++) if (n3.variants[e4].value.categoryId == t3) return n3.variants[e4];
        } else {
          if (e3 < n3.key) return this.getFromNodeWithCharacterAndCategory(e3, t3, n3.leftNode);
          if (e3 > n3.key) return this.getFromNodeWithCharacterAndCategory(e3, t3, n3.rightNode);
        }
        return null;
      }
      return n3;
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      var n3 = this.inOrderSuccessor(e3.rightNode);
      return e3.value = n3.value, e3.key = n3.key, e3.variants = n3.variants, e3.currentNode = n3.currentNode, e3.rightNode = this.removeNode(e3.rightNode, n3.key), e3;
    }
    removeNodeWithVariants(e3, t3, n3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNodeWithVariants(e3.leftNode, t3, n3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t3, n3), e3;
      if (e3.variants.length > 0) {
        if (e3.value.id == n3) {
          var o3 = e3.variants[0];
          if (o3) return e3.value = o3.value, e3.key = o3.key, e3.currentNode = o3.currentNode, e3.variants.splice(0, 1), e3;
        } else for (let t4 = 0; t4 < e3.variants.length; t4++) if (n3 == e3.variants[t4].value.id) return e3.variants.splice(t4, 1), e3;
      }
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      var i2 = this.inOrderSuccessor(e3.rightNode);
      return e3.value = i2.value, e3.key = i2.key, e3.variants = i2.variants, e3.currentNode = i2.currentNode, e3.rightNode = this.removeNodeWithVariants(e3.rightNode, i2.key, n3), e3;
    }
    countNodeBelow(e3) {
      return null == e3 ? 0 : 1 + this.countNodeBelow(e3.leftNode) + this.countNodeBelow(e3.rightNode);
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
}, 9736: (e2, t2, n2) => {
  n2.d(t2, { v: () => m2 });
  var o2 = n2(205), i2 = n2(2515), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class c2 {
    static addNodeToTree(e3) {
      if (null == this.root) return this.root = e3, this.root;
      this.root = this.root.addNode(e3, this.root, this.root.height);
    }
    static addConceptToTree(e3) {
      var t3 = new i2.x(e3.id, e3, null, null);
      new i2.x(e3.characterValue, e3, null, null), this.addNodeToTree(t3);
    }
    static waitForDataToLoad() {
      return r2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isLocalDataLoaded) return e3("done");
      setTimeout(c2.checkFlag, 1e3, e3);
    }
    static getNodeFromTree(e3) {
      return r2(this, void 0, void 0, (function* () {
        return this.root ? this.root.getFromNode(e3, this.root) : null;
      }));
    }
    static getCharacterAndTypeFromTree(e3, t3) {
      return this.root ? this.root.getFromNodeWithCharacterAndType(e3, t3, this.root) : this.root;
    }
    static updateSyncStatus(e3) {
      return this.root ? this.root.updateNodeSyncStatus(e3, true, this.root) : this.root;
    }
    static removeNodeFromTree(e3) {
      return r2(this, void 0, void 0, (function* () {
        this.root && (this.root = this.root.removeNode(this.root, e3));
      }));
    }
  }
  c2.root = null;
  var a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 {
    static waitForDataToLoad() {
      return a2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isLocalCharacterLoaded) return e3("done");
      setTimeout(s2.checkFlag, 1e3, e3);
    }
    static addNodeToTree(e3) {
      return a2(this, void 0, void 0, (function* () {
        return null == this.LocalCharacterRoot ? (this.LocalCharacterRoot = e3, this.LocalCharacterRoot) : (this.LocalCharacterRoot = this.LocalCharacterRoot.addCharacterNode(e3, this.LocalCharacterRoot, this.LocalCharacterRoot.height), this.LocalCharacterRoot);
      }));
    }
    static addConceptToTree(e3) {
      if ("" != e3.characterValue) {
        var t3 = new i2.x(e3.characterValue, e3, null, null);
        this.addNodeToTree(t3);
      }
    }
    static getNodeFromTree(e3) {
      return this.LocalCharacterRoot ? this.LocalCharacterRoot.getCharacterFromNode(e3, this.LocalCharacterRoot) : this.LocalCharacterRoot;
    }
    static getCharacterAndTypeFromTree(e3, t3) {
      return a2(this, void 0, void 0, (function* () {
        return this.LocalCharacterRoot ? this.LocalCharacterRoot.getFromNodeWithCharacterAndType(e3, t3, this.LocalCharacterRoot) : this.LocalCharacterRoot;
      }));
    }
    static getCharacterAndCategoryFromTree(e3, t3) {
      return a2(this, void 0, void 0, (function* () {
        return this.LocalCharacterRoot ? this.LocalCharacterRoot.getFromNodeWithCharacterAndCategory(e3, t3, this.LocalCharacterRoot) : this.LocalCharacterRoot;
      }));
    }
    static removeConceptType(e3, t3) {
      this.LocalCharacterRoot && (this.LocalCharacterRoot = this.LocalCharacterRoot.removeNodeWithVariants(this.LocalCharacterRoot, e3, t3));
    }
  }
  s2.LocalCharacterRoot = null;
  var l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class d2 {
    static addNodeToTree(e3) {
      return l2(this, void 0, void 0, (function* () {
        return null == this.LocalTypeRoot ? (this.LocalTypeRoot = e3, this.LocalTypeRoot) : (this.LocalTypeRoot = this.LocalTypeRoot.addTypeNode(e3, this.LocalTypeRoot, this.LocalTypeRoot.height), this.LocalTypeRoot);
      }));
    }
    static addConceptToTree(e3) {
      if (0 != e3.typeId) {
        var t3 = new i2.x(e3.typeId, e3, null, null);
        this.addNodeToTree(t3);
      }
    }
    static removeConceptType(e3, t3) {
      this.LocalTypeRoot && (this.LocalTypeRoot = this.LocalTypeRoot.removeNodeWithVariants(this.LocalTypeRoot, e3, t3));
    }
    static getNodeFromTree(e3) {
      return this.LocalTypeRoot ? this.LocalTypeRoot.getFromNode(e3, this.LocalTypeRoot) : this.LocalTypeRoot;
    }
    static getTypeVariantsFromTree(e3) {
      var t3 = this.getNodeFromTree(e3), n3 = [];
      if (t3) {
        n3.push(null == t3 ? void 0 : t3.value);
        for (let e4 = 0; e4 < t3.variants.length; e4++) n3.push(t3.variants[e4].value);
        return n3;
      }
    }
    static waitForDataToLoad() {
      return l2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isLocalTypeLoaded) return e3("done");
      setTimeout(d2.checkFlag, 1e3, e3);
    }
    static getTypeVariantsFromTreeWithUserId(e3, t3) {
      return l2(this, void 0, void 0, (function* () {
        var n3 = [], o3 = this.getNodeFromTree(e3);
        if (o3) {
          console.log("this is the node to type", o3), o3.value.userId != t3 && 999 != o3.value.userId || n3.push(null == o3 ? void 0 : o3.value);
          for (let e4 = 0; e4 < o3.variants.length; e4++) o3.variants[e4].value.userId != t3 && 999 != o3.value.userId || n3.push(o3.variants[e4].value);
        }
        return n3;
      }));
    }
  }
  d2.LocalTypeRoot = null;
  var h2 = n2(6416), u2 = n2(9639), p2 = n2(7820), f2 = n2(4864), y2 = n2(628), g2 = n2(2830), v2 = n2(3278), C2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class m2 {
    constructor() {
      this.name = "conceptsArray";
    }
    static AddConcept(e3) {
      0 != e3.id && (c2.addConceptToTree(e3), s2.addConceptToTree(e3), d2.addConceptToTree(e3), this.localconceptsArray.push(e3));
    }
    static AddPermanentConcept(e3) {
      0 != e3.id && (c2.removeNodeFromTree(e3.ghostId), s2.removeConceptType(e3.characterValue, e3.ghostId), d2.removeConceptType(e3.typeId, e3.ghostId), p2.G.addConceptToTree(e3), u2.I.AddConcept(e3), (0, g2.AddGhostConcept)(e3, e3.userId, v2.b.sessionId));
    }
    static RemoveConcept(e3) {
      return C2(this, void 0, void 0, (function* () {
        try {
          0 != e3.id && (c2.removeNodeFromTree(e3.ghostId), s2.removeConceptType(e3.characterValue, e3.ghostId), d2.removeConceptType(e3.typeId, e3.ghostId));
        } catch (e4) {
          throw e4;
        }
      }));
    }
    static RemoveConceptById(e3) {
      return C2(this, void 0, void 0, (function* () {
        try {
          let t3 = yield m2.GetConcept(e3);
          0 != t3.id && (c2.removeNodeFromTree(e3), s2.removeConceptType(t3.characterValue, t3.ghostId), d2.removeConceptType(t3.typeId, t3.ghostId), y2.H.RemoveConcept(t3));
        } catch (e4) {
          throw e4;
        }
      }));
    }
    static AddConceptToMemory(e3) {
      0 != e3.id && (c2.addConceptToTree(e3), s2.addConceptToTree(e3), d2.addConceptToTree(e3));
    }
    static GetConcept(e3) {
      return C2(this, void 0, void 0, (function* () {
        var t3 = (0, h2.u)(), n3 = yield c2.getNodeFromTree(e3);
        if (null == n3 ? void 0 : n3.value) {
          var o3 = n3.value;
          o3 && (t3 = o3);
        }
        return t3;
      }));
    }
    static UpdateConceptSyncStatus(e3) {
      return C2(this, void 0, void 0, (function* () {
        c2.updateSyncStatus(e3);
      }));
    }
    static GetConceptByGhostId(e3) {
      return C2(this, void 0, void 0, (function* () {
        var t3 = (0, h2.u)(), n3 = yield p2.G.getNodeFromTree(e3);
        if (null == n3 ? void 0 : n3.value) {
          var o3 = n3.value;
          o3 && (t3 = o3);
        }
        return t3;
      }));
    }
    static GetConceptByCharacter(e3) {
      return C2(this, void 0, void 0, (function* () {
        var t3 = (0, h2.u)(), n3 = s2.getNodeFromTree(e3);
        return n3 && (t3 = n3.value), t3;
      }));
    }
    static GetConceptByCharacterAndTypeLocal(e3, t3) {
      return C2(this, void 0, void 0, (function* () {
        var n3 = (0, h2.u)(), o3 = yield s2.getCharacterAndTypeFromTree(e3, t3);
        return o3 && (n3 = o3.value), n3;
      }));
    }
    static GetConceptByCharacterAndCategoryLocal(e3, t3) {
      return C2(this, void 0, void 0, (function* () {
        var n3 = (0, h2.u)(), o3 = yield s2.getCharacterAndCategoryFromTree(e3, t3);
        return o3 && (n3 = o3.value), n3;
      }));
    }
    static GetConceptsByTypeId(e3) {
      let t3 = [];
      for (var n3 = 0; n3 < this.localconceptsArray.length; n3++) this.localconceptsArray[n3].typeId == e3 && t3.push(this.localconceptsArray[n3]);
      return t3;
    }
    static GetConceptsByTypeIdAndUser(e3, t3) {
      return C2(this, void 0, void 0, (function* () {
        let n3 = [];
        return n3 = yield d2.getTypeVariantsFromTreeWithUserId(e3, t3), n3;
      }));
    }
    static ClearData() {
      return C2(this, void 0, void 0, (function* () {
        this.localconceptsArray = [], f2.G.connectionArray = [];
      }));
    }
    getName() {
      return this.name;
    }
  }
  m2.localconceptsArray = [];
}, 4864: (e2, t2, n2) => {
  n2.d(t2, { G: () => s2 });
  var o2 = n2(2155), i2 = n2(8286), r2 = n2(205), c2 = n2(628), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 {
    constructor() {
      this.name = "Connection Array";
    }
    static CheckContains(e3) {
      for (var t3 = false, n3 = 0; n3 < this.connectionArray.length; n3++) this.connectionArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static AddConnection(e3) {
      this.CheckContains(e3) && this.RemoveConnection(e3), e3.id, this.connectionArray.push(e3);
    }
    static AddConnectionToMemory(e3) {
      this.CheckContains(e3) && this.RemoveConnection(e3), this.connectionArray.push(e3);
    }
    static AddToDictionary(e3) {
      this.connectionDictionary[e3.id] = e3;
    }
    static RemoveConnection(e3) {
      for (var t3 = 0; t3 < this.connectionArray.length; t3++) this.connectionArray[t3].id == e3.id && this.connectionArray.splice(t3, 1);
      e3.id;
    }
    static RemoveConnectionById(e3) {
      for (var t3 = 0; t3 < this.connectionArray.length; t3++) this.connectionArray[t3].id == e3 && this.connectionArray.splice(t3, 1);
      c2.H.RemoveConnectionById(e3);
    }
    static AddPermanentConnection(e3) {
      e3.id > 0 && i2.d.AddConnection((function(e4) {
        let t3 = new o2.N(0, 0, 0, 0, 0, 0, 0);
        return t3.ofTheConceptId = e4.ofTheConceptId, t3.toTheConceptId = e4.toTheConceptId, t3.typeId = e4.typeId, t3.orderId = e4.orderId, t3.id = e4.id, t3;
      })(e3));
    }
    static GetConnection(e3) {
      var t3;
      t3 = null;
      for (var n3 = 0; n3 < this.connectionArray.length; n3++) this.connectionArray[n3].id == e3 && (t3 = this.connectionArray[n3]);
      return t3;
    }
    static waitForDataToLoad() {
      return a2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (r2.B.isLocalConnectionLoaded) return e3("done");
      setTimeout(s2.checkFlag, 1e3, e3);
    }
    static GetConnectionsOfCompositionLocal(e3) {
      return a2(this, void 0, void 0, (function* () {
        var t3 = [];
        try {
          for (var n3 = 0; n3 < this.connectionArray.length; n3++) this.connectionArray[n3].typeId == e3 && t3.push(this.connectionArray[n3]);
          return t3;
        } catch (e4) {
          return t3;
        }
      }));
    }
    static GetConnectionOfCompositionAndTypeLocal(e3, t3) {
      return a2(this, void 0, void 0, (function* () {
        var n3 = [];
        try {
          for (var o3 = 0; o3 < this.connectionArray.length; o3++) this.connectionArray[o3].typeId == e3 && this.connectionArray[o3].ofTheConceptId == t3 && n3.push(this.connectionArray[o3]);
          return n3;
        } catch (e4) {
          return n3;
        }
      }));
    }
    getName() {
      return this.name;
    }
  }
  s2.connectionArray = [], s2.connectionDictionary = [];
}, 7820: (e2, t2, n2) => {
  n2.d(t2, { G: () => c2 });
  var o2 = n2(205), i2 = n2(2515), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a2(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a2);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class c2 {
    static addNodeToTree(e3) {
      if (null == this.root) return this.root = e3, this.root;
      this.root = this.root.addNode(e3, this.root, this.root.height);
    }
    static addConceptToTree(e3) {
      var t3 = new i2.x(e3.ghostId, e3, null, null);
      this.addNodeToTree(t3);
    }
    static waitForDataToLoad() {
      return r2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (o2.B.isLocalDataLoaded) return e3("done");
      setTimeout(c2.checkFlag, 1e3, e3);
    }
    static getNodeFromTree(e3) {
      return r2(this, void 0, void 0, (function* () {
        return this.root ? this.root.getFromNode(e3, this.root) : null;
      }));
    }
    static removeNodeFromTree(e3) {
      return r2(this, void 0, void 0, (function* () {
        this.root && (this.root = this.root.removeNode(this.root, e3));
      }));
    }
  }
  c2.root = null;
}, 5257: (e2, t2, n2) => {
  n2.d(t2, { R: () => c2 });
  var o2 = n2(9003), i2 = n2(3075), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a2(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a2);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class c2 {
    static AddConceptId(e3) {
      this.localId = e3.value, (0, o2.kH)("localid", e3);
    }
    static getConceptId() {
      return r2(this, void 0, void 0, (function* () {
        try {
          if (this.localId) {
            if (this.ReservedLocalId.length < 5) {
              yield (0, i2.EO)().then((() => {
                let e4 = this.localId;
                for (let t3 = 1; t3 < 10; t3++) {
                  let n3 = this.localId - t3;
                  this.ReservedLocalId.push(n3), e4 = n3;
                }
                this.AddConceptId({ id: 0, value: e4 });
              })).catch(((e4) => (console.log(" getid: cannot get the id from indexdb"), -Math.floor(1e8 * Math.random()))));
              let e3 = this.ReservedLocalId[0];
              return this.ReservedLocalId.shift(), e3;
            }
            {
              let e3 = this.ReservedLocalId[0];
              return this.ReservedLocalId.shift(), e3;
            }
          }
          return yield (0, i2.EO)().then((() => {
            let e3 = this.localId;
            for (let t3 = 1; t3 < 10; t3++) {
              let n3 = this.localId - t3;
              this.ReservedLocalId.push(n3), e3 = n3;
            }
            this.AddConceptId({ id: 0, value: e3 });
          })), this.getConceptId();
        } catch (e3) {
          return console.log(" getid: this is the eror in concept", e3), -Math.floor(1e8 * Math.random());
        }
      }));
    }
    static AddConnectionId(e3) {
      this.localConnectionId = e3.value;
    }
    static getConnectionId() {
      return r2(this, void 0, void 0, (function* () {
        try {
          if (this.localConnectionId) {
            if (this.ReservedConnectionId.length < 5) {
              yield (0, i2.xd)().then((() => {
                let e4 = this.localConnectionId;
                for (let t3 = 1; t3 < 10; t3++) {
                  let n3 = this.localConnectionId - t3;
                  this.ReservedConnectionId.push(n3), e4 = n3;
                }
              })).catch(((e4) => (console.log("this is the new event", e4), -Math.floor(1e8 * Math.random()))));
              let e3 = this.ReservedConnectionId[0];
              return this.ReservedConnectionId.shift(), e3;
            }
            {
              let e3 = this.ReservedConnectionId[0];
              return this.ReservedConnectionId.shift(), e3;
            }
          }
          return yield (0, i2.xd)().then((() => {
            let e3 = this.localConnectionId;
            for (let t3 = 1; t3 < 10; t3++) {
              let n3 = this.localConnectionId - t3;
              this.ReservedConnectionId.push(n3), e3 = n3;
            }
            this.AddConnectionId({ id: 1, value: e3 });
          })), this.getConnectionId();
        } catch (e3) {
          return -Math.floor(1e8 * Math.random());
        }
      }));
    }
  }
  c2.ReservedLocalId = [], c2.ReservedConnectionId = [];
}, 628: (e2, t2, n2) => {
  n2.d(t2, { H: () => y2 });
  var o2 = n2(9581), i2 = n2(3278), r2 = n2(2830), c2 = n2(1863), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  const s2 = (e3, t3) => a2(void 0, void 0, void 0, (function* () {
    let n3 = { concepts: [], connections: [] };
    try {
      const r3 = new Headers();
      let a3 = { concepts: e3, connections: t3 };
      r3.set("Content-Type", "application/json"), r3.set("Authorization", "Bearer " + i2.b.BearerAccessToken), r3.set("Accept", "application/json"), r3.set("Randomizer", o2.B.getRandomizer().toString());
      const s3 = yield fetch(o2.B.CreateGhostConceptApiUrl(), { method: "POST", headers: r3, body: JSON.stringify(a3) });
      if (!s3.ok) throw (0, c2.ry)(s3), new Error(`Error! status: ${s3.status}`);
      const l3 = yield s3.json();
      return n3.concepts = l3.concepts, n3.connections = l3.connections, n3;
    } catch (e4) {
      throw e4 instanceof Error ? console.log("Create the concept api error message: ", e4.message) : console.log("Create the concept api unexpected error: ", e4), e4;
    }
  }));
  function l2(e3, t3) {
    const n3 = [];
    for (let o3 = 0; o3 < e3.length; o3 += t3) {
      const i3 = e3.slice(o3, o3 + t3);
      n3.push(i3);
    }
    return n3;
  }
  const d2 = (...e3) => a2(void 0, [...e3], void 0, (function* (e4 = []) {
    return yield Promise.all(e4.map(((e5) => {
      let t3 = JSON.parse(JSON.stringify(e5));
      return delete t3.type, delete t3.ofConcept, delete t3.toConcept, t3;
    })));
  }));
  var h2 = n2(9003), u2 = n2(9736), p2 = n2(4864), f2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class y2 {
    static CheckContains(e3) {
      for (var t3 = false, n3 = 0; n3 < this.conceptsSyncArray.length; n3++) this.conceptsSyncArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static SyncDataDelete(e3) {
      for (var t3 = 0; t3 < this.conceptsSyncArray.length; t3++) e3 == this.conceptsSyncArray[t3].id && this.conceptsSyncArray.splice(t3, 1);
      for (t3 = 0; t3 < this.connectionSyncArray.length; t3++) this.connectionSyncArray[t3].ofTheConceptId != e3 && this.connectionSyncArray[t3].toTheConceptId != e3 && this.connectionSyncArray[t3].typeId != e3 || this.connectionSyncArray.splice(t3, 1);
    }
    static CheckContainsConnection(e3) {
      for (var t3 = false, n3 = 0; n3 < this.connectionSyncArray.length; n3++) this.connectionSyncArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static AddConcept(e3) {
      try {
        let t3 = false;
        0 != y2.CheckIfTheConceptIdExists(e3.id, this.conceptsSyncArray).id && (t3 = true), t3 || this.conceptsSyncArray.push(e3);
      } catch (e4) {
        throw e4;
      }
    }
    static RemoveConcept(e3) {
      for (var t3 = 0; t3 < this.conceptsSyncArray.length; t3++) this.conceptsSyncArray[t3].id == e3.id && this.conceptsSyncArray.splice(t3, 1);
    }
    static SyncDataOnline(e3, t3) {
      return f2(this, void 0, void 0, (function* () {
        let n3 = performance.now();
        try {
          if (r2.serviceWorker) try {
            return (yield (0, r2.sendMessage)("LocalSyncData__SyncDataOnline", { transactionId: e3 })).data;
          } catch (e4) {
            console.error("LocalSyncData__SyncDataOnline sw error: ", e4), (0, r2.handleServiceWorkerException)(e4);
          }
          let n4 = [], o3 = [];
          if (e3 && this.transactionCollections.some(((t4) => t4.id == e3))) {
            const t4 = this.transactionCollections.find(((t5) => t5.id == e3));
            if (this.transactionCollections = this.transactionCollections.filter(((t5) => t5.id != e3)), this.transactionCollections = this.transactionCollections.filter(((e4) => new Date(e4.createdDate).getTime() > (/* @__PURE__ */ new Date()).getTime() - 6048e5)), !t4) return;
            n4 = t4.data.concepts.slice(), o3 = t4.data.connections.slice();
          } else Array.isArray(null == t3 ? void 0 : t3.concepts) && Array.isArray(null == t3 ? void 0 : t3.connections) ? (n4 = t3.concepts.filter(((e4) => this.conceptsSyncArray.some(((t4) => e4.id == t4.id || e4.ghostId == t4.ghostId)))).slice(), o3 = t3.connections.filter(((e4) => this.connectionSyncArray.some(((t4) => e4.id == t4.id || e4.ghostId == t4.ghostId)))).slice(), this.conceptsSyncArray = this.conceptsSyncArray.filter(((e4) => !t3.concepts.some(((t4) => e4.id == t4.id || e4.ghostId == t4.ghostId)))), this.connectionSyncArray = this.connectionSyncArray.filter(((e4) => !t3.connections.some(((t4) => e4.id == t4.id || e4.ghostId == t4.ghostId))))) : (console.warn("Syncing this way has been Depreceted in service worker."), console.info("Only if serive worker is not running"), n4 = this.conceptsSyncArray.slice() || [], o3 = this.connectionSyncArray.slice() || []);
          this.connectionSyncArray = [], this.conceptsSyncArray = [];
          let i3 = [];
          for (let e4 = 0; e4 < n4.length; e4++) i3.push(n4[e4]), yield u2.v.UpdateConceptSyncStatus(n4[e4].id);
          yield this.UpdateConceptListToIncludeRelatedConcepts(o3, i3);
          let h3 = yield (function(e4, t4) {
            return a2(this, void 0, void 0, (function* () {
              const n5 = r2.Logger.logfunction("CreateTheGhostConceptApi", [e4.length, t4.length]);
              try {
                const o4 = 1e3;
                let i4 = { concepts: [], connections: [] };
                const c3 = yield d2(e4), a3 = yield d2(t4);
                if (e4.length + t4.length <= 2 * o4) {
                  const e5 = yield s2(c3, a3);
                  return Array.isArray(null == e5 ? void 0 : e5.concepts) && (i4.concepts = [...i4.concepts, ...e5.concepts]), Array.isArray(null == e5 ? void 0 : e5.connections) && (i4.connections = [...i4.connections, ...e5.connections]), r2.Logger.logUpdate(n5), i4;
                }
                const h4 = l2(c3, o4), u3 = l2(a3, o4), p3 = [], f4 = [];
                for (let e5 = 0; e5 < h4.length; e5++) {
                  const t5 = h4[e5];
                  p3.push(s2(t5, []));
                }
                const y4 = yield Promise.all(p3);
                for (let e5 = 0; e5 < y4.length; e5++) {
                  const t5 = y4[e5];
                  Array.isArray(null == t5 ? void 0 : t5.concepts) && (i4.concepts = [...i4.concepts, ...t5.concepts]), Array.isArray(null == t5 ? void 0 : t5.connections) && (i4.connections = [...i4.connections, ...t5.connections]);
                }
                for (let e5 = 0; e5 < u3.length; e5++) {
                  const t5 = u3[e5];
                  f4.push(s2([], t5));
                }
                const g2 = yield Promise.all(f4);
                for (let e5 = 0; e5 < g2.length; e5++) {
                  const t5 = g2[e5];
                  Array.isArray(null == t5 ? void 0 : t5.concepts) && (i4.concepts = [...i4.concepts, ...t5.concepts]), Array.isArray(null == t5 ? void 0 : t5.connections) && (i4.connections = [...i4.connections, ...t5.connections]);
                }
                return r2.Logger.logUpdate(n5), i4;
              } catch (e5) {
                throw console.log(e5), (0, c2.ey)(n5, "CreateTheGhostConceptApi", e5), e5;
              }
            }));
          })(i3, o3), f3 = h3.concepts, y3 = h3.connections;
          for (let e4 = 0; e4 < f3.length; e4++) u2.v.AddPermanentConcept(f3[e4]);
          for (let e4 = 0; e4 < y3.length; e4++) p2.G.AddPermanentConnection(y3[e4]);
          return n4;
        } catch (e4) {
          throw r2.Logger.logError(n3, "unknown", void 0, "unknown", void 0, 500, e4, "SyncDataOnline", [], "unknown", void 0), e4;
        }
      }));
    }
    static ConvertGhostIdsInConnections(e3) {
      var t3, n3, o3;
      for (let i3 = 0; i3 < e3.length; i3++) {
        let r3 = e3[i3].ofTheConceptId, c3 = e3[i3].toTheConceptId, a3 = e3[i3].typeId, s3 = null !== (t3 = y2.ghostIdMap.get(r3)) && void 0 !== t3 ? t3 : r3, l3 = null !== (n3 = y2.ghostIdMap.get(c3)) && void 0 !== n3 ? n3 : c3, d3 = null !== (o3 = y2.ghostIdMap.get(a3)) && void 0 !== o3 ? o3 : a3;
        e3[i3].ofTheConceptId = s3, e3[i3].toTheConceptId = l3, e3[i3].typeId = d3;
      }
    }
    static UpdateConceptListToIncludeRelatedConcepts(e3, t3) {
      return f2(this, void 0, void 0, (function* () {
        for (let n3 = 0; n3 < e3.length; n3++) {
          let o3 = e3[n3].ofTheConceptId, i3 = e3[n3].toTheConceptId, r3 = e3[n3].typeId;
          if (o3 < 0) {
            let i4 = this.CheckIfTheConceptIdExists(o3, t3);
            0 == i4.id && (i4 = yield u2.v.GetConceptByGhostId(o3), 0 != i4.id ? i4.id != i4.ghostId && (e3[n3].ofTheConceptId = i4.id) : (i4 = yield u2.v.GetConcept(o3), this.AddConceptIfDoesNotExist(i4, t3)));
          }
          if (i3 < 0) {
            let o4 = this.CheckIfTheConceptIdExists(i3, t3);
            0 == o4.id && (o4 = yield u2.v.GetConceptByGhostId(i3), 0 != o4.id ? o4.id != o4.ghostId && (e3[n3].toTheConceptId = o4.id) : (o4 = yield u2.v.GetConcept(i3), this.AddConceptIfDoesNotExist(o4, t3)));
          }
          if (r3 < 0) {
            let o4 = this.CheckIfTheConceptIdExists(r3, t3);
            0 == o4.id && (o4 = yield u2.v.GetConceptByGhostId(r3), 0 != o4.id ? o4.id != o4.ghostId && (e3[n3].typeId = o4.id) : (o4 = yield u2.v.GetConcept(r3), this.AddConceptIfDoesNotExist(o4, t3)));
          }
        }
      }));
    }
    static AddConceptIfDoesNotExist(e3, t3 = []) {
      let n3 = false;
      for (let o3 = 0; o3 < t3.length; o3++) e3.ghostId == t3[o3].ghostId && (n3 = true);
      n3 || t3.push(e3);
    }
    static CheckIfTheConceptIdExists(e3, t3 = []) {
      let n3 = (0, r2.CreateDefaultLConcept)();
      for (let o3 = 0; o3 < t3.length; o3++) e3 != t3[o3].ghostId && e3 != t3[o3].id || (n3 = t3[o3]);
      return n3;
    }
    static AddConnection(e3) {
      this.connectionSyncArray.push(e3);
    }
    static RemoveConnection(e3) {
      for (var t3 = 0; t3 < this.connectionSyncArray.length; t3++) this.connectionSyncArray[t3].id == e3.id && this.connectionSyncArray.splice(t3, 1);
    }
    static RemoveConnectionById(e3) {
      for (var t3 = 0; t3 < this.connectionSyncArray.length; t3++) this.connectionSyncArray[t3].id == e3 && this.connectionSyncArray.splice(t3, 1);
    }
    static syncDataLocalDb() {
      return f2(this, void 0, void 0, (function* () {
        if (this.conceptsSyncArray.length > 0) {
          for (let e3 = 0; e3 < this.conceptsSyncArray.length; e3++) (0, h2.kH)("localconcept", this.conceptsSyncArray[e3]);
          this.conceptsSyncArray = [];
        }
        if (this.connectionSyncArray.length > 0) {
          for (let e3 = 0; e3 < this.connectionSyncArray.length; e3++) (0, h2.kH)("localconnection", this.connectionSyncArray[e3]);
          this.connectionSyncArray = [];
        }
        return "done";
      }));
    }
    static initializeTransaction(e3) {
      return f2(this, void 0, void 0, (function* () {
        try {
          if (r2.serviceWorker) try {
            return (yield (0, r2.sendMessage)("LocalSyncData__initializeTransaction", { transactionId: e3 })).data;
          } catch (e4) {
            console.error("LocalSyncData__initializeTransaction sw error: ", e4), (0, r2.handleServiceWorkerException)(e4);
          }
          if (this.transactionCollections.some(((t3) => t3.id == e3))) return;
          this.transactionCollections.push({ id: e3, data: { concepts: [], connections: [] }, createdDate: (/* @__PURE__ */ new Date()).toISOString() });
        } catch (e4) {
          console.log("error in initializeTransaction", e4);
        }
      }));
    }
    static markTransactionActions(e3, t3) {
      return f2(this, void 0, void 0, (function* () {
        try {
          if (r2.serviceWorker) try {
            return (yield (0, r2.sendMessage)("LocalSyncData__markTransactionActions", { transactionId: e3, actions: t3 })).data;
          } catch (e4) {
            console.error("LocalSyncData__markTransactionActions sw error: ", e4), (0, r2.handleServiceWorkerException)(e4);
          }
          this.transactionCollections = this.transactionCollections.map(((n3) => n3.id == e3 ? Object.assign(Object.assign({}, n3), { data: JSON.parse(JSON.stringify(t3)) }) : n3)), this.conceptsSyncArray = this.conceptsSyncArray.filter(((e4) => !t3.concepts.some(((t4) => t4.id == e4.id || t4.ghostId == e4.id)))), this.connectionSyncArray = this.connectionSyncArray.filter(((e4) => !t3.connections.some(((t4) => t4.id == e4.id || t4.ghostId == e4.id))));
        } catch (e4) {
          console.log("error in markTransactionActions", e4);
        }
      }));
    }
    static rollbackTransaction(e3, t3) {
      return f2(this, void 0, void 0, (function* () {
        try {
          if (r2.serviceWorker) try {
            return (yield (0, r2.sendMessage)("LocalSyncData__rollbackTransaction", { transactionId: e3, actions: t3 })).data;
          } catch (e4) {
            console.error("LocalSyncData__rollbackTransaction sw error: ", e4), (0, r2.handleServiceWorkerException)(e4);
          }
          if (this.transactionCollections.some(((t4) => t4.id == e3))) return;
          this.transactionCollections = this.transactionCollections.filter(((t4) => t4.id != e3));
        } catch (e4) {
          console.log("LocalSyncData, roll", e4);
        }
      }));
    }
  }
  y2.conceptsSyncArray = [], y2.connectionSyncArray = [], y2.ghostIdMap = /* @__PURE__ */ new Map(), y2.transactionCollections = [];
}, 6731: (e2, t2, n2) => {
  n2.d(t2, { b: () => o2 });
  class o2 {
    constructor(e3, t3, n3, o3) {
      this.variants = [], this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3, this.currentNode = null;
    }
    addCurrentNode(e3, t3) {
      return null == t3 ? t3 = e3 : (e3.value.typeId != t3.value.typeId && (t3.currentNode = this.addCurrentNode(e3, t3.currentNode)), t3);
    }
    addCurrentNodeType(e3, t3) {
      if (null == t3) return e3;
      let n3 = false;
      for (let o3 = 0; o3 < t3.variants.length; o3++) t3.variants[o3].value.id == e3.value.id && (n3 = true);
      return n3 || t3.variants.push(e3), t3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      let o3 = t3.leftNode, i2 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return t3;
        t3.rightNode = this.addNode(e3, i2, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r2 = this.getBalanceFactor(t3);
      if (r2 > 1 && t3.leftNode) {
        if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
        if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r2 < -1 && t3.rightNode) {
        if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
        if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
    checkIfIdsInNode(e3, t3, n3, o3) {
      if (e3) {
        if (t3.includes(e3.key)) {
          n3.push(e3.value);
          let o4 = t3.indexOf(e3.key);
          t3.splice(o4, 1);
        }
        e3.leftNode && this.checkIfIdsInNode(e3.leftNode, t3, n3, o3), e3.rightNode && this.checkIfIdsInNode(e3.rightNode, t3, n3, o3);
      }
    }
    addCharacterNode(e3, t3, n3) {
      if ("" != e3.value.characterValue) {
        if (null == t3) return e3;
        let o3 = t3.leftNode, i2 = t3.rightNode;
        if (t3.key > e3.key) t3.leftNode = this.addCharacterNode(e3, o3, n3);
        else {
          if (!(t3.key < e3.key)) return t3.key == e3.key && "" != t3.key && t3.value.id != e3.value.id && t3.addCurrentNodeType(e3, t3), t3;
          t3.rightNode = this.addCharacterNode(e3, i2, n3);
        }
        t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
        let r2 = this.getBalanceFactor(t3);
        if (r2 > 1 && t3.leftNode) {
          if (e3.key < t3.leftNode.key) {
            return this.rightRotate(t3);
          }
          if (e3.key > t3.leftNode.key) {
            return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
          }
        }
        if (r2 < -1 && t3.rightNode) {
          if (e3.key > t3.rightNode.key) {
            return this.leftRotate(t3);
          }
          if (e3.key < t3.rightNode.key) {
            return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
          }
        }
      }
      return t3;
    }
    addTypeNode(e3, t3, n3) {
      if (0 != e3.value.typeId) {
        if (null == t3) return console.log("adding the type node to the tree", e3), e3;
        let o3 = t3.leftNode, i2 = t3.rightNode;
        if (t3.key > e3.key) t3.leftNode = this.addTypeNode(e3, o3, n3);
        else {
          if (!(t3.key < e3.key)) return console.log("adding the type node to the tree down", e3), t3.key == e3.key && 0 != t3.key && t3.value.id != e3.value.id && t3.addCurrentNodeType(e3, t3), console.log("adding the type node to the tree last", t3), t3;
          t3.rightNode = this.addTypeNode(e3, i2, n3);
        }
        t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
        let r2 = this.getBalanceFactor(t3);
        if (r2 > 1 && t3.leftNode) {
          if (e3.key < t3.leftNode.key) {
            return this.rightRotate(t3);
          }
          if (e3.key > t3.leftNode.key) {
            return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
          }
        }
        if (r2 < -1 && t3.rightNode) {
          if (e3.key > t3.rightNode.key) {
            return this.leftRotate(t3);
          }
          if (e3.key < t3.rightNode.key) {
            return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
          }
        }
      }
      return t3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    getCharacterFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getCharacterFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getCharacterFromNode(e3, t3.rightNode) : t3 : t3;
    }
    getCharacterFromNodeUpdated(e3, t3) {
      var n3;
      return t3 ? e3 == t3.key || 51 == (null === (n3 = t3.value) || void 0 === n3 ? void 0 : n3.typeId) ? t3 : e3 < t3.key ? this.getCharacterFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getCharacterFromNode(e3, t3.rightNode) : t3 : t3;
    }
    getFromNodeWithCharacterAndType(e3, t3, n3) {
      if (e3 = `${e3}`, n3) {
        if (e3 == n3.key) {
          if (e3 == n3.value.characterValue && t3 == n3.value.typeId) return n3;
          for (let e4 = 0; e4 < n3.variants.length; e4++) if (n3.variants[e4].value.typeId == t3) return n3.variants[e4];
        } else {
          if (e3 < n3.key) return this.getFromNodeWithCharacterAndType(e3, t3, n3.leftNode);
          if (e3 > n3.key) return this.getFromNodeWithCharacterAndType(e3, t3, n3.rightNode);
        }
        return null;
      }
      return n3;
    }
    getFromNodeWithCharacterAndCategory(e3, t3, n3) {
      if (e3 = `${e3}`, n3) {
        if (e3 == n3.key) {
          if (e3 == n3.value.characterValue && t3 == n3.value.categoryId) return n3;
          for (let e4 = 0; e4 < n3.variants.length; e4++) if (n3.variants[e4].value.categoryId == t3) return n3.variants[e4];
        } else {
          if (e3 < n3.key) return this.getFromNodeWithCharacterAndCategory(e3, t3, n3.leftNode);
          if (e3 > n3.key) return this.getFromNodeWithCharacterAndCategory(e3, t3, n3.rightNode);
        }
        return null;
      }
      return n3;
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.variants = t4.variants, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNode(e3.rightNode, t4.key), e3;
      }
    }
    removeNodeWithVariants(e3, t3, n3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNodeWithVariants(e3.leftNode, t3, n3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t3, n3), e3;
      if (e3.variants.length > 0) {
        if (e3.value.id == n3) {
          let t4 = e3.variants[0];
          if (t4) return e3.value = t4.value, e3.key = t4.key, e3.currentNode = t4.currentNode, e3.variants.splice(0, 1), e3;
        } else for (let t4 = 0; t4 < e3.variants.length; t4++) if (n3 == e3.variants[t4].value.id) return e3.variants.splice(t4, 1), e3;
      }
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        let t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.variants = t4.variants, e3.currentNode = t4.currentNode, e3.rightNode = this.removeNodeWithVariants(e3.rightNode, t4.key, n3), e3;
      }
    }
    countNodeBelow(e3) {
      return null == e3 ? 0 : 1 + this.countNodeBelow(e3.leftNode) + this.countNodeBelow(e3.rightNode);
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
}, 5976: (e2, t2, n2) => {
  n2.d(t2, { p: () => l2, B: () => s2 });
  var o2 = n2(9581), i2 = n2(3518), r2 = n2(1863), c2 = n2(2830), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 {
    static getId() {
      return a2(this, void 0, void 0, (function* () {
        this.ids.length < 5 && (yield (function() {
          var e4, t3, n3, a3, l3 = arguments;
          return e4 = this, t3 = void 0, a3 = function* () {
            const e5 = c2.Logger.logfunction("GetReservedIds", l3);
            try {
              let t4 = (0, i2.Xr)("application/x-www-form-urlencoded");
              const n4 = yield fetch(o2.B.GetReservedIdUrl(), { method: "GET", headers: t4 });
              if (!n4.ok) throw (0, r2.ry)(n4), new Error(`Error! status: ${n4.status}`);
              const a4 = yield n4.json();
              for (let e6 = 0; e6 < a4.length; e6++) s2.AddId(a4[e6]);
              c2.Logger.logUpdate(e5);
            } catch (t4) {
              t4 instanceof Error ? console.log("get reserved ids error message: ", t4.message) : console.log("get reserved ids  unexpected error: ", t4), (0, r2.Mb)(t4, o2.B.GetReservedIdUrl()), (0, r2.ey)(e5, "GetReservedIds", t4);
            }
          }, new ((n3 = void 0) || (n3 = Promise))((function(o3, i3) {
            function r3(e5) {
              try {
                s3(a3.next(e5));
              } catch (e6) {
                i3(e6);
              }
            }
            function c3(e5) {
              try {
                s3(a3.throw(e5));
              } catch (e6) {
                i3(e6);
              }
            }
            function s3(e5) {
              var t4;
              e5.done ? o3(e5.value) : (t4 = e5.value, t4 instanceof n3 ? t4 : new n3((function(e6) {
                e6(t4);
              }))).then(r3, c3);
            }
            s3((a3 = a3.apply(e4, t3 || [])).next());
          }));
        })());
        var e3 = this.ids[0];
        return this.ids.shift(), e3;
      }));
    }
    static AddId(e3) {
      this.ids.includes(e3) || this.ids.push(e3);
    }
  }
  s2.ids = [];
  class l2 {
    static getId() {
      return a2(this, void 0, void 0, (function* () {
        this.connectionIds.length < 5 && (yield (function() {
          var e4, t3, n3, a3, s3 = arguments;
          return e4 = this, t3 = void 0, a3 = function* () {
            const e5 = c2.Logger.logfunction("GetReservedConnectionIds", s3);
            try {
              let t4 = (0, i2.Xr)("application/x-www-form-urlencoded");
              const n4 = yield fetch(o2.B.GetReservedConnectionIdUrl(), { method: "GET", headers: t4 });
              if (!n4.ok) throw (0, r2.ry)(n4), new Error(`Error! status: ${n4.status}`);
              const a4 = yield n4.json();
              for (let e6 = 0; e6 < a4.length; e6++) l2.AddId(a4[e6]);
              c2.Logger.logUpdate(e5);
            } catch (t4) {
              t4 instanceof Error ? console.log("get reserved connection ids error message: ", t4.message) : console.log("get reserved connection ids  unexpected error: ", t4), (0, r2.Mb)(t4, o2.B.GetReservedConnectionIdUrl()), (0, r2.ey)(e5, "GetReservedConnectionIds", t4);
            }
          }, new ((n3 = void 0) || (n3 = Promise))((function(o3, i3) {
            function r3(e5) {
              try {
                s4(a3.next(e5));
              } catch (e6) {
                i3(e6);
              }
            }
            function c3(e5) {
              try {
                s4(a3.throw(e5));
              } catch (e6) {
                i3(e6);
              }
            }
            function s4(e5) {
              var t4;
              e5.done ? o3(e5.value) : (t4 = e5.value, t4 instanceof n3 ? t4 : new n3((function(e6) {
                e6(t4);
              }))).then(r3, c3);
            }
            s4((a3 = a3.apply(e4, t3 || [])).next());
          }));
        })());
        var e3 = this.connectionIds[0];
        return this.connectionIds.shift(), e3;
      }));
    }
    static AddId(e3) {
      this.connectionIds.includes(e3) || this.connectionIds.push(e3);
    }
  }
  l2.connectionIds = [];
}, 7273: (e2, t2, n2) => {
  n2.d(t2, { z: () => i2 });
  var o2 = n2(9581);
  class i2 {
    constructor(e3, t3, n3, i3) {
      this.url = o2.B.BASE_URL, this.message = e3, this.ok = t3, this.status = n3, this.data = i3;
    }
    getMessage() {
      return this.message;
    }
    setMessage(e3) {
      return this.message = e3, this;
    }
    getStatus() {
      return this.status;
    }
    setStatus(e3) {
      return this.status = e3, this;
    }
    getData() {
      return this.data;
    }
    setData(e3) {
      return this.data = e3, this;
    }
    getOk() {
      return this.ok;
    }
    setOk(e3) {
      return this.ok = e3, this;
    }
    getUrl() {
      return this.url;
    }
    setUrl(e3) {
      return this.url = e3, this;
    }
  }
}, 3278: (e2, t2, n2) => {
  n2.d(t2, { b: () => o2 });
  class o2 {
  }
  o2.BearerAccessToken = "", o2.sessionId = 998;
}, 2299: (e2, t2, n2) => {
  n2.d(t2, { B: () => o2 });
  class o2 {
    constructor(e3) {
      this.id = 1, this.isOnlineSync = false, this.isOnlineSync = e3;
    }
  }
}, 442: (e2, t2, n2) => {
  n2.d(t2, { Y: () => h2 });
  var o2 = n2(1167), i2 = n2(2155), r2 = n2(9581), c2 = n2(3518), a2 = n2(1863), s2 = n2(9639), l2 = n2(8286), d2 = n2(2830);
  class h2 {
    static CheckContains(e3) {
      for (var t3 = false, n3 = 0; n3 < this.conceptsSyncArray.length; n3++) this.conceptsSyncArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static SyncDataDelete(e3) {
      for (var t3 = 0; t3 < this.conceptsSyncArray.length; t3++) e3 == this.conceptsSyncArray[t3].id && this.conceptsSyncArray.splice(t3, 1);
      for (t3 = 0; t3 < this.connectionSyncArray.length; t3++) this.connectionSyncArray[t3].ofTheConceptId != e3 && this.connectionSyncArray[t3].toTheConceptId != e3 && this.connectionSyncArray[t3].typeId != e3 || this.connectionSyncArray.splice(t3, 1);
    }
    static CheckContainsConnection(e3) {
      for (var t3 = false, n3 = 0; n3 < this.connectionSyncArray.length; n3++) this.connectionSyncArray[n3].id == e3.id && (t3 = true);
      return t3;
    }
    static AddConcept(e3) {
      this.conceptsSyncArray.push(e3);
    }
    static RemoveConcept(e3) {
      for (var t3 = 0; t3 < this.conceptsSyncArray.length; t3++) this.conceptsSyncArray[t3].id == e3.id && this.conceptsSyncArray.splice(t3, 1);
    }
    static AddConnection(e3) {
      this.connectionSyncArray.push(e3);
    }
    static RemoveConnection(e3) {
      for (var t3 = 0; t3 < this.connectionSyncArray.length; t3++) this.connectionSyncArray[t3].id == e3.id && this.connectionSyncArray.splice(t3, 1);
    }
    static SyncDataOnline() {
      return e3 = this, t3 = void 0, h3 = function* () {
        if (d2.serviceWorker) try {
          return (yield (0, d2.sendMessage)("SyncData__SyncDataOnline", {})).data;
        } catch (e4) {
          console.error("SyncData__SyncDataOnline sw error: ", e4), (0, d2.handleServiceWorkerException)(e4);
        }
        for (let e4 = 0; e4 < this.conceptsSyncArray.length; e4++) s2.I.AddConcept(this.conceptsSyncArray[e4]);
        for (let e4 = 0; e4 < this.connectionSyncArray.length; e4++) l2.d.AddConnection(this.connectionSyncArray[e4]);
        if (this.conceptsSyncArray.length > 0) {
          let e4 = this.conceptsSyncArray.slice();
          this.conceptsSyncArray = [], (0, o2.Y)(e4);
        }
        if (this.connectionSyncArray.length > 0) {
          let e4 = this.connectionSyncArray.slice();
          this.connectionSyncArray = [], yield (function(e5) {
            return t4 = this, n4 = void 0, s3 = function* () {
              let t5 = new i2.N(0, 0, 0, 0, 0, 0, 0);
              try {
                var n5 = (0, c2.Xr)(), o4 = JSON.stringify(e5);
                const i3 = yield fetch(r2.B.CreateTheConnectionUrl(), { method: "POST", headers: n5, body: o4 });
                return i3.ok ? yield i3.json() : (console.log("Create the connection error message: ", i3.status), (0, a2.ry)(i3)), t5;
              } catch (e6) {
                throw e6 instanceof Error ? console.log("Create the connection error message: ", e6.message) : console.log(" Create the connection unexpected error: ", e6), e6;
              }
            }, new ((o3 = void 0) || (o3 = Promise))((function(e6, i3) {
              function r3(e7) {
                try {
                  a3(s3.next(e7));
                } catch (e8) {
                  i3(e8);
                }
              }
              function c3(e7) {
                try {
                  a3(s3.throw(e7));
                } catch (e8) {
                  i3(e8);
                }
              }
              function a3(t5) {
                var n5;
                t5.done ? e6(t5.value) : (n5 = t5.value, n5 instanceof o3 ? n5 : new o3((function(e7) {
                  e7(n5);
                }))).then(r3, c3);
              }
              a3((s3 = s3.apply(t4, n4 || [])).next());
            }));
            var t4, n4, o3, s3;
          })(e4);
        }
        return "done";
      }, new ((n3 = void 0) || (n3 = Promise))((function(o3, i3) {
        function r3(e4) {
          try {
            a3(h3.next(e4));
          } catch (e5) {
            i3(e5);
          }
        }
        function c3(e4) {
          try {
            a3(h3.throw(e4));
          } catch (e5) {
            i3(e5);
          }
        }
        function a3(e4) {
          var t4;
          e4.done ? o3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
            e5(t4);
          }))).then(r3, c3);
        }
        a3((h3 = h3.apply(e3, t3 || [])).next());
      }));
      var e3, t3, n3, h3;
    }
  }
  h2.conceptsSyncArray = [], h2.connectionSyncArray = [];
}, 9003: (e2, t2, n2) => {
  n2.d(t2, { S5: () => l2, kH: () => h2, qI: () => s2 });
  var o2 = n2(1863), i2 = n2(2830), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  let c2 = 10;
  class a2 {
  }
  function s2(e3) {
    const t3 = i2.Logger.logfunction("openDatabase", arguments);
    return new Promise((function(n3, r3) {
      a2.db && (i2.Logger.logUpdate(t3), n3(a2.db));
      let l3 = i2.BaseUrl.BASE_URL + "_FreeSchemaLocal" + i2.BaseUrl.BASE_APPLICATION;
      const h3 = indexedDB.open(l3, c2);
      h3.onupgradeneeded = (e4) => {
        var t4 = e4.target.result, o3 = "localconcept", r4 = "localconnection", a3 = "localid";
        console.log("this is the version upgrade", c2), t4.objectStoreNames.contains(o3) && t4.deleteObjectStore(o3), t4.objectStoreNames.contains(r4) && t4.deleteObjectStore(r4), t4.objectStoreNames.contains(a3) && t4.deleteObjectStore(a3), t4.objectStoreNames.contains(o3) || (t4.createObjectStore(o3, { keyPath: "id" }).transaction.oncomplete = (e5) => {
        }), t4.objectStoreNames.contains(r4) || (t4.createObjectStore(r4, { keyPath: "id" }).transaction.oncomplete = (e5) => {
        }), t4.objectStoreNames.contains(a3) || (t4.createObjectStore(a3, { keyPath: "id" }).transaction.oncomplete = (e5) => {
          d2(a3, { id: 0, value: -100 }), d2(a3, { id: 1, value: -200 }), d2(a3, { id: 3, value: i2.BaseUrl.getRandomizer() });
        }), n3(t4);
      }, h3.onerror = (n4) => {
        console.error("Why didn't you allow my web app to use IndexedDB?!", n4), indexedDB.deleteDatabase(l3), s2(e3), (0, o2.ey)(t3, "openDatabase", n4), r3(n4);
      }, h3.onsuccess = function(e4) {
        var o3 = e4.target;
        a2.db = o3.result, i2.Logger.logUpdate(t3), n3(a2.db);
      };
    }));
  }
  function l2(e3) {
    var t3 = arguments;
    return r2(this, void 0, void 0, (function* () {
      const n3 = i2.Logger.logfunction("getObjectsFromLocalIndexDb", t3);
      return new Promise((function(t4, r3) {
        s2(e3).then(((o3) => {
          var r4 = [], c3 = o3.transaction(e3, "readwrite").objectStore(e3).getAll();
          c3.onsuccess = () => {
            const e4 = c3.result;
            for (var o4 = 0; o4 < e4.length; o4++) r4.push(e4[o4]);
            i2.Logger.logUpdate(n3), t4(r4);
          };
        })).catch(((e4) => {
          let t5 = { status: 400, ok: false, message: "Cannot get objects from database because you cannot open the Local database", data: e4 };
          (0, o2.ey)(n3, "getObjectsFromLocalIndexDb", t5), r3(t5);
        }));
      }));
    }));
  }
  function d2(e3, t3) {
    const n3 = i2.Logger.logfunction("storeToDatabase", [e3, "localindexdb"]);
    return new Promise((function(r3, c3) {
      s2(e3).then(((a3) => {
        const s3 = a3.transaction(e3, "readwrite").objectStore(e3).add(t3);
        s3.onsuccess = (e4) => {
          i2.Logger.logUpdate(n3), r3(t3);
        }, s3.onerror = (i3) => {
          let r4 = { status: 400, ok: false, message: "Cannot store to the Local database " + e3, data: i3, body: t3 };
          (0, o2.ey)(n3, "storeToDatabase", r4), c3(r4);
        };
      })).catch(((e4) => {
        let t4 = { status: 400, ok: false, message: "Cannot store to database because you cannot open the Local database", data: e4 };
        (0, o2.ey)(n3, "storeToDatabase", t4), c3(t4);
      }));
    }));
  }
  function h2(e3, t3) {
    const n3 = i2.Logger.logfunction("UpdateToDatabase", arguments);
    return new Promise((function(r3, c3) {
      s2(e3).then(((a3) => {
        const s3 = a3.transaction(e3, "readwrite").objectStore(e3).put(t3);
        s3.onsuccess = (e4) => {
          i2.Logger.logUpdate(n3), r3(t3);
        }, s3.onerror = (i3) => {
          let r4 = { status: 400, ok: false, message: "Cannot Update to the Local database" + e3, data: i3, body: t3 };
          (0, o2.ey)(n3, "UpdateToDatabase", r4), c3(r4);
        };
      })).catch(((e4) => {
        let t4 = { status: 400, ok: false, message: "Cannot update to database because you cannot open the Local database", data: e4 };
        (0, o2.ey)(n3, "UpdateToDatabase", t4), c3(t4);
      }));
    }));
  }
}, 3655: (e2, t2, n2) => {
  n2.d(t2, { El: () => u2, b8: () => h2, kH: () => d2, qI: () => l2, wh: () => p2 });
  var o2 = n2(2299), i2 = n2(9581), r2 = n2(2830), c2 = n2(1863);
  let a2 = 10;
  class s2 {
  }
  function l2(e3) {
    const t3 = r2.Logger.logfunction("openDatabase", [e3, "indexdb"]);
    return new Promise((function(n3, o3) {
      s2.db && (r2.Logger.logUpdate(t3), n3(s2.db));
      let d3 = i2.B.BASE_URL + "_FreeSchema" + i2.B.BASE_APPLICATION;
      const h3 = indexedDB.open(d3, a2);
      console.log("this is the update version", a2, h3), h3.onupgradeneeded = (e4) => {
        let o4 = e4.target.result, i3 = "concept", c3 = "connection", s3 = "settings";
        console.log("this is the version update for index", a2), o4.objectStoreNames.contains(i3) && o4.deleteObjectStore(i3), o4.objectStoreNames.contains(c3) && o4.deleteObjectStore(c3), o4.objectStoreNames.contains(s3) && o4.deleteObjectStore(s3), o4.objectStoreNames.contains(i3) || (o4.createObjectStore(i3, { keyPath: "id" }).transaction.oncomplete = (e5) => {
        }), o4.objectStoreNames.contains(c3) || (o4.createObjectStore(c3, { keyPath: "id" }).transaction.oncomplete = (e5) => {
        }), o4.objectStoreNames.contains(s3) || (o4.createObjectStore(s3, { keyPath: "id" }).transaction.oncomplete = (e5) => {
        }), r2.Logger.logUpdate(t3), n3(o4);
      }, h3.onerror = (n4) => {
        console.error("Why didn't you allow my web app to use IndexedDB?!", n4), indexedDB.deleteDatabase(d3), l2(e3), (0, c2.ey)(t3, "openDatabase", n4), o3(n4);
      }, h3.onsuccess = function(e4) {
        let o4 = e4.target;
        s2.db = o4.result, r2.Logger.logUpdate(t3), n3(s2.db);
      };
    }));
  }
  function d2(e3, t3) {
    const n3 = r2.Logger.logfunction("UpdateToDatabase", [e3, "indexdb"]);
    return new Promise((function(o3, i3) {
      l2(e3).then(((a3) => {
        const s3 = a3.transaction(e3, "readwrite").objectStore(e3).put(t3);
        s3.onsuccess = (e4) => {
          r2.Logger.logUpdate(n3), o3(t3);
        }, s3.onerror = (o4) => {
          let r3 = { status: 400, ok: false, message: "Cannot Update to the database" + e3, data: o4, body: t3 };
          (0, c2.ey)(n3, "UpdateToDatabase", r3), i3(r3);
        };
      })).catch(((e4) => {
        let t4 = { status: 400, ok: false, message: "Cannot update to database because you cannot open the database", data: e4 };
        (0, c2.ey)(n3, "UpdateToDatabase", t4), i3(t4);
      }));
    }));
  }
  function h2() {
    const e3 = r2.Logger.logfunction("GetLastSettingsFromDatabase", ["indexdb"]);
    return new Promise((function(t3, n3) {
      let i3 = "settings";
      l2(i3).then(((a3) => {
        let s3 = a3.transaction(i3, "readwrite").objectStore(i3).getAll();
        s3.onsuccess = () => {
          let n4 = new o2.B(false), i4 = s3.result;
          for (let e4 = 0; e4 < i4.length; e4++) n4 = i4[e4];
          r2.Logger.logUpdate(e3), t3(n4);
        }, s3.onerror = (t4) => {
          (0, c2.ey)(e3, "GetLastSettingsFromDatabase", t4), n3(t4);
        };
      })).catch(((t4) => {
        let o3 = { status: 400, ok: false, message: "Cannot get last object from database because you cannot open the database", data: t4 };
        (0, c2.ey)(e3, "GetLastSettingsFromDatabase", o3), n3(o3);
      }));
    }));
  }
  function u2(e3) {
    const t3 = r2.Logger.logfunction("AiUpdateFlag", ["indexdb"]);
    return new Promise((function(n3, o3) {
      let i3 = "settings";
      l2(i3).then(((a3) => {
        const s3 = a3.transaction(i3, "readwrite").objectStore(i3).put(e3);
        s3.onsuccess = (o4) => {
          r2.Logger.logUpdate(t3), n3(e3);
        }, s3.onerror = (n4) => {
          let i4 = { status: 400, ok: false, message: "Cannot update AI flag", data: n4, body: e3 };
          (0, c2.ey)(t3, "AiUpdateFlag", i4), o3(i4);
        };
      })).catch(((e4) => {
        let n4 = { status: 400, ok: false, message: "Cannot update AI flag because you cannot open the database", data: e4 };
        (0, c2.ey)(t3, "AiUpdateFlag", n4), o3(n4);
      }));
    }));
  }
  function p2(e3, t3) {
    const n3 = r2.Logger.logfunction("removeFromDatabase", [e3, "indexdb"]);
    return new Promise((function(o3, i3) {
      l2(e3).then(((a3) => {
        const s3 = a3.transaction(e3, "readwrite").objectStore(e3).delete(Number(t3));
        s3.onsuccess = function(e4) {
          r2.Logger.logUpdate(n3), o3(t3);
        }, s3.onerror = (t4) => {
          let o4 = { status: 400, ok: false, message: "Cannot remove from the database" + e3, data: t4 };
          (0, c2.ey)(n3, "removeFromDatabase", o4), i3(o4);
        };
      })).catch(((e4) => {
        let o4 = { status: 400, ok: false, message: "Cannot remove from the database because you cannot open the database", data: e4, body: t3 };
        (0, c2.ey)(n3, "removeFromDatabase", o4), i3(o4);
      }));
    }));
  }
}, 4485: (e2, t2, n2) => {
  function o2(e3 = [], t3) {
    var n3, o3;
    let i3 = [], r3 = null === (n3 = t3.type) || void 0 === n3 ? void 0 : n3.characterValue;
    if ((null == r3 ? void 0 : r3.startsWith("the_")) || (r3 = "the_" + r3), Array.isArray(e3)) for (let n4 = 0; n4 < e3.length; n4++) {
      let c3 = null === (o3 = e3[n4].type) || void 0 === o3 ? void 0 : o3.characterValue;
      (null == c3 ? void 0 : c3.startsWith("the_")) || (c3 = "the_" + c3), t3.typeId != e3[n4].typeId && r3 != c3 || i3.push(e3[n4]);
    }
    return i3;
  }
  function i2(e3 = [], t3) {
    let n3 = [], o3 = t3.typeCharacter;
    if ((null == o3 ? void 0 : o3.startsWith("the_")) || (o3 = "the_" + o3), Array.isArray(e3)) for (let i3 = 0; i3 < e3.length; i3++) {
      let r3 = e3[i3].typeCharacter;
      (null == r3 ? void 0 : r3.startsWith("the_")) || (r3 = "the_" + r3), t3.typeId != e3[i3].typeId && o3 != r3 || n3.push(e3[i3]);
    }
    return n3;
  }
  function r2(e3 = [], t3) {
    let n3 = [];
    if (Array.isArray(e3)) {
      const o3 = e3.find(((e4) => e4.toTheConceptId == t3));
      o3 && n3.push(o3);
      const i3 = e3.find(((e4) => e4.ofTheConceptId == t3));
      i3 && n3.push(i3);
    }
    return n3;
  }
  function c2(e3 = [], t3) {
    let n3 = [];
    if (Array.isArray(e3)) {
      const o3 = e3.find(((e4) => e4.toTheConceptId == t3));
      o3 && n3.push(o3);
      const i3 = e3.find(((e4) => e4.ofTheConceptId == t3));
      i3 && n3.push(i3);
    }
    return n3;
  }
  n2.d(t2, { gt: () => c2, nm: () => i2, vo: () => o2, wS: () => r2 }), n2(2155), n2(7282);
}, 9934: (e2, t2, n2) => {
  function o2(e3, t3) {
    return -1 === e3.indexOf(t3) && e3.push(t3), e3;
  }
  n2.d(t2, { A: () => o2 });
}, 9700: (e2, t2, n2) => {
  n2.d(t2, { R: () => d2, V: () => l2 });
  var o2, i2 = n2(2830), r2 = n2(3278), c2 = n2(1863), a2 = n2(3518), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class l2 {
    static startAutoSync() {
      this.autoSyncInterval ? console.warn("Auto-sync is already running.") : (this.nextSyncTime = Date.now() + this.SYNC_INTERVAL_MS, setInterval((() => {
        const e3 = Date.now();
        this.nextSyncTime && e3 >= this.nextSyncTime && (this.nextSyncTime = e3 + this.SYNC_INTERVAL_MS, this.sendPackageLogsToServer(), this.sendApplicationLogsToServer());
      }), 3e4));
    }
    static stopAutoSync() {
      null !== this.autoSyncInterval && (clearInterval(this.autoSyncInterval), this.autoSyncInterval = null, this.nextSyncTime = null);
    }
    static setLogLevel(e3) {
      this.logLevel = e3;
    }
    static shouldLog(e3) {
      return this.LOG_LEVELS.indexOf(e3) >= this.LOG_LEVELS.indexOf(this.logLevel);
    }
    static formatLogData(e3, t3, n3) {
      if (!this.shouldLog(e3)) return;
      const o3 = Object.assign({ timestamp: (/* @__PURE__ */ new Date()).toLocaleString(), level: e3, message: t3 }, n3);
      return this.packageLogsData.push(o3), "ERROR" == e3 && (this.sendPackageLogsToServer(), this.sendApplicationLogsToServer()), o3;
    }
    static log(e3, t3, n3) {
      if (this.logPackageActivationStatus) try {
        this.formatLogData(e3, t3, n3 || null);
      } catch (e4) {
        console.error("Error on Logger Log : ", e4);
      }
    }
    static logUpdate(e3) {
      var t3;
      try {
        if (!this.logPackageActivationStatus) return;
        if (!e3) return void console.error("logUpdate failed: logData is undefined");
        const n3 = Date.now();
        e3.startTime = null !== (t3 = e3.startTime) && void 0 !== t3 ? t3 : n3;
        const o3 = n3 - e3.startTime;
        e3.responseTime = `${o3} ms`, 1 == !e3.serviceWorker && (e3.serviceWorker = false);
      } catch (t4) {
        (0, c2.ey)(e3, "Logger.logUpdate", t4);
      }
    }
    static logfunction(e3, ...t3) {
      const n3 = Date.now();
      if (this.logPackageActivationStatus) {
        let o3 = t3;
        const c3 = i2.BaseUrl.getRandomizer(), a3 = r2.b.sessionId;
        let s3 = { startTime: n3, functionName: e3, functionParameters: o3, requestFrom: i2.BaseUrl.BASE_APPLICATION, sessionId: a3, applicationId: c3 };
        return this.formatLogData("INFO", "function called", s3);
      }
    }
    static logError(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3, h2) {
      try {
        const u2 = d2("SessionId"), p2 = { startTime: e3, userId: t3, operationType: n3, requestFrom: o3, requestIP: i3, responseStatus: r3, responseTime: `${(performance.now() - e3).toFixed(3)}ms`, responseSize: c3 ? `${JSON.stringify(c3).length}` : "0", sessionId: null == u2 ? void 0 : u2.toString(), functionName: a3, functionParameters: s3, userAgent: l3, conceptsUsed: h2 };
        this.formatLogData("ERROR", `Information logged for ${a3}`, p2);
      } catch (e4) {
        console.error("Error on logError");
      }
    }
    static logApplication(e3, t3, n3) {
      if (this.logApplicationActivationStatus) try {
        const o3 = { timestamp: (/* @__PURE__ */ new Date()).toLocaleString(), type: e3, message: t3, data: n3 || null };
        this.applicationLogsData.push(o3);
      } catch (e4) {
        console.error("Failed to log application activity:", e4);
      }
    }
    static sendApplicationLogsToServer() {
      return s2(this, void 0, void 0, (function* () {
        const e3 = this.applicationLogsData;
        try {
          if (0 === e3.length) return;
          this.applicationLogsData = [], r2.b.BearerAccessToken;
          const t3 = 50;
          let n3 = (0, a2.Xr)(), o3 = 0;
          for (; 0 != e3.length; ) {
            console.log(`${o3}`, " = Current length of the storedLogs  : ", e3.length);
            const r3 = e3.slice(0, t3), c3 = yield fetch(i2.BaseUrl.PostLogger(), { method: "POST", headers: n3, body: JSON.stringify({ logType: this.appLogs, logData: r3 }) });
            c3.ok || (yield c3.text()), e3.splice(0, t3), o3 += t3, o3++;
          }
        } catch (e4) {
        }
      }));
    }
    static sendPackageLogsToServer() {
      return s2(this, void 0, void 0, (function* () {
        const e3 = this.packageLogsData;
        try {
          if (0 === e3.length) return;
          this.packageLogsData = [];
          const t3 = 300;
          let n3 = 0;
          for (; 0 != e3.length; ) {
            console.log(`${n3}`, " = Current length of the storedLogs  : ", e3.length);
            const o3 = e3.slice(0, t3);
            let r3 = (0, a2.Xr)();
            const c3 = yield fetch(i2.BaseUrl.PostLogger(), { method: "POST", headers: r3, body: JSON.stringify({ logType: this.mftsccsBrowser, logData: o3 }) });
            if (!c3.ok) return void (yield c3.text());
            e3.splice(0, t3), n3++;
          }
        } catch (e4) {
        }
      }));
    }
    static saveLogToLocalStorage(e3, t3) {
      try {
        if (void 0 === typeof localStorage) return void console.warn("Local Storage type undefined");
        {
          const n3 = JSON.parse((null === localStorage || void 0 === localStorage ? void 0 : localStorage.getItem(e3)) || "[]");
          n3.push(t3), null === localStorage || void 0 === localStorage || localStorage.setItem(e3, JSON.stringify(n3));
        }
      } catch (e4) {
        console.error("Error on saving log in localstorage"), this.log("ERROR", "Error while saving log in local storage");
      }
    }
    static clearLogsFromLocalStorage(e3) {
      void 0 !== typeof localStorage ? null === localStorage || void 0 === localStorage || localStorage.removeItem(e3) : console.warn("localStorage is not available");
    }
  }
  function d2(e3) {
    try {
      let t3 = e3 + "=", n3 = decodeURIComponent(document.cookie).split(";");
      for (let e4 = 0; e4 < n3.length; e4++) {
        let o3 = n3[e4];
        for (; " " == o3.charAt(0); ) o3 = o3.substring(1);
        if (0 == o3.indexOf(t3)) return o3.substring(t3.length, o3.length);
      }
      return "";
    } catch (e4) {
      return console.error("Error on getcookie"), "";
    }
  }
  o2 = l2, l2.logLevel = "INFO", l2.packageLogsData = [], l2.applicationLogsData = [], l2.LOG_LEVELS = ["DEBUG", "INFO", "WARNING", "ERROR"], l2.SYNC_INTERVAL_MS = 6e4, l2.nextSyncTime = null, l2.appLogs = "app", l2.mftsccsBrowser = "mftsccs", l2.logApplicationActivationStatus = false, l2.logPackageActivationStatus = false, l2.autoSyncInterval = null, o2.startAutoSync();
}, 1412: (e2, t2, n2) => {
  function o2(e3 = [], t3 = []) {
  }
  n2.d(t2, { e: () => o2 });
}, 5898: (e2, t2, n2) => {
  n2.d(t2, { w: () => a2, V: () => s2 });
  var o2 = n2(7139), i2 = n2(2830);
  class r2 {
    constructor() {
      this.conceptId = 0, this.connectionTypeId = 0, this.connectionType = "", this.count = 0;
    }
  }
  var c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2(e3 = []) {
    let t3 = [];
    if (e3.length > 0) for (let n3 = 0; n3 < e3.length; n3++) {
      let o3 = l2(e3[n3]);
      t3.push(o3);
    }
    return t3;
  }
  function s2(e3) {
    var t3 = arguments;
    return c2(this, void 0, void 0, (function* () {
      const n3 = i2.Logger.logfunction("GetConnectionTypeForCount", t3);
      let r3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let n4 = yield (0, o2.r)(e3[t4].connectionTypeId);
        e3[t4].connectionType = n4.characterValue, r3[e3[t4].conceptId] = e3[t4];
      }
      return i2.Logger.logUpdate(n3), r3;
    }));
  }
  function l2(e3) {
    const t3 = e3.split("_");
    if (3 === t3.length) {
      let e4 = new r2();
      return e4.conceptId = Number(t3[0]), e4.connectionTypeId = Number(t3[1]), e4.count = Number(t3[2]), e4;
    }
    throw new Error("Input string must contain exactly three parts separated by underscores.");
  }
}, 1863: (e2, t2, n2) => {
  n2.d(t2, { ER: () => c2, Mb: () => a2, ey: () => s2, ry: () => r2 });
  var o2 = n2(2830), i2 = n2(7273);
  function r2(e3) {
    if (o2.Logger.log("ERROR", e3.statusText, { code: e3.status, data: e3.statusText }), 401 == e3.status || 406 == e3.status) {
      let t3 = new i2.z(e3.statusText, false, e3.status, "");
      throw t3.setUrl(e3.url), t3;
    }
    if (500 == e3.status) {
      let t3 = new i2.z(e3.statusText, false, e3.status, "");
      throw t3.setUrl(e3.url), t3;
    }
  }
  function c2(e3, t3 = {}) {
    if (o2.Logger.log("ERROR", t3.statusText, { code: e3.status, data: e3.status }), 401 == e3.status || 406 == e3.status) {
      let n3 = new i2.z(t3.statusText, false, e3.status, "");
      throw n3.setUrl(e3.url), n3;
    }
    if (500 == e3.status) {
      let n3 = new i2.z(t3.statusText, false, e3.status, "");
      throw n3.setUrl(e3.url), n3;
    }
  }
  function a2(e3, t3 = "") {
    if (o2.Logger.log("ERROR", e3.message, { code: e3.status, data: e3.stack }), e3.status) {
      let n3 = new i2.z(e3.message, false, e3.status, e3.stack);
      throw n3.setUrl(t3), n3;
    }
    {
      let n3 = new i2.z(e3.message, false, 500, e3.stack);
      throw n3.setUrl(t3), n3;
    }
  }
  function s2(e3, t3, n3) {
    var o3;
    try {
      if (!e3) return void console.error(`Error in ${t3}: logData is undefined`);
      const i3 = Date.now();
      e3.startTime = null !== (o3 = e3.startTime) && void 0 !== o3 ? o3 : i3, e3.responseTime = i3 - e3.startTime + " ms", e3.level = "ERROR", e3.errorMessage = (null == n3 ? void 0 : n3.message) || "Unknown error occurred", console.error(`Error in function ${t3}:`, n3);
    } catch (e4) {
      console.error("Failed to handle package function error:", e4);
    }
  }
}, 176: (e2, t2, n2) => {
  n2.d(t2, { F4: () => c2, P6: () => s2, dp: () => a2 });
  var o2 = n2(2155), i2 = n2(7282), r2 = n2(6416);
  function c2(e3) {
    var t3, n3;
    const o3 = (0, r2.u)();
    return o3.id = e3.id, o3.ghostId = e3.ghostId, o3.userId = e3.userId, o3.accessId = e3.accessId, o3.categoryId = e3.categoryId, o3.characterValue = e3.characterValue, o3.entryTimeStamp = e3.entryTimeStamp, o3.typeId = e3.typeId, o3.type = e3.type, o3.isTemp = false, o3.typeCharacter = null !== (n3 = null === (t3 = null == e3 ? void 0 : e3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : "", o3;
  }
  function a2(e3) {
    const t3 = (0, i2.o)();
    return t3.id = e3.id, t3.ghostId = e3.ghostId, t3.userId = e3.userId, t3.accessId = e3.accessId, t3.entryTimeStamp = e3.entryTimeStamp, t3.typeId = e3.typeId, t3.categoryId = e3.categoryId, t3;
  }
  function s2(e3) {
    const t3 = new o2.N(0, 0, 0, 0, 0, 0, 0);
    return t3.id = e3.id, t3.ghostId = e3.ghostId, t3.accessId = e3.accessId, t3.ofTheConceptId = e3.ofTheConceptId, t3.toTheConceptId = e3.toTheConceptId, t3.entryTimeStamp = e3.entryTimeStamp, t3.typeId = e3.typeId, t3.isTemp = false, t3;
  }
}, 5020: (e2, t2, n2) => {
  n2.d(t2, { A: () => a2 });
  var o2 = n2(2830), i2 = n2(9639), r2 = n2(205), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2() {
    return c2(this, void 0, void 0, (function* () {
      try {
        let e3 = [];
        if (Array.isArray(e3)) for (let t3 = 0; t3 < e3.length; t3++) {
          let n3 = e3[t3];
          i2.I.AddConceptToMemory(n3);
        }
        r2.B.isDataLoaded = true, r2.B.isCharacterLoaded = true, r2.B.isTypeLoaded = true;
      } catch (e3) {
        throw yield (0, o2.DelayFunctionExecution)(2e3, a2()), { message: "Cannot create Binary Tree Concept", ok: false, status: 400, data: e3 };
      }
    }));
  }
}, 7282: (e2, t2, n2) => {
  n2.d(t2, { o: () => i2 });
  var o2 = n2(2615);
  function i2() {
    let e3 = /* @__PURE__ */ new Date(), t3 = /* @__PURE__ */ new Date();
    return new o2.j(0, 0, 0, 0, 0, "0", 0, false, e3, t3, "0");
  }
}, 1218: (e2, t2, n2) => {
  n2.d(t2, { A: () => s2 });
  var o2 = n2(2830), i2 = n2(7282), r2 = n2(1666), c2 = n2(8407), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    return a2(this, arguments, void 0, (function* (e4, t3 = null, n3 = null, a3 = null, l2 = null, d2 = null, h2 = null) {
      if (o2.serviceWorker) try {
        return (yield (0, o2.sendMessage)("CreateTheComposition", { json: e4, ofTheConceptId: t3, ofTheConceptUserId: n3, mainKey: a3, userId: l2, accessId: d2, sessionInformationId: h2 })).data;
      } catch (e5) {
        console.error("CreateTheComposition sw error: ", e5), (0, o2.handleServiceWorkerException)(e5);
      }
      let u2 = null != l2 ? l2 : 999, p2 = null != d2 ? d2 : 4, f2 = null != h2 ? h2 : 999, y2 = null != a3 ? a3 : 0, g2 = (0, i2.o)();
      for (const o3 in e4) if ("string" != typeof e4[o3] && "number" != typeof e4[o3]) if (null == t3 && null == n3) {
        let t4 = y2, n4 = yield (0, c2.A)(o3, "", true, u2, p2, f2);
        g2 = n4, t4 = n4.id, y2 = n4.id, yield s2(e4[o3], n4.id, n4.userId, t4, l2, d2, h2);
      } else {
        let i3 = null != t3 ? t3 : 999, a4 = null != n3 ? n3 : 999, v2 = y2, C2 = yield (0, c2.A)(o3, "", true, u2, p2, f2);
        g2 = C2, yield (0, r2.q)(i3, a4, C2.id, v2), yield s2(e4[o3], C2.id, C2.userId, v2, l2, d2, h2);
      }
      else {
        let i3 = null != t3 ? t3 : 999, a4 = null != n3 ? n3 : 10267, s3 = y2, l3 = yield (0, c2.A)(o3, e4[o3].toString(), false, u2, p2, f2);
        yield (0, r2.q)(i3, a4, l3.id, s3);
      }
      return g2;
    }));
  }
}, 2212: (e2, t2, n2) => {
  n2.d(t2, { Ay: () => l2, N: () => d2 });
  var o2 = n2(1167), i2 = n2(2615), r2 = n2(5976), c2 = n2(442), a2 = n2(2830), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3, t3, n3, o3, a3, l3, d3) {
    return s2(this, void 0, void 0, (function* () {
      let s3 = yield r2.B.getId(), h2 = /* @__PURE__ */ new Date(), u2 = /* @__PURE__ */ new Date(), p2 = new i2.j(s3, t3, o3, n3, a3, e3, l3, true, h2, u2, d3);
      return p2.isTemp = false, c2.Y.AddConcept(p2), p2;
    }));
  }
  function d2(e3, t3, n3, c3, l3, d3, h2) {
    return s2(this, void 0, void 0, (function* () {
      let s3 = yield r2.B.getId(), u2 = /* @__PURE__ */ new Date(), p2 = /* @__PURE__ */ new Date(), f2 = new i2.j(s3, t3, c3, n3, l3, e3, d3, false, u2, p2, h2);
      return a2.ConceptsData.AddConcept(f2), (0, o2.Y)([f2]), f2;
    }));
  }
}, 1666: (e2, t2, n2) => {
  n2.d(t2, { q: () => c2 });
  var o2 = n2(2155), i2 = n2(442), r2 = n2(1863);
  function c2(e3, t3, n3, c3) {
    var a2 = t3, s2 = new o2.N(0, e3, n3, a2, c3, 1, 4);
    if (e3 == n3) return s2.ofTheConceptId = 0, s2.toTheConceptId = 1, s2;
    try {
      s2.isTemp = true, s2.id = Math.floor(1e8 * Math.random()), i2.Y.AddConnection(s2);
    } catch (e4) {
      (0, r2.Mb)(e4);
    }
    return s2;
  }
}, 1838: (e2, t2, n2) => {
  n2.d(t2, { m: () => h2 });
  var o2 = n2(2830), i2 = n2(9581), r2 = n2(1863), c2 = n2(3518), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, s2 = n2(5239), l2 = n2(4864), d2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function h2(e3) {
    var t3 = arguments;
    return d2(this, void 0, void 0, (function* () {
      const n3 = o2.Logger.logfunction("DeleteConnectionById", t3);
      if (o2.serviceWorker) try {
        return (yield (0, o2.sendMessage)("DeleteConnectionById", { id: e3 })).data;
      } catch (e4) {
        console.error("DeleteConnectionById sw error: ", e4), (0, o2.handleServiceWorkerException)(e4);
      }
      e3 > 0 ? (yield (function(e4) {
        var t4 = arguments;
        return a2(this, void 0, void 0, (function* () {
          const n4 = o2.Logger.logfunction("DeleteTheConnection", t4);
          try {
            const t5 = new FormData();
            t5.append("id", e4.toString());
            let a3 = (0, c2.BZ)();
            const s3 = yield fetch(i2.B.DeleteTheConnectionUrl(), { method: "POST", headers: a3, body: t5, redirect: "follow" });
            o2.Logger.logUpdate(n4), s3.ok || (console.log("Delete connection error status: ", s3.status), (0, r2.ry)(s3));
          } catch (e5) {
            e5 instanceof Error ? console.log("Delete connection error message: ", e5.message) : console.log("Delete connection unexpected error: ", e5), (0, r2.Mb)(e5, i2.B.DeleteTheConnectionUrl()), (0, r2.ey)(n4, "DeleteTheConnection", e5);
          }
        }));
      })(e3), s2.O.removeNodeFromTree(e3)) : l2.G.RemoveConnectionById(e3), o2.Logger.logUpdate(n3);
    }));
  }
}, 4364: (e2, t2, n2) => {
  n2.d(t2, { s: () => c2 });
  var o2 = n2(1239), i2 = n2(2830), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a2(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a2);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function c2() {
    return r2(this, arguments, void 0, (function* (e3 = []) {
      const t3 = i2.Logger.logfunction("FindConceptsFromConnections", [e3.length]);
      let n3 = [];
      if (e3.length > 0) {
        for (let t4 = 0; t4 < e3.length; t4++) n3.includes(e3[t4].ofTheConceptId) || n3.push(e3[t4].ofTheConceptId), n3.includes(e3[t4].toTheConceptId) || n3.push(e3[t4].toTheConceptId), n3.includes(e3[t4].typeId) || n3.push(e3[t4].typeId);
        yield (0, o2.r)(n3);
      }
      i2.Logger.logUpdate(t3);
    }));
  }
}, 5284: (e2, t2, n2) => {
  n2.d(t2, { B: () => a2 });
  var o2 = n2(2830), i2 = n2(8286), r2 = n2(1863), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2() {
    return c2(this, arguments, void 0, (function* (e3 = []) {
      const t3 = o2.Logger.logfunction("FindConnectionsOfCompositionsBulkInMemory", [e3.length]);
      let n3 = [];
      try {
        if (o2.serviceWorker) {
          t3.serviceWorker = true;
          try {
            const n4 = yield (0, o2.sendMessage)("FindConnectionsOfCompositionsBulkInMemory", { composition_ids: e3 });
            return o2.Logger.logUpdate(t3), n4.data;
          } catch (e4) {
            console.error("FindConnectionsOfCompositionsBulkInMemory sw error: ", e4), (0, r2.ey)(t3, "FindConnectionsOfCompositionsBulkInMemory", e4), (0, o2.handleServiceWorkerException)(e4);
          }
        }
        for (let t4 = 0; t4 < e3.length; t4++) {
          let o3 = yield i2.d.GetConnectionsOfConcept(e3[t4]);
          n3.push(...o3);
        }
        return o2.Logger.logUpdate(t3), n3;
      } catch (e4) {
        return console.error("FindConnectionsOfCompositionsBulkInMemory error: ", e4), (0, r2.ey)(t3, "FindConnectionsOfCompositionsBulkInMemory", e4), n3;
      }
    }));
  }
}, 8939: (e2, t2, n2) => {
  n2.d(t2, { $N: () => I2, $V: () => u2, Ez: () => w2, JA: () => m2, Mb: () => y2, Nj: () => f2, PT: () => T2, RW: () => C2, XI: () => v2, ay: () => h2, hL: () => d2, kx: () => g2, re: () => p2, yz: () => k2, zN: () => L2 });
  var o2 = n2(7139), i2 = n2(2), r2 = n2(9639), c2 = n2(8286), a2 = n2(2830), s2 = n2(1863), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2(e3) {
    return l2(this, void 0, void 0, (function* () {
      let t3 = { connectionList: [], compositionList: [] };
      try {
        if (a2.serviceWorker) try {
          return (yield (0, a2.sendMessage)("GetCompositionById", { id: e3 })).data;
        } catch (e4) {
          console.error("GetCompositionById error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
        }
        let n3 = yield (0, i2.s)(e3);
        t3.connectionList = n3;
        for (let e4 = 0; e4 < t3.connectionList.length; e4++) t3.compositionList.includes(t3.connectionList[e4].ofTheConceptId) || t3.compositionList.push(t3.connectionList[e4].ofTheConceptId);
        return t3;
      } catch (e4) {
        return console.error("GetCompositionById error: ", e4), t3;
      }
    }));
  }
  function h2(e3, t3, n3) {
    return l2(this, void 0, void 0, (function* () {
      var i3, c3;
      let a3 = {}, s3 = yield r2.I.GetConcept(e3);
      0 == s3.id && null != e3 && null != e3 && (s3 = yield (0, o2.r)(e3));
      let l3 = yield L2(e3, t3, n3);
      return a3[null !== (c3 = null === (i3 = null == s3 ? void 0 : s3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== c3 ? c3 : ""] = l3, a3;
    }));
  }
  function u2(e3, t3, n3) {
    return l2(this, void 0, void 0, (function* () {
      var i3, c3;
      let a3 = {}, s3 = yield r2.I.GetConcept(e3);
      0 == s3.id && null != e3 && null != e3 && (s3 = yield (0, o2.r)(e3));
      let l3 = yield L2(e3, t3, n3);
      a3[null !== (c3 = null === (i3 = null == s3 ? void 0 : s3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== c3 ? c3 : ""] = l3;
      let d3 = {};
      return d3.created_at = s3.entryTimeStamp, d3.data = a3, d3.id = e3, d3;
    }));
  }
  function p2(e3, t3, n3) {
    return l2(this, void 0, void 0, (function* () {
      var i3, c3;
      let a3 = {}, s3 = yield r2.I.GetConcept(e3);
      0 == s3.id && null != e3 && null != e3 && (s3 = yield (0, o2.r)(e3));
      let l3 = yield A2(s3, t3, n3);
      return a3[null !== (c3 = null === (i3 = null == s3 ? void 0 : s3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== c3 ? c3 : ""] = l3, a3;
    }));
  }
  function f2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3, n3;
      if (a2.serviceWorker) try {
        return (yield (0, a2.sendMessage)("GetComposition", { id: e3 })).data;
      } catch (e4) {
        console.error("GetComposition error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
      }
      let c3 = [], s3 = {};
      c3 = yield (0, i2.s)(e3);
      let l3 = [];
      for (let e4 = 0; e4 < c3.length; e4++) l3.includes(c3[e4].ofTheConceptId) || l3.push(c3[e4].ofTheConceptId);
      let d3 = yield r2.I.GetConcept(e3);
      0 == d3.id && null != e3 && null != e3 && (d3 = yield (0, o2.r)(e3));
      let h3 = yield L2(e3, c3, l3);
      return s3[null !== (n3 = null === (t3 = null == d3 ? void 0 : d3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = h3, s3;
    }));
  }
  function y2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3, n3;
      let c3 = [], a3 = {};
      c3 = yield (0, i2.s)(e3);
      let s3 = [];
      for (let e4 = 0; e4 < c3.length; e4++) s3.includes(c3[e4].ofTheConceptId) || s3.push(c3[e4].ofTheConceptId);
      let l3 = yield r2.I.GetConcept(e3);
      0 == l3.id && null != e3 && null != e3 && (l3 = yield (0, o2.r)(e3));
      let d3 = yield S2(e3, c3, s3);
      return a3[null !== (n3 = null === (t3 = null == l3 ? void 0 : l3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = d3, a3;
    }));
  }
  function g2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3, n3;
      if (a2.serviceWorker) try {
        return (yield (0, a2.sendMessage)("GetCompositionFromMemory", { id: e3 })).data;
      } catch (e4) {
        console.error("GetCompositionFromMemory error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
      }
      let i3 = [], s3 = {};
      i3 = yield c2.d.GetConnectionsOfCompositionLocal(e3);
      let l3 = [];
      for (let e4 = 0; e4 < i3.length; e4++) l3.includes(i3[e4].ofTheConceptId) || l3.push(i3[e4].ofTheConceptId);
      let d3 = yield r2.I.GetConcept(e3);
      0 == d3.id && null != e3 && null != e3 && (d3 = yield (0, o2.r)(e3));
      let h3 = yield N2(d3, i3, l3);
      return s3[null !== (n3 = null === (t3 = null == d3 ? void 0 : d3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = h3, s3;
    }));
  }
  function v2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3, n3;
      if (a2.serviceWorker) try {
        return (yield (0, a2.sendMessage)("GetCompositionFromMemoryNormal", { id: e3 })).data;
      } catch (e4) {
        console.error("GetCompositionFromMemoryNormal error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
      }
      let i3 = [], s3 = {};
      i3 = yield c2.d.GetConnectionsOfCompositionLocal(e3);
      let l3 = [];
      for (let e4 = 0; e4 < i3.length; e4++) l3.includes(i3[e4].ofTheConceptId) || l3.push(i3[e4].ofTheConceptId);
      let d3 = yield r2.I.GetConcept(e3);
      0 == d3.id && null != e3 && null != e3 && (d3 = yield (0, o2.r)(e3));
      let h3 = yield A2(d3, i3, l3);
      return s3[null !== (n3 = null === (t3 = null == d3 ? void 0 : d3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = h3, s3;
    }));
  }
  function C2(e3) {
    var t3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      var n3, i3;
      const l3 = a2.Logger.logfunction("GetCompositionWithIdFromMemory", t3);
      if (a2.serviceWorker) {
        l3.serviceWorker = true;
        try {
          const t4 = yield (0, a2.sendMessage)("GetCompositionWithIdFromMemory", { id: e3 });
          return a2.Logger.logUpdate(l3), t4.data;
        } catch (e4) {
          console.error("GetCompositionWithIdFromMemory error sw: ", e4), (0, s2.ey)(l3, "GetCompositionWithIdFromMemory", e4), (0, a2.handleServiceWorkerException)(e4);
        }
      }
      let d3 = {}, h3 = [], u3 = {};
      try {
        h3 = yield c2.d.GetConnectionsOfCompositionLocal(e3);
        let t4 = [];
        for (let e4 = 0; e4 < h3.length; e4++) t4.includes(h3[e4].ofTheConceptId) || t4.push(h3[e4].ofTheConceptId);
        let a3 = yield r2.I.GetConcept(e3);
        0 == a3.id && null != e3 && null != e3 && (a3 = yield (0, o2.r)(e3));
        let s3 = yield N2(a3, h3, t4);
        u3[null !== (i3 = null === (n3 = null == a3 ? void 0 : a3.type) || void 0 === n3 ? void 0 : n3.characterValue) && void 0 !== i3 ? i3 : ""] = s3, d3.created_at = a3.entryTimeStamp, d3.data = u3, d3.id = e3;
      } catch (t4) {
        console.log("this is the exception in GetCompositionWithIdFromMemory", e3), (0, s2.ey)(l3, "GetCompositionWithIdFromMemory", t4);
      }
      return a2.Logger.logUpdate(l3), d3;
    }));
  }
  function m2(e3, t3) {
    var n3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      var i3, c3;
      const l3 = a2.Logger.logfunction("GetCompositionFromMemoryWithConnections", n3);
      if (a2.serviceWorker) {
        l3.serviceWorker = true;
        try {
          const n4 = yield (0, a2.sendMessage)("GetCompositionFromMemoryWithConnections", { id: e3, connectionList: t3 });
          return a2.Logger.logUpdate(l3), n4.data;
        } catch (e4) {
          console.error("GetCompositionFromMemoryWithConnections error sw: ", e4), (0, s2.ey)(l3, "GetCompositionFromMemoryWithConnections", e4), (0, a2.handleServiceWorkerException)(e4);
        }
      }
      let d3 = {}, h3 = [];
      for (let e4 = 0; e4 < t3.length; e4++) h3.includes(t3[e4].ofTheConceptId) || h3.push(t3[e4].ofTheConceptId);
      let u3 = yield r2.I.GetConcept(e3);
      0 == u3.id && null != e3 && null != e3 && (u3 = yield (0, o2.r)(e3));
      let p3 = yield N2(u3, t3, h3);
      d3[null !== (c3 = null === (i3 = null == u3 ? void 0 : u3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== c3 ? c3 : ""] = p3;
      let f3 = {};
      return f3.created_at = u3.entryTimeStamp, f3.data = d3, f3.id = e3, a2.Logger.logUpdate(l3), f3;
    }));
  }
  function T2(e3, t3) {
    return l2(this, void 0, void 0, (function* () {
      var n3, i3;
      const c3 = a2.Logger.logfunction("GetCompositionWithIdFromMemoryFromConnection", [e3]);
      if (a2.serviceWorker) {
        c3.serviceWorker = true;
        try {
          const t4 = yield (0, a2.sendMessage)("GetCompositionWithIdFromMemory", { id: e3 });
          return a2.Logger.logUpdate(c3), t4.data;
        } catch (e4) {
          console.error("GetCompositionWithIdFromMemory error sw: ", e4), (0, s2.ey)(c3, "GetCompositionWithIdFromMemoryFromConnection", e4), (0, a2.handleServiceWorkerException)(e4);
        }
      }
      let l3 = {}, d3 = [];
      for (let e4 = 0; e4 < t3.length; e4++) d3.includes(t3[e4].ofTheConceptId) || d3.push(t3[e4].ofTheConceptId);
      let h3 = yield r2.I.GetConcept(e3);
      0 == h3.id && null != e3 && null != e3 && (h3 = yield (0, o2.r)(e3));
      let u3 = yield N2(h3, t3, d3);
      l3[null !== (i3 = null === (n3 = null == h3 ? void 0 : h3.type) || void 0 === n3 ? void 0 : n3.characterValue) && void 0 !== i3 ? i3 : ""] = u3;
      let p3 = {};
      return p3.created_at = h3.entryTimeStamp, p3.data = l3, p3.id = e3, a2.Logger.logUpdate(c3), p3;
    }));
  }
  function I2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3;
      if (a2.serviceWorker) try {
        return (yield (0, a2.sendMessage)("GetCompositionWithIdFromMemoryNew", { id: e3 })).data;
      } catch (e4) {
        console.error("GetCompositionWithIdFromMemoryNew error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
      }
      let n3 = [], i3 = {};
      n3 = yield c2.d.GetConnectionsOfCompositionLocal(e3);
      let s3 = [];
      for (let e4 = 0; e4 < n3.length; e4++) s3.includes(n3[e4].ofTheConceptId) || s3.push(n3[e4].ofTheConceptId);
      let d3 = yield r2.I.GetConcept(e3);
      0 == d3.id && null != e3 && null != e3 && (console.log("this concept you cannot find ", e3), d3 = yield (0, o2.r)(e3)), (/* @__PURE__ */ new Date()).getTime();
      let h3 = yield (function(e4, t4, n4) {
        return l2(this, arguments, void 0, (function* (e5, t5, n5, o3 = []) {
          var i4, r3, c3, s4, l3, d4, h4, u4;
          let p3 = {}, f3 = e5.id, y3 = ((/* @__PURE__ */ new Date()).getTime(), null !== (r3 = null === (i4 = null == e5 ? void 0 : e5.type) || void 0 === i4 ? void 0 : i4.characterValue) && void 0 !== r3 ? r3 : "");
          if (!n5.includes(f3)) {
            let t6 = y3;
            return { [t6]: null == e5 ? void 0 : e5.characterValue };
          }
          if (o3.includes(f3)) return "";
          o3.push(f3);
          for (let e6 = 0; e6 < t5.length; e6++) {
            let n6 = yield (0, a2.GetTheConcept)(t5[e6].ofTheConceptId), o4 = yield (0, a2.GetTheConcept)(t5[e6].toTheConceptId);
            t5[e6].ofConcept = n6, t5[e6].toConcept = o4;
            let i5 = n6.id, r4 = "the_", l4 = (null !== (s4 = null === (c3 = null == o4 ? void 0 : o4.type) || void 0 === c3 ? void 0 : c3.characterValue) && void 0 !== s4 ? s4 : "").replace(r4, "");
            null != p3[i5] && null != p3[i5] || (p3[i5] = {}), p3[i5][l4] = o4.characterValue;
          }
          let g3 = {};
          for (let e6 = 0; e6 < t5.length; e6++) {
            let n6 = t5[e6].ofConcept, o4 = t5[e6].toConcept, i5 = null !== (d4 = null === (l3 = null == n6 ? void 0 : n6.type) || void 0 === l3 ? void 0 : l3.characterValue) && void 0 !== d4 ? d4 : "", r4 = "the_", c4 = (null !== (u4 = null === (h4 = null == o4 ? void 0 : o4.type) || void 0 === h4 ? void 0 : h4.characterValue) && void 0 !== u4 ? u4 : "").replace(r4, "");
            null != g3[n6.id] && null != g3[n6.id] || (g3[n6.id] = {});
            let a3 = g3[n6.id];
            null != a3[i5] && null != a3[i5] || (a3[i5] = {}), null != p3[t5[e6].ofTheConceptId] && null != p3[t5[e6].toTheConceptId] ? a3[i5][c4] = p3[o4.id] : a3[i5][c4] = o4.characterValue;
          }
          return g3[e5.id];
        }));
      })(d3, n3, s3);
      null === (t3 = null == d3 ? void 0 : d3.type) || void 0 === t3 || t3.characterValue, i3 = h3;
      let u3 = {};
      return u3.created_at = d3.entryTimeStamp, u3.data = i3, u3.id = e3, u3;
    }));
  }
  function w2(e3) {
    return l2(this, void 0, void 0, (function* () {
      var t3, n3;
      if (a2.serviceWorker) try {
        return (yield (0, a2.sendMessage)("GetCompositionWithIdAndDateFromMemory", { id: e3 })).data;
      } catch (e4) {
        console.error("GetCompositionWithIdAndDateFromMemory error sw: ", e4), (0, a2.handleServiceWorkerException)(e4);
      }
      let i3 = [], s3 = {};
      i3 = yield c2.d.GetConnectionsOfCompositionLocal(e3);
      let l3 = [];
      for (let e4 = 0; e4 < i3.length; e4++) l3.includes(i3[e4].ofTheConceptId) || l3.push(i3[e4].ofTheConceptId);
      let d3 = yield r2.I.GetConcept(e3);
      0 == d3.id && null != e3 && null != e3 && (d3 = yield (0, o2.r)(e3));
      let h3 = yield L2(e3, i3, l3);
      s3[null !== (n3 = null === (t3 = null == d3 ? void 0 : d3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = h3;
      let u3 = {};
      return u3.data = s3, u3.id = e3, u3.created_at = d3.entryTimeStamp, u3;
    }));
  }
  function k2(e3) {
    var t3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      var n3, c3;
      const l3 = a2.Logger.logfunction("GetCompositionWithId", t3);
      if (a2.serviceWorker) {
        l3.serviceWorker = true;
        try {
          const t4 = yield (0, a2.sendMessage)("GetCompositionWithId", { id: e3 });
          return a2.Logger.logUpdate(l3), t4.data;
        } catch (e4) {
          console.error("GetCompositionWithId error sw: ", e4), (0, s2.ey)(l3, "GetCompositionWithId", e4), (0, a2.handleServiceWorkerException)(e4);
        }
      }
      let d3 = [], h3 = {};
      d3 = yield (0, i2.s)(e3);
      let u3 = [];
      for (let e4 = 0; e4 < d3.length; e4++) u3.includes(d3[e4].ofTheConceptId) || u3.push(d3[e4].ofTheConceptId);
      let p3 = yield r2.I.GetConcept(e3);
      0 == p3.id && null != e3 && null != e3 && (p3 = yield (0, o2.r)(e3));
      let f3 = yield L2(e3, d3, u3);
      h3[null !== (c3 = null === (n3 = null == p3 ? void 0 : p3.type) || void 0 === n3 ? void 0 : n3.characterValue) && void 0 !== c3 ? c3 : ""] = f3;
      let y3 = {};
      return y3.data = h3, y3.id = e3, a2.Logger.logUpdate(l3), y3;
    }));
  }
  function N2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, i3 = []) {
      var c3, a3, s3;
      let l3 = {}, d3 = [], h3 = e4.id;
      if (null === (c3 = null == e4 ? void 0 : e4.type) || void 0 === c3 ? void 0 : c3.characterValue, !n4.includes(h3)) return null == e4 ? void 0 : e4.characterValue;
      if (i3.includes(h3)) return "";
      i3.push(h3);
      for (let e5 = 0; e5 < t4.length; e5++) if (t4[e5].ofTheConceptId == h3) if (h3 != t4[e5].toTheConceptId) {
        let c4 = t4[e5].toTheConceptId, h4 = yield r2.I.GetConcept(c4);
        if (null != h4 && 0 != h4.id || null == c4 || null == c4 || (h4 = yield (0, o2.r)(c4)), 0 != h4.id && null == (null == h4 ? void 0 : h4.type)) {
          let e6 = h4.typeId, t5 = yield r2.I.GetConcept(e6);
          h4.type = t5, null == t5 && null != e6 && null != e6 && (t5 = yield (0, o2.r)(e6), h4.type = t5);
        }
        let u3 = "the_", p3 = (null !== (s3 = null === (a3 = null == h4 ? void 0 : h4.type) || void 0 === a3 ? void 0 : a3.characterValue) && void 0 !== s3 ? s3 : "").replace(u3, "");
        if (isNaN(Number(p3))) {
          if (p3) {
            const e6 = yield N2(h4, t4, n4, i3);
            l3[p3] = e6;
          }
        } else {
          const e6 = yield N2(h4, t4, n4, i3);
          d3[p3] = e6, l3 = d3;
        }
      } else console.log("this is the faulty connection ", t4[e5]);
      return l3;
    }));
  }
  function A2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, i3 = []) {
      var c3, s3, l3;
      const d3 = a2.Logger.logfunction("recursiveFetchConceptNormal", [e4]);
      (/* @__PURE__ */ new Date()).getTime();
      let h3 = {}, u3 = [], p3 = e4.id;
      if (h3.id = p3, null === (c3 = null == e4 ? void 0 : e4.type) || void 0 === c3 ? void 0 : c3.characterValue, !n4.includes(p3)) return null == e4 ? void 0 : e4.characterValue;
      if (i3.includes(p3)) return "";
      i3.push(p3);
      for (let e5 = 0; e5 < t4.length; e5++) if (t4[e5].ofTheConceptId == p3) if (p3 != t4[e5].toTheConceptId) {
        let c4 = t4[e5].toTheConceptId, a3 = yield r2.I.GetConcept(c4);
        if (null != a3 && 0 != a3.id || null == c4 || null == c4 || (a3 = yield (0, o2.r)(c4)), 0 != a3.id && null == (null == a3 ? void 0 : a3.type)) {
          let e6 = a3.typeId, t5 = yield r2.I.GetConcept(e6);
          a3.type = t5, null == t5 && null != e6 && null != e6 && (t5 = yield (0, o2.r)(e6), a3.type = t5);
        }
        let d4 = "the_", p4 = (null !== (l3 = null === (s3 = null == a3 ? void 0 : a3.type) || void 0 === s3 ? void 0 : s3.characterValue) && void 0 !== l3 ? l3 : "").replace(d4, "");
        if (isNaN(Number(p4))) {
          if (p4) {
            const e6 = yield N2(a3, t4, n4, i3);
            h3[p4] = e6;
          }
        } else {
          const e6 = yield N2(a3, t4, n4, i3);
          u3[p4] = e6, h3 = u3;
        }
      } else console.log("this is the faulty connection ", t4[e5]);
      return a2.Logger.logUpdate(d3), h3;
    }));
  }
  function L2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, i3 = []) {
      var c3, a3, s3;
      let l3 = {}, d3 = [];
      if (0 == e4) return null;
      let h3 = yield r2.I.GetConcept(e4);
      if (null != h3 && 0 != h3.id || null == e4 || null == e4 || (h3 = yield (0, o2.r)(e4)), 0 != h3.id && null == h3.type) {
        let e5 = h3.typeId, t5 = yield r2.I.GetConcept(e5);
        h3.type = t5, null == t5 && null != e5 && null != e5 && (t5 = yield (0, o2.r)(e5), h3.type = t5);
      }
      if (null === (c3 = null == h3 ? void 0 : h3.type) || void 0 === c3 ? void 0 : c3.characterValue, !n4.includes(e4)) return null == h3 ? void 0 : h3.characterValue;
      if (i3.includes(e4)) return "";
      i3.push(e4);
      for (let c4 = 0; c4 < t4.length; c4++) if ((/* @__PURE__ */ new Date()).getTime(), t4[c4].ofTheConceptId == e4) if (e4 != t4[c4].toTheConceptId) {
        let e5 = t4[c4].toTheConceptId, h4 = yield r2.I.GetConcept(e5);
        if (null != h4 && 0 != h4.id || null == e5 || null == e5 || (h4 = yield (0, o2.r)(e5)), 0 != h4.id && null == (null == h4 ? void 0 : h4.type)) {
          let e6 = h4.typeId, t5 = yield r2.I.GetConcept(e6);
          h4.type = t5, null == t5 && null != e6 && null != e6 && (t5 = yield (0, o2.r)(e6), h4.type = t5);
        }
        let u3 = "the_", p3 = (null !== (s3 = null === (a3 = null == h4 ? void 0 : h4.type) || void 0 === a3 ? void 0 : a3.characterValue) && void 0 !== s3 ? s3 : "").replace(u3, "");
        if (isNaN(Number(p3))) {
          if (p3) {
            const o3 = yield L2(e5, t4, n4, i3);
            l3[p3] = o3;
          }
        } else {
          const o3 = yield L2(e5, t4, n4, i3);
          d3[p3] = o3, l3 = d3;
        }
      } else console.log("this is the faulty connection ", t4[c4]);
      return l3;
    }));
  }
  function S2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, i3 = []) {
      var c3, a3, s3;
      let l3 = {}, d3 = [];
      if (0 == e4) return null;
      let h3 = yield r2.I.GetConcept(e4);
      if (null != h3 && 0 != h3.id || null == e4 || null == e4 || (h3 = yield (0, o2.r)(e4)), 0 != h3.id && null == h3.type) {
        let e5 = h3.typeId, t5 = yield r2.I.GetConcept(e5);
        h3.type = t5, null == t5 && null != e5 && null != e5 && (t5 = yield (0, o2.r)(e5), h3.type = t5);
      }
      if (null === (c3 = null == h3 ? void 0 : h3.type) || void 0 === c3 ? void 0 : c3.characterValue, !n4.includes(e4)) return null == h3 ? void 0 : h3.characterValue;
      if (i3.includes(e4)) return "";
      i3.push(e4), l3.id = e4;
      for (let i4 = 0; i4 < t4.length; i4++) if (t4[i4].ofTheConceptId == e4) {
        let e5 = t4[i4].toTheConceptId, c4 = yield r2.I.GetConcept(e5);
        if (null != c4 && 0 != c4.id || null == e5 || null == e5 || (c4 = yield (0, o2.r)(e5)), c4 && null == (null == c4 ? void 0 : c4.type)) {
          let e6 = c4.typeId, t5 = yield r2.I.GetConcept(e6);
          c4.type = t5, null == t5 && null != e6 && null != e6 && (t5 = yield (0, o2.r)(e6), c4.type = t5);
        }
        let h4 = "the_", u3 = (null !== (s3 = null === (a3 = null == c4 ? void 0 : c4.type) || void 0 === a3 ? void 0 : a3.characterValue) && void 0 !== s3 ? s3 : "").replace(h4, "");
        if (isNaN(Number(u3))) {
          if (u3) {
            const o3 = yield S2(e5, t4, n4);
            l3[u3] = o3;
          }
        } else {
          const o3 = yield S2(e5, t4, n4);
          d3[u3] = o3, l3 = d3;
        }
      }
      return l3;
    }));
  }
}, 6687: (e2, t2, n2) => {
  n2.d(t2, { D: () => I2, MT: () => T2, Nt: () => f2, QL: () => v2, as: () => y2, cw: () => h2, dF: () => d2, hG: () => g2, km: () => p2, nr: () => m2, p8: () => u2, rv: () => C2 });
  var o2 = n2(8642), i2 = n2(7467), r2 = n2(2830), c2 = n2(1863), a2 = n2(5284), s2 = n2(8939), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2() {
    return l2(this, arguments, void 0, (function* (e3 = []) {
      yield (0, o2.Y)(e3);
      let t3 = [];
      for (let n3 = 0; n3 < e3.length; n3++) {
        let o3 = yield (0, s2.kx)(e3[n3]);
        t3.push(o3);
      }
      return t3;
    }));
  }
  function h2() {
    return l2(this, arguments, void 0, (function* (e3 = []) {
      yield (0, o2.Y)(e3);
      let t3 = [];
      for (let n3 = 0; n3 < e3.length; n3++) {
        let o3 = yield (0, s2.RW)(e3[n3]);
        t3.push(o3);
      }
      return t3;
    }));
  }
  function u2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      const n3 = r2.Logger.logfunction("GetCompositionFromConnectionsWithDataId", [e3]);
      if (r2.serviceWorker) {
        n3.serviceWorker = true;
        try {
          const o4 = yield (0, r2.sendMessage)("GetCompositionFromConnectionsWithDataId", { conceptIds: e3, connectionIds: t3 });
          return r2.Logger.logUpdate(n3), o4.data;
        } catch (e4) {
          console.error("GetCompositionFromConnectionsWithDataId error sw: ", e4), (0, c2.ey)(n3, "GetCompositionFromConnectionsWithDataId", e4), (0, r2.handleServiceWorkerException)(e4);
        }
      }
      let o3 = [];
      for (let t4 = 0; t4 < e3.length; t4++) {
        let n4 = yield (0, s2.RW)(e3[t4]);
        o3.push(n4);
      }
      return r2.Logger.logUpdate(n3), o3;
    }));
  }
  function p2() {
    var e3 = arguments;
    return l2(this, arguments, void 0, (function* (t3 = [], n3 = []) {
      const o3 = r2.Logger.logfunction("GetCompositionFromConnectionsWithDataIdFromConnections", e3);
      if (r2.serviceWorker) {
        o3.serviceWorker = true;
        try {
          const e4 = yield (0, r2.sendMessage)("GetCompositionFromConnectionsWithDataIdFromConnections", { conceptIds: t3, connectionIds: n3 });
          return r2.Logger.logUpdate(o3), e4.data;
        } catch (e4) {
          console.error("GetCompositionFromConnectionsWithDataIdFromConnections error sw: ", e4), (0, c2.ey)(o3, "GetCompositionFromConnectionsWithDataIdFromConnections", e4), (0, r2.handleServiceWorkerException)(e4);
        }
      }
      let a3 = yield (0, i2.j)(n3), l3 = [];
      for (let e4 = 0; e4 < t3.length; e4++) {
        let n4 = yield (0, s2.PT)(t3[e4], a3);
        l3.push(n4);
      }
      return r2.Logger.logUpdate(o3), l3;
    }));
  }
  function f2() {
    var e3 = arguments;
    return l2(this, arguments, void 0, (function* (t3 = [], n3 = []) {
      const o3 = r2.Logger.logfunction("GetCompositionFromConnectionsWithDataIdIndex", e3);
      if (r2.serviceWorker) {
        o3.serviceWorker = true;
        try {
          const e4 = yield (0, r2.sendMessage)("GetCompositionFromConnectionsWithDataIdIndex", { conceptIds: t3, connectionIds: n3 });
          return r2.Logger.logUpdate(o3), e4.data;
        } catch (e4) {
          console.error("GetCompositionFromConnectionsWithDataIdIndex error sw: ", e4), (0, c2.ey)(o3, "GetCompositionFromConnectionsWithDataIdIndex", e4), (0, r2.handleServiceWorkerException)(e4);
        }
      }
      yield (0, i2.j)(n3), yield (0, a2.B)(t3);
      let l3 = {};
      for (let e4 = 0; e4 < t3.length; e4++) {
        let n4 = yield (0, s2.RW)(t3[e4]);
        l3[t3[e4]] = n4;
      }
      return r2.Logger.logUpdate(o3), l3;
    }));
  }
  function y2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      yield (0, i2.j)(t3), yield (0, a2.B)(e3);
      let n3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let o3 = yield (0, s2.kx)(e3[t4]);
        n3[e3[t4]] = o3;
      }
      return n3;
    }));
  }
  function g2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      if (r2.serviceWorker) try {
        return (yield (0, r2.sendMessage)("GetCompositionFromConnectionsWithIndexFromConnections", { conceptIds: e3, connectionIds: t3 })).data;
      } catch (e4) {
        console.error("GetCompositionFromConnectionsWithIndexFromConnections error sw: ", e4), (0, r2.handleServiceWorkerException)(e4);
      }
      let n3 = yield (0, i2.j)(t3), o3 = [];
      for (let t4 = 0; t4 < e3.length; t4++) {
        let i3 = yield (0, s2.JA)(e3[t4], n3);
        o3[e3[t4]] = i3;
      }
      return o3;
    }));
  }
  function v2(e3) {
    var t3 = arguments;
    return l2(this, void 0, void 0, (function* () {
      const n3 = r2.Logger.logfunction("GetConnectionDataPrefetch", t3);
      if (r2.serviceWorker) {
        n3.serviceWorker = true;
        try {
          const t4 = yield (0, r2.sendMessage)("GetConnectionDataPrefetch", { connectionIds: e3 });
          return r2.Logger.logUpdate(n3), t4.data;
        } catch (e4) {
          console.error("GetConnectionDataPrefetch error sw: ", e4), (0, c2.ey)(n3, "GetConnectionDataPrefetch", e4), (0, r2.handleServiceWorkerException)(e4);
        }
      }
      let o3 = [], a3 = [], s3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let n4 = yield r2.ConnectionData.GetConnection(e3[t4]);
        0 == n4.id ? o3.push(e3[t4]) : a3.push(n4);
      }
      for (let t4 = 0; t4 < o3.length; t4++) s3[e3[t4]] = false;
      let l3 = [], d3 = yield (0, i2.j)(o3);
      a3 = [...a3, ...d3];
      for (let e4 = 0; e4 < a3.length; e4++) l3.push(a3[e4].ofTheConceptId), l3.push(a3[e4].toTheConceptId), l3.push(a3[e4].typeId);
      return yield (0, r2.GetConceptBulk)(l3), r2.Logger.logUpdate(n3), a3;
    }));
  }
  function C2() {
    var e3 = arguments;
    return l2(this, arguments, void 0, (function* (t3 = [], n3 = []) {
      const o3 = r2.Logger.logfunction("GetCompositionFromConnectionsWithDataIdInObject", e3);
      yield (0, i2.j)(n3);
      let c3 = {};
      for (let e4 = 0; e4 < t3.length; e4++) {
        let n4 = yield (0, s2.RW)(t3[e4]);
        c3[t3[e4]] = n4;
      }
      return r2.Logger.logUpdate(o3), c3;
    }));
  }
  function m2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      yield (0, i2.j)(t3);
      let n3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let o3 = yield (0, s2.$N)(e3[t4]);
        n3[e3[t4]] = o3;
      }
      return n3;
    }));
  }
  function T2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      yield (0, i2.j)(t3);
      let n3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let o3 = yield (0, s2.kx)(e3[t4]);
        n3[e3[t4]] = o3;
      }
      return n3;
    }));
  }
  function I2() {
    return l2(this, arguments, void 0, (function* (e3 = [], t3 = []) {
      yield (0, i2.j)(t3);
      let n3 = {};
      for (let t4 = 0; t4 < e3.length; t4++) {
        let o3 = yield (0, s2.XI)(e3[t4]);
        n3[e3[t4]] = o3, console.log("this is the normal data", e3[t4], o3);
      }
      return n3;
    }));
  }
}, 2013: (e2, t2, n2) => {
  n2.d(t2, { A: () => s2, w: () => l2 });
  var o2 = n2(8146), i2 = n2(2830), r2 = n2(9639), c2 = n2(1863), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    var t3 = arguments;
    return a2(this, void 0, void 0, (function* () {
      const n3 = i2.Logger.logfunction("GetConceptByCharacter", t3);
      if (i2.serviceWorker) {
        n3.serviceWorker = true;
        try {
          const t4 = yield (0, i2.sendMessage)("GetConceptByCharacter", { characterValue: e3 });
          return i2.Logger.logUpdate(n3), t4.data;
        } catch (e4) {
          console.error("GetConceptByCharacter sw error: ", e4), (0, c2.ey)(n3, "GetConceptByCharacter", e4), (0, i2.handleServiceWorkerException)(e4);
        }
      }
      let a3 = yield r2.I.GetConceptByCharacter(e3), s3 = `${e3}`;
      return null != a3 && 0 != (null == a3 ? void 0 : a3.id) || !s3 || (yield (0, o2.Y)(e3), a3 = yield r2.I.GetConceptByCharacterAndTypeLocal(e3, 51), 0 == a3.id && (a3 = yield r2.I.GetConceptByCharacter(e3))), i2.Logger.logUpdate(n3), a3;
    }));
  }
  function l2(e3) {
    var t3 = arguments;
    return a2(this, void 0, void 0, (function* () {
      const n3 = i2.Logger.logfunction("GetConceptByCharacterUpdated", t3);
      if (i2.serviceWorker) {
        n3.serviceWorker = true;
        try {
          const t4 = yield (0, i2.sendMessage)("GetConceptByCharacterUpdated", { characterValue: e3 });
          return i2.Logger.logUpdate(n3), t4.data;
        } catch (e4) {
          console.error("GetConceptByCharacterUpdated error sw: ", e4), (0, c2.ey)(n3, "GetConceptByCharacterUpdated", e4), (0, i2.handleServiceWorkerException)(e4);
        }
      }
      let a3 = yield r2.I.GetConceptByCharacter(e3), s3 = `${e3}`;
      return null != a3 && 0 != (null == a3 ? void 0 : a3.id) || !s3 || (yield (0, o2.Y)(e3), a3 = yield r2.I.GetConceptByCharacter(e3)), i2.Logger.logUpdate(n3), a3;
    }));
  }
}, 7887: (e2, t2, n2) => {
  n2.d(t2, { a: () => c2, p: () => a2 });
  var o2 = n2(8286), i2 = n2(4864), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function c2() {
    return r2(this, void 0, void 0, (function* () {
      try {
        let e3 = [];
        if (Array.isArray(e3)) for (let t3 = 0; t3 < e3.length; t3++) o2.d.AddConnectionToMemory(e3[t3]);
      } catch (e3) {
        throw { message: "Cannot create Connection Binary Tree Concept", ok: false, status: 400, data: e3 };
      }
    }));
  }
  function a2() {
    return r2(this, void 0, void 0, (function* () {
      try {
        let e3 = [];
        if (Array.isArray(e3)) for (let t3 = 0; t3 < e3.length; t3++) i2.G.AddConnectionToMemory(e3[t3]);
      } catch (e3) {
        throw { message: "Cannot create Local Connection Binary Tree Concept", ok: false, status: 400, data: e3 };
      }
    }));
  }
}, 7876: (e2, t2, n2) => {
  n2.d(t2, { A: () => d2 });
  var o2 = n2(1735), i2 = n2(7139), r2 = n2(2830), c2 = n2(9639), a2 = n2(3278), s2 = n2(7282), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2(e3) {
    return l2(this, arguments, void 0, (function* (e4, t3 = 999) {
      let n3 = performance.now();
      if (o2.J.activateStatus) try {
        o2.J.incrementConcept(e4);
      } catch (e5) {
        console.error("Error adding connection in access tracker"), r2.Logger.log("ERROR", "Error Adding Connection");
      }
      try {
        if (r2.serviceWorker) try {
          console.time("serviceworker");
          const n5 = yield (0, r2.sendMessage)("GetTheConcept", { id: e4, userId: t3 });
          return console.timeEnd("serviceworker"), n5.data;
        } catch (e5) {
          console.error("GetTheConcept sw error: ", e5), (0, r2.handleServiceWorkerException)(e5);
        }
        let n4 = (0, s2.o)();
        if (e4 < 0) {
          let o3 = yield (0, r2.GetUserGhostId)(t3, e4, a2.b.sessionId);
          return n4 = (0, r2.convertFromLConceptToConcept)(o3), n4;
        }
        if (n4 = yield c2.I.GetConcept(e4), null != n4 && 0 != n4.id || null == e4 || null == e4 || (n4 = yield (0, i2.r)(e4)), 0 != n4.id && null == n4.type && null == (yield c2.I.GetConcept(n4.typeId)) && null != n4.typeId && null != n4.typeId) {
          let e5 = yield (0, i2.r)(n4.typeId);
          n4.type = e5;
        }
        return n4;
      } catch (o3) {
        throw console.error("this is the error in the getting concept", o3), r2.Logger.logError(n3, t3, "read", "unknown", void 0, 500, o3, "GetTheConcept", [e4, t3], "unknown", void 0), o3;
      }
    }));
  }
}, 7869: (e2, t2, n2) => {
  n2.d(t2, { _: () => y2, A: () => f2 });
  var o2 = n2(9581), i2 = n2(9639), r2 = n2(1863), c2 = n2(3518), a2 = n2(2830), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, l2 = n2(2299);
  class d2 {
  }
  d2.isUpdated = false, d2.isOnlineSync = false;
  var h2 = n2(3655), u2 = n2(9003), p2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function f2() {
    return p2(this, arguments, void 0, (function* (e3 = true) {
      try {
        if (yield (0, h2.qI)("concepts"), yield (0, u2.qI)("concepts"), e3) {
          if ((yield (0, h2.b8)()).isOnlineSync) return true;
          yield (function() {
            return s2(this, void 0, void 0, (function* () {
              const e4 = a2.Logger.logfunction("GetAiData");
              try {
                const s3 = (/* @__PURE__ */ new Date()).getTime();
                var t3 = (0, c2.ab)("application/x-www-form-urlencoded");
                const l3 = yield fetch(o2.B.GetAllAiData(), { method: "GET", headers: t3 });
                l3.ok || (console.log("Ai Error Message: ", "Cannot get response"), (0, r2.ry)(l3));
                const d3 = yield l3.json();
                for (var n3 = 0; n3 < d3.length; n3++) i2.I.AddConcept(d3[n3]);
                y2();
                let h3 = (/* @__PURE__ */ new Date()).getTime() - s3;
                console.log("The time taken is ", h3), a2.Logger.logUpdate(e4);
              } catch (e5) {
                e5 instanceof Error ? console.log("Ai Error Message: ", e5.message) : console.log("Ai Error Message: ", e5), (0, r2.Mb)(e5, o2.B.GetAllAiData());
              }
            }));
          })();
        }
        return true;
      } catch (e4) {
        let t3 = { message: "cannot initlize the AI system", ok: false, status: 400, data: e4 };
        return console.log(t3), true;
      }
    }));
  }
  function y2() {
    return p2(this, void 0, void 0, (function* () {
      d2.isOnlineSync = true;
      var e3 = new l2.B(d2.isOnlineSync);
      (0, h2.El)(e3);
    }));
  }
}, 8095: (e2, t2, n2) => {
  n2.d(t2, { h: () => a2 });
  var o2 = n2(2830), i2 = n2(9700), r2 = n2(1863), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2(e3, t3, n3) {
    var a3 = arguments;
    return c2(this, arguments, void 0, (function* (e4, t4, n4, c3 = false, s2 = { concepts: [], connections: [] }) {
      var l2, d2, h2, u2, p2, f2;
      const y2 = i2.V.logfunction("CreateConnectionBetweenTwoConceptsLocal", a3);
      let g2 = performance.now();
      try {
        if (o2.serviceWorker) {
          y2.serviceWorker = true;
          try {
            const r3 = yield (0, o2.sendMessage)("CreateConnectionBetweenTwoConceptsLocal", { ofTheConcept: e4, toTheConcept: t4, linker: n4, both: c3, actions: s2 });
            return (null === (d2 = null === (l2 = null == r3 ? void 0 : r3.actions) || void 0 === l2 ? void 0 : l2.concepts) || void 0 === d2 ? void 0 : d2.length) && (s2.concepts = JSON.parse(JSON.stringify(r3.actions.concepts))), (null === (u2 = null === (h2 = null == r3 ? void 0 : r3.actions) || void 0 === h2 ? void 0 : h2.connections) || void 0 === u2 ? void 0 : u2.length) && (s2.connections = JSON.parse(JSON.stringify(r3.actions.connections))), i2.V.logUpdate(y2), r3.data;
          } catch (e5) {
            console.error("CreateConnectionBetweenTwoConceptsLocal sw error: ", e5), (0, r2.ey)(y2, "CreateConnectionBetweenTwoConceptsLocal", e5), (0, o2.handleServiceWorkerException)(e5);
          }
        }
        if (e4.userId, c3) {
          let i3 = (null === (p2 = t4.type) || void 0 === p2 ? void 0 : p2.characterValue) + "_s_" + n4 + "_by";
          var v2 = yield (0, o2.MakeTheInstanceConceptLocal)("connection", i3, false, 999, 999, 999, 0, s2);
          yield (0, o2.CreateTheConnectionLocal)(t4.id, e4.id, v2.id, 1e3, void 0, void 0, s2);
        }
        let a4 = (null === (f2 = e4.type) || void 0 === f2 ? void 0 : f2.characterValue) + "_s_" + n4 + "_s";
        var C2 = yield (0, o2.MakeTheInstanceConceptLocal)("connection", a4, false, 999, 999, 999, void 0, s2);
        let g3 = yield (0, o2.CreateTheConnectionLocal)(e4.id, t4.id, C2.id, 1e3, void 0, void 0, s2);
        return i2.V.logUpdate(y2), g3;
      } catch (o3) {
        throw i2.V.logError(g2, e4.userId, "create", void 0, void 0, 500, o3, "CreateConnectionBetweenTwoConceptsLocal", [e4, t4, n4, c3], void 0, void 0), (0, r2.ey)(y2, "CreateConnectionBetweenTwoConceptsLocal", o3), o3;
      }
    }));
  }
}, 6416: (e2, t2, n2) => {
  n2.d(t2, { u: () => i2 });
  var o2 = n2(2615);
  function i2() {
    let e3 = /* @__PURE__ */ new Date(), t3 = /* @__PURE__ */ new Date();
    return new o2.j(0, 0, 0, 0, 0, "0", 0, false, e3, t3, "0");
  }
}, 3075: (e2, t2, n2) => {
  n2.d(t2, { Ay: () => d2, EO: () => h2, xd: () => u2 });
  var o2 = n2(205), i2 = n2(9736), r2 = n2(5257), c2 = n2(9003), a2 = n2(2830), s2 = n2(1863), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2() {
    return l2(this, void 0, void 0, (function* () {
      const e3 = a2.Logger.logfunction("CreateLocalBinaryTreeFromIndexDb");
      try {
        let t3 = [];
        if (Array.isArray(t3)) for (let e4 = 0; e4 < t3.length; e4++) {
          let n3 = t3[e4];
          i2.v.AddConceptToMemory(n3);
        }
        o2.B.isLocalDataLoaded = true, o2.B.isLocalTypeLoaded = true, o2.B.isLocalCharacterLoaded = true, a2.Logger.logUpdate(e3);
      } catch (t3) {
        yield (0, a2.DelayFunctionExecution)(2e3, d2());
        let n3 = { message: "Cannot create local binary tree from index db", data: t3, ok: false, status: 400 };
        throw (0, s2.ey)(e3, "CreateLocalBinaryTreeFromIndexDb", t3), n3;
      }
    }));
  }
  function h2() {
    return l2(this, void 0, void 0, (function* () {
      var e3;
      const t3 = a2.Logger.logfunction("PopulateTheLocalConceptsToMemory");
      try {
        yield null === (e3 = navigator.locks) || void 0 === e3 ? void 0 : e3.request("dblock", ((e4) => l2(this, void 0, void 0, (function* () {
          let e5 = yield (0, c2.S5)("localid");
          if (Array.isArray(e5)) {
            if (e5[0]) {
              let t4 = e5[0].value;
              if (t4) r2.R.AddConceptId(e5[0]), yield (0, c2.kH)("localid", { id: 0, value: t4 - 10 });
              else {
                t4 = -Math.floor(1e8 * Math.random());
                let e6 = { id: 0, value: t4 }, n3 = { id: 0, value: t4 - 10 };
                r2.R.AddConceptId(e6), yield (0, c2.kH)("localid", n3);
              }
            }
            e5[2];
          }
        })))), a2.Logger.logUpdate(t3);
      } catch (e4) {
        let n3 = { message: "Cannot populate Local Ids from the Index Db", data: e4, ok: false, status: 400 };
        throw (0, s2.ey)(t3, "PopulateTheLocalConceptsToMemory", e4), n3;
      }
    }));
  }
  function u2() {
    return l2(this, void 0, void 0, (function* () {
      var e3;
      const t3 = a2.Logger.logfunction("PopulateTheLocalConnectionToMemory");
      try {
        yield null === (e3 = navigator.locks) || void 0 === e3 ? void 0 : e3.request("dblock", ((e4) => l2(this, void 0, void 0, (function* () {
          let e5 = yield (0, c2.S5)("localid");
          if (Array.isArray(e5)) {
            if (e5[1]) {
              let t4 = e5[1].value;
              if (t4) r2.R.AddConnectionId(e5[1]), yield (0, c2.kH)("localid", { id: 1, value: t4 - 10 });
              else {
                t4 = -Math.floor(1e8 * Math.random());
                let e6 = { id: 0, value: t4 }, n3 = { id: 0, value: t4 - 10 };
                r2.R.AddConnectionId(e6), yield (0, c2.kH)("localid", n3);
              }
            }
            e5[2];
          }
        })))), a2.Logger.logUpdate(t3);
      } catch (e4) {
        let n3 = { message: "Cannot populate Local Ids from the Index Db", data: e4, ok: false, status: 400 };
        throw (0, s2.ey)(t3, "PopulateTheLocalConnectionToMemory", e4), n3;
      }
    }));
  }
}, 999: (e2, t2, n2) => {
  n2.d(t2, { R: () => l2 });
  var o2 = n2(2830), i2 = n2(1863), r2 = n2(6416), c2 = n2(4711), a2 = n2(5868), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3) {
    return s2(this, arguments, void 0, (function* (e4, t3 = null, n3 = null, s3 = null, d2 = null, h2 = null, u2 = null, p2 = false, f2 = { concepts: [], connections: [] }) {
      var y2, g2, v2, C2;
      const m2 = o2.Logger.logfunction("CreateTheCompositionLocal");
      if (o2.serviceWorker) {
        m2.serviceWorker = true;
        try {
          const i3 = yield (0, o2.sendMessage)("CreateTheCompositionLocal", { json: e4, ofTheConceptId: t3, ofTheConceptUserId: n3, mainKey: s3, userId: d2, accessId: h2, sessionInformationId: u2, actions: f2 });
          return (null === (g2 = null === (y2 = null == i3 ? void 0 : i3.actions) || void 0 === y2 ? void 0 : y2.concepts) || void 0 === g2 ? void 0 : g2.length) && (f2.concepts = JSON.parse(JSON.stringify(i3.actions.concepts))), (null === (C2 = null === (v2 = null == i3 ? void 0 : i3.actions) || void 0 === v2 ? void 0 : v2.connections) || void 0 === C2 ? void 0 : C2.length) && (f2.connections = JSON.parse(JSON.stringify(i3.actions.connections))), o2.Logger.logUpdate(m2), i3.data;
        } catch (e5) {
          console.error("CreateTheCompositionLocal error sw: ", e5), (0, i2.ey)(m2, "CreateTheCompositionLocal", e5), (0, o2.handleServiceWorkerException)(e5);
        }
      }
      let T2 = null != d2 ? d2 : 999, I2 = null != h2 ? h2 : 999, w2 = null != u2 ? u2 : 999, k2 = null != s3 ? s3 : 0, N2 = (0, r2.u)();
      for (const o3 in e4) if ("string" != typeof e4[o3] && "number" != typeof e4[o3]) if (null == t3 && null == n3) {
        let t4 = k2, n4 = yield (0, a2.k)(o3, "", true, T2, I2, w2, void 0, f2);
        N2 = n4, t4 = n4.id, k2 = n4.id, yield l2(e4[o3], n4.id, n4.userId, t4, d2, h2, u2, void 0, f2);
      } else {
        let n4 = null != t3 ? t3 : 999, i3 = k2, r3 = yield (0, a2.k)(o3, "", true, T2, I2, w2, void 0, f2);
        yield (0, c2.F)(n4, r3.id, i3, void 0, void 0, void 0, f2), yield l2(e4[o3], r3.id, r3.userId, i3, d2, h2, u2, void 0, f2);
      }
      else {
        let n4 = null != t3 ? t3 : 999, i3 = k2, r3 = yield (0, a2.k)(o3, e4[o3].toString(), false, T2, I2, w2, void 0, f2);
        yield (0, c2.F)(n4, r3.id, i3, void 0, void 0, void 0, f2);
      }
      return o2.Logger.logUpdate(m2), N2;
    }));
  }
}, 3077: (e2, t2, n2) => {
  n2.d(t2, { A: () => l2 });
  var o2 = n2(2830), i2 = n2(2615), r2 = n2(9736), c2 = n2(5257), a2 = n2(9700), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3, t3, n3, l3, d2, h2) {
    return s2(this, arguments, void 0, (function* (e4, t4, n4, s3, l4, d3, h3 = false, u2 = 0, p2 = { concepts: [], connections: [] }) {
      var f2, y2, g2, v2;
      let C2 = performance.now();
      try {
        if (o2.serviceWorker) try {
          const i3 = yield (0, o2.sendMessage)("CreateTheConceptLocal", { referent: e4, typecharacter: t4, userId: n4, categoryId: s3, typeId: l4, accessId: d3, isComposition: h3, referentId: u2 });
          return (null === (y2 = null === (f2 = null == i3 ? void 0 : i3.actions) || void 0 === f2 ? void 0 : f2.concepts) || void 0 === y2 ? void 0 : y2.length) && (p2.concepts = JSON.parse(JSON.stringify(i3.actions.concepts))), (null === (v2 = null === (g2 = null == i3 ? void 0 : i3.actions) || void 0 === g2 ? void 0 : g2.connections) || void 0 === v2 ? void 0 : v2.length) && (p2.connections = JSON.parse(JSON.stringify(i3.actions.connections))), i3.data;
        } catch (e5) {
          console.error("CreateTheConceptLocal error sw: ", e5), (0, o2.handleServiceWorkerException)(e5);
        }
        let a3 = yield c2.R.getConceptId(), C3 = true, m2 = /* @__PURE__ */ new Date(), T2 = /* @__PURE__ */ new Date();
        if ("the" == e4) return new i2.j(1, 999, 5, 5, u2, e4, d3, C3, m2, T2, t4);
        let I2 = new i2.j(a3, n4, l4, s3, u2, e4, d3, C3, m2, T2, t4);
        return I2.isTemp = true, I2.isComposition = h3, r2.v.AddConcept(I2), p2.concepts.push(I2), I2;
      } catch (o3) {
        throw a2.V.logError(C2, n4, "create", "unknown", "unknown", 500, void 0, "createTheConceptLocal", [e4, t4, n4, s3, l4, d3, h3], void 0), o3;
      }
    }));
  }
}, 4711: (e2, t2, n2) => {
  n2.d(t2, { F: () => l2 });
  var o2 = n2(2155), i2 = n2(4864), r2 = n2(5257), c2 = n2(9700), a2 = n2(2830), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3, t3, n3) {
    return s2(this, arguments, void 0, (function* (e4, t4, n4, s3 = 1, l3 = "", d2 = 999, h2 = { concepts: [], connections: [] }) {
      var u2, p2, f2, y2;
      let g2 = performance.now();
      if (a2.serviceWorker) try {
        const o3 = yield (0, a2.sendMessage)("CreateTheConnectionLocal", { ofTheConceptId: e4, toTheConceptId: t4, typeId: n4, orderId: s3, typeString: l3, userId: d2, actions: h2 });
        return (null === (p2 = null === (u2 = null == o3 ? void 0 : o3.actions) || void 0 === u2 ? void 0 : u2.concepts) || void 0 === p2 ? void 0 : p2.length) && (h2.concepts = JSON.parse(JSON.stringify(o3.actions.concepts))), (null === (y2 = null === (f2 = null == o3 ? void 0 : o3.actions) || void 0 === f2 ? void 0 : f2.connections) || void 0 === y2 ? void 0 : y2.length) && (h2.connections = JSON.parse(JSON.stringify(o3.actions.connections))), o3.data;
      } catch (e5) {
        console.log("CreateTheConnectionLocal error sw: ", e5), (0, a2.handleServiceWorkerException)(e5);
      }
      try {
        let c3 = 4, u3 = yield r2.R.getConnectionId(), p3 = 0, f3 = 0, y3 = 0;
        p3 = e4, f3 = t4, y3 = n4;
        let g3 = new o2.N(0, 0, 0, 0, 0, 0, 0);
        return e4 != t4 && (g3 = new o2.N(u3, p3, f3, d2, n4, s3, c3), g3.isTemp = true, g3.typeCharacter = l3, a2.LocalSyncData.AddConnection(g3), i2.G.AddConnection(g3), h2.connections.push(g3)), g3;
      } catch (o3) {
        throw c2.V.logError(g2, d2, "create", "Unknown", "Unknown", 500, void 0, "CreateTheConnectionLocal", [e4, t4, n4, s3, l3, d2], "UnknownUserAgent", []), o3;
      }
    }));
  }
}, 8064: (e2, t2, n2) => {
  n2.d(t2, { $I: () => a2, Ay: () => c2 });
  var o2 = n2(9736), i2 = (n2(9581), n2(3518), n2(2830));
  n2(1863);
  var r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function c2(e3) {
    return r2(this, void 0, void 0, (function* () {
      return yield o2.v.GetConceptByCharacterAndTypeLocal(e3, 51);
    }));
  }
  function a2(e3) {
    return r2(this, void 0, void 0, (function* () {
      if (i2.serviceWorker) try {
        return (yield (0, i2.sendMessage)("GetConceptByCharacterAndCategoryLocal", { character: e3 })).data;
      } catch (e4) {
        console.error("GetConceptByCharacterAndCategoryLocal error sw: ", e4), (0, i2.handleServiceWorkerException)(e4);
      }
      let t3 = (0, i2.CreateDefaultLConcept)();
      if ("the" == e3) return t3.id = 1, t3.typeId = 5, t3.characterValue = "the", t3;
      let n3 = (0, i2.SplitStrings)(e3);
      if (n3.length > 1) {
        let i3 = 1, c3 = yield a2(n3[0]);
        0 != c3.id && (i3 = c3.id), t3 = yield (function(e4, t4) {
          return r2(this, void 0, void 0, (function* () {
            return o2.v.GetConceptByCharacterAndCategoryLocal(e4, t4);
          }));
        })(e3, i3);
      } else n3[0] == e3 && (t3 = yield c2(e3));
      return t3;
    }));
  }
}, 1213: (e2, t2, n2) => {
  n2.d(t2, { f: () => s2 });
  var o2 = n2(9736), i2 = n2(7820), r2 = n2(2830), c2 = n2(176), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function s2(e3) {
    return a2(this, void 0, void 0, (function* () {
      let t3 = performance.now();
      try {
        if (r2.serviceWorker) try {
          return (yield (0, r2.sendMessage)("GetTheConceptLocal", { id: e3 })).data;
        } catch (e4) {
          console.error("GetTheConceptLocal error sw: ", e4), (0, r2.handleServiceWorkerException)(e4);
        }
        let t4 = (0, r2.CreateDefaultLConcept)();
        if (e3 < 0) {
          if (t4 = yield o2.v.GetConcept(e3), 0 == t4.id) {
            let n3 = yield i2.G.getNodeFromTree(e3);
            if (null == n3 ? void 0 : n3.value) {
              let e4 = n3.value;
              e4 && (t4 = e4);
            }
          }
        } else {
          let n3 = yield (0, r2.GetTheConcept)(e3);
          t4 = (0, c2.F4)(n3);
        }
        return t4;
      } catch (n3) {
        throw r2.Logger.logError(t3, "unknown", "read", "unknown", void 0, 200, void 0, "GetTheConceptLocal", [e3], "unknown", void 0), n3;
      }
    }));
  }
}, 9975: (e2, t2, n2) => {
  n2.d(t2, { A: () => a2 });
  var o2 = n2(2830), i2 = n2(9736), r2 = n2(3077), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2(e3, t3, n3, a3, s2) {
    return c2(this, arguments, void 0, (function* (e4, t4, n4, c3, a4, s3 = { concepts: [], connections: [] }) {
      var l2, d2, h2, u2;
      if (o2.serviceWorker) try {
        const i3 = yield (0, o2.sendMessage)("MakeTheConceptLocal", { referent: e4, typeCharacter: t4, userId: n4, categoryId: c3, typeId: a4, actions: s3 });
        return (null === (d2 = null === (l2 = null == i3 ? void 0 : i3.actions) || void 0 === l2 ? void 0 : l2.concepts) || void 0 === d2 ? void 0 : d2.length) && (s3.concepts = JSON.parse(JSON.stringify(i3.actions.concepts))), (null === (u2 = null === (h2 = null == i3 ? void 0 : i3.actions) || void 0 === h2 ? void 0 : h2.connections) || void 0 === u2 ? void 0 : u2.length) && (s3.connections = JSON.parse(JSON.stringify(i3.actions.connections))), i3.data;
      } catch (e5) {
        console.error("MakeTheConceptLocal error sw: ", e5), (0, o2.handleServiceWorkerException)(e5);
      }
      let p2 = yield i2.v.GetConceptByCharacterAndTypeLocal(e4, a4), f2 = p2;
      return "the" == t4 && (c3 = 1), 0 == f2.id && (p2 = yield (0, r2.A)(e4, t4, n4, c3, a4, 4, void 0, void 0, s3), f2 = p2), f2;
    }));
  }
}, 5868: (e2, t2, n2) => {
  n2.d(t2, { k: () => l2 });
  var o2 = n2(3077), i2 = n2(8357), r2 = n2(9736), c2 = n2(2830), a2 = n2(1863), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3, t3) {
    var n3 = arguments;
    return s2(this, arguments, void 0, (function* (e4, t4, s3 = false, l3, d2, h2 = 999, u2 = 0, p2 = { concepts: [], connections: [] }) {
      var f2, y2, g2, v2;
      const C2 = c2.Logger.logfunction("MakeTheInstanceConceptLocal", n3);
      if (performance.now(), c2.serviceWorker) {
        C2.serviceWorker = true;
        try {
          const n4 = yield (0, c2.sendMessage)("MakeTheInstanceConceptLocal", { type: e4, referent: t4, composition: s3, userId: l3, accessId: d2, sessionInformationId: h2, referentId: u2, actions: p2 });
          return (null === (y2 = null === (f2 = null == n4 ? void 0 : n4.actions) || void 0 === f2 ? void 0 : f2.concepts) || void 0 === y2 ? void 0 : y2.length) && (p2.concepts = JSON.parse(JSON.stringify(n4.actions.concepts))), (null === (v2 = null === (g2 = null == n4 ? void 0 : n4.actions) || void 0 === g2 ? void 0 : g2.connections) || void 0 === v2 ? void 0 : v2.length) && (p2.connections = JSON.parse(JSON.stringify(n4.actions.connections))), c2.Logger.logUpdate(C2), n4.data;
        } catch (e5) {
          console.error("MakeTheInstanceConceptLocal error sw: ", e5), (0, a2.ey)(C2, "MakeTheInstanceConceptLocal", e5), (0, c2.handleServiceWorkerException)(e5);
        }
      }
      try {
        let n4, a3, d3 = 999, h3 = 4, f3 = l3, y3 = 4, g3 = "", v3 = t4.length;
        if (g3 = e4.startsWith("the_") ? e4 : "the_" + e4, s3) n4 = yield (0, i2.$)(e4, d3, l3, l3, p2), a3 = yield (0, o2.A)(t4, e4, l3, h3, n4.id, y3, true, u2, p2);
        else if (v3 > 255) n4 = yield (0, i2.$)(g3, d3, f3, l3, p2), a3 = yield (0, o2.A)(t4, g3, l3, h3, n4.id, y3, void 0, void 0, p2);
        else {
          n4 = yield (0, i2.$)(g3, d3, f3, l3, p2);
          let e5 = yield r2.v.GetConceptByCharacterAndTypeLocal(t4, n4.id);
          a3 = e5, 0 == e5.id && 0 == e5.userId && (a3 = yield (0, o2.A)(t4, g3, l3, h3, n4.id, y3, void 0, void 0, p2));
        }
        return a3.type = n4, c2.LocalSyncData.AddConcept(a3), p2.concepts.push(a3), c2.Logger.logUpdate(C2), a3;
      } catch (e5) {
        throw (0, a2.ey)(C2, "MakeTheInstanceConceptLocal", e5), e5;
      }
    }));
  }
}, 8357: (e2, t2, n2) => {
  n2.d(t2, { $: () => d2 });
  var o2 = n2(3077), i2 = n2(8064), r2 = n2(6467), c2 = n2(9975), a2 = n2(2830), s2 = n2(1863), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2(e3, t3, n3, h2) {
    var u2 = arguments;
    return l2(this, arguments, void 0, (function* (e4, t4, n4, l3, h3 = { concepts: [], connections: [] }) {
      var p2, f2, y2, g2;
      const v2 = a2.Logger.logfunction("MakeTheTypeConceptLocal", u2);
      if (a2.serviceWorker) {
        v2.serviceWorker = true;
        try {
          const o3 = yield (0, a2.sendMessage)("MakeTheTypeConceptLocal", { typeString: e4, sessionId: t4, sessionUserId: n4, userId: l3, actions: h3 });
          return (null === (f2 = null === (p2 = null == o3 ? void 0 : o3.actions) || void 0 === p2 ? void 0 : p2.concepts) || void 0 === f2 ? void 0 : f2.length) && (h3.concepts = JSON.parse(JSON.stringify(o3.actions.concepts))), (null === (g2 = null === (y2 = null == o3 ? void 0 : o3.actions) || void 0 === y2 ? void 0 : y2.connections) || void 0 === g2 ? void 0 : g2.length) && (h3.connections = JSON.parse(JSON.stringify(o3.actions.connections))), a2.Logger.logUpdate(v2), o3.data;
        } catch (e5) {
          console.error("MakeTheTypeConceptLocal error sw: ", e5), (0, s2.ey)(v2, "MakeTheTypeConceptLocal", e5), (0, a2.handleServiceWorkerException)(e5);
        }
      }
      let C2 = yield (0, i2.$I)(e4);
      if (C2 && (0 == C2.id || 0 == C2.userId)) {
        let i3 = (0, r2.f)(e4);
        if (i3[0] == e4) C2 = yield (0, c2.A)(e4, "the", l3, 1, 51, h3);
        else {
          let r3 = yield d2(i3[0], t4, n4, l3, h3), c3 = yield d2(i3[1], t4, n4, l3, h3);
          C2 = yield (0, o2.A)(e4, i3[1], l3, r3.id, c3.id, 4, void 0, void 0, h3);
        }
      }
      return a2.Logger.logUpdate(v2), C2;
    }));
  }
}, 3729: (e2, t2, n2) => {
  n2.d(t2, { D: () => p2 });
  var o2 = n2(9934), i2 = n2(4485), r2 = n2(2), c2 = n2(7876), a2 = n2(1838), s2 = n2(999), l2 = n2(5868), d2 = n2(2830), h2 = n2(176), u2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function p2(e3) {
    return u2(this, arguments, void 0, (function* (e4, t3 = { concepts: [], connections: [] }) {
      var n3, u3, p3, f2;
      if (performance.now(), d2.serviceWorker) try {
        const o3 = yield (0, d2.sendMessage)("UpdateCompositionLocal", { patcherStructure: e4, actions: t3 });
        return (null === (u3 = null === (n3 = null == o3 ? void 0 : o3.actions) || void 0 === n3 ? void 0 : n3.concepts) || void 0 === u3 ? void 0 : u3.length) && (t3.concepts = JSON.parse(JSON.stringify(o3.actions.concepts))), (null === (f2 = null === (p3 = null == o3 ? void 0 : o3.actions) || void 0 === p3 ? void 0 : p3.connections) || void 0 === f2 ? void 0 : f2.length) && (t3.connections = JSON.parse(JSON.stringify(o3.actions.connections))), o3.data;
      } catch (e5) {
        console.error("UpdateCompositionLocal error sw: ", e5), (0, d2.handleServiceWorkerException)(e5);
      }
      const y2 = e4.userId, g2 = e4.sessionId, v2 = e4.accessId;
      let C2 = [];
      const m2 = [];
      let T2 = (0, d2.CreateDefaultLConcept)(), I2 = (0, d2.CreateDefaultLConcept)();
      const w2 = [], k2 = e4.compositionId, N2 = e4.ofTheCompositionId;
      let A2 = [], L2 = yield (0, r2.s)(k2);
      for (let e5 = 0; e5 < L2.length; e5++) C2.push((0, h2.P6)(L2[e5]));
      const S2 = [], G2 = [];
      let x2 = [];
      for (let e5 = 0; e5 < C2.length; e5++) (0, o2.A)(G2, C2[e5].ofTheConceptId), (0, o2.A)(S2, C2[e5].ofTheConceptId), (0, o2.A)(S2, C2[e5].toTheConceptId), x2.push(C2[e5].ofTheConceptId);
      for (let e5 = 0; e5 < S2.length; e5++) {
        const t4 = yield (0, c2.A)(S2[e5]);
        k2 == S2[e5] && (T2 = (0, h2.F4)(t4)), N2 == S2[e5] && (I2 = (0, h2.F4)(t4)), m2.push((0, h2.F4)(t4));
      }
      const B2 = e4.patchObject;
      for (const e5 in B2) {
        let n4 = (0, d2.CreateDefaultLConcept)();
        const o3 = B2[e5];
        let r3 = T2;
        I2.id > 0 && (r3 = I2), Array.isArray(o3) || "object" == typeof o3 ? (n4 = yield (0, l2.k)(e5, "", true, T2.userId, 4, 999, void 0, t3), yield (0, s2.R)(B2[e5], n4.id, n4.userId, T2.id, T2.userId, 4, 999, void 0, t3)) : n4 = yield (0, l2.k)(e5, o3, false, y2, v2, g2, void 0, t3);
        const c3 = (0, i2.nm)(m2, n4);
        for (let e6 = 0; e6 < c3.length; e6++) if (c3[e6].id > 0) {
          const t4 = (0, i2.gt)(C2, c3[e6].id);
          A2 = A2.concat(t4), w2.push(c3[e6]);
        }
        yield (0, d2.CreateTheConnectionLocal)(r3.id, n4.id, T2.id, 2, void 0, void 0, t3), m2.push(n4);
      }
      for (let e5 = 0; e5 < A2.length; e5++) yield (0, a2.m)(A2[e5].id);
      yield d2.LocalSyncData.SyncDataOnline(void 0, t3);
    }));
  }
}, 8407: (e2, t2, n2) => {
  n2.d(t2, { A: () => f2 });
  var o2 = n2(9581), i2 = n2(3518), r2 = n2(1863), c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, a2 = n2(4402), s2 = n2(2830), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class d2 {
    constructor(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3) {
      this.id = 0, this.userId = e3, this.data = t3, this.securityId = n3, this.securityUserId = o3, this.accessId = i3, this.accessUserId = r3, this.sessionId = c3, this.sessionUserId = a3, this.entryTimestamp = s3, this.isNew = l3;
    }
  }
  var h2 = n2(7282), u2 = n2(2212), p2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function f2(e3, t3) {
    var n3 = arguments;
    return p2(this, arguments, void 0, (function* (e4, t4, p3 = false, f3, y2 = 4, g2 = 999, v2 = 0) {
      const C2 = s2.Logger.logfunction("MakeTheInstanceConcept", n3);
      if (s2.serviceWorker) {
        C2.serviceWorker = true;
        try {
          const n4 = yield (0, s2.sendMessage)("MakeTheInstanceConcept", { type: e4, referent: t4, composition: p3, userId: f3, passedAccessId: y2, passedSessionId: g2, referentId: v2 });
          return s2.Logger.logUpdate(C2), n4.data;
        } catch (e5) {
          console.error("MakeTheInstanceConcept sw error: ", e5), (0, r2.ey)(C2, "MakeTheInstanceConcept", e5), (0, s2.handleServiceWorkerException)(e5);
        }
      }
      let m2, T2 = g2, I2 = f3, w2 = f3, k2 = y2, N2 = f3, A2 = "", L2 = t4.length, S2 = (0, h2.o)();
      if (A2 = e4.startsWith("the_") ? e4 : "the_" + e4, p3) S2 = yield (0, s2.MakeTheTypeConceptApi)(e4, f3), m2 = yield (0, u2.Ay)(t4, f3, 4, S2.id, v2, k2, e4);
      else if (L2 > 255) S2 = yield (0, s2.MakeTheTypeConceptApi)(A2, f3), m2 = yield (0, u2.Ay)(t4, f3, 4, S2.id, v2, k2, A2), (function(e5) {
        c2(this, void 0, void 0, (function* () {
          try {
            var t5 = (0, i2.Xr)();
            const n4 = yield fetch(o2.B.CreateTheTextDataUrl(), { method: "POST", headers: t5, body: JSON.stringify(e5) });
            if (!n4.ok) throw (0, r2.ry)(n4), new Error(`Error! status: ${n4.status}`);
            return yield n4.json();
          } catch (e6) {
            throw e6 instanceof Error ? console.log("Create the text error message: ", e6.message) : console.log("Create the text unexpected error: ", e6), e6;
          }
        }));
      })(new d2(f3, t4, 999, I2, k2, N2, T2, w2, Date.now().toString(), true));
      else {
        S2 = yield (0, s2.MakeTheTypeConceptApi)(A2, f3);
        let e5 = yield (0, a2.A)(t4, S2.id);
        m2 = e5, 0 == e5.id && 0 == e5.userId && (m2 = yield (0, u2.N)(t4, f3, 4, S2.id, 12, k2, A2), (function(e6, t5, n4, c3) {
          var a3 = arguments;
          l2(this, void 0, void 0, (function* () {
            const l3 = s2.Logger.logfunction("MakeTheNameInBackend", a3);
            try {
              let a4 = { newConceptId: e6, referent: t5, typeId: n4, typeUserId: c3 }, d3 = (0, i2.Xr)(), h3 = JSON.stringify(a4);
              const u3 = yield fetch(o2.B.MakeTheNameInBackendUrl(), { method: "POST", headers: d3, body: h3 });
              s2.Logger.logUpdate(l3), u3.ok || (0, r2.ry)(u3);
            } catch (e7) {
              e7 instanceof Error ? console.log("make the name in backend error message: ", e7.message) : console.log("make the name in backend unexpected error: ", e7), (0, r2.Mb)(e7, o2.B.MakeTheNameInBackendUrl()), (0, r2.ey)(l3, "MakeTheNameInBackend", e7);
            }
          }));
        })(m2.id, `${t4}`, S2.id, f3));
      }
      return m2.type = S2, s2.Logger.logUpdate(C2), m2;
    }));
  }
}, 5312: (e2, t2, n2) => {
  n2.d(t2, { NK: () => u2, Ve: () => p2, cf: () => d2, vw: () => f2, y8: () => h2 });
  var o2 = n2(2832), i2 = n2(3130), r2 = n2(2830), c2 = n2(1863), a2 = n2(6687), s2 = n2(7106), l2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function d2(e3) {
    var t3 = arguments;
    return l2(this, arguments, void 0, (function* (e4, n3 = "", d3 = null, u3 = i2.y0) {
      var p3, y2, g2, v2, C2, m2, T2, I2;
      const w2 = r2.Logger.logfunction("SearchLinkMultipleAll", t3);
      try {
        try {
          if (r2.serviceWorker) {
            w2.serviceWorker = true;
            const t5 = yield (0, r2.sendMessage)("SearchLinkMultipleAll", { searchQuery: e4, token: n3, caller: d3, format: u3 });
            return r2.Logger.logUpdate(w2), t5.data;
          }
        } catch (e5) {
          console.error("SearchLinkMultipleAll error sw: ", e5), (0, c2.ey)(w2, "SearchLinkMultipleAll", e5), (0, r2.handleServiceWorkerException)(e5);
        }
        let t4 = [], k2 = [], N2 = [], A2 = [], L2 = e4[0].composition, S2 = {}, G2 = {};
        (null == d3 ? void 0 : d3.isDataLoaded) ? (S2.compositionIds = null === (p3 = d3.conceptIds) || void 0 === p3 ? void 0 : p3.slice(), S2.internalConnections = null === (y2 = d3.internalConnections) || void 0 === y2 ? void 0 : y2.slice(), S2.linkers = null === (g2 = d3.linkers) || void 0 === g2 ? void 0 : g2.slice(), S2.reverse = null === (v2 = d3.reverse) || void 0 === v2 ? void 0 : v2.slice(), G2 = S2, t4 = G2.compositionIds, N2 = G2.internalConnections, k2 = G2.linkers, A2 = G2.reverse) : (S2 = yield (0, o2.j)(e4, n3), d3 && (d3.conceptIds = null === (C2 = S2.compositionIds) || void 0 === C2 ? void 0 : C2.slice(), d3.internalConnections = null === (m2 = S2.internalConnections) || void 0 === m2 ? void 0 : m2.slice(), d3.linkers = null === (T2 = S2.linkers) || void 0 === T2 ? void 0 : T2.slice(), d3.reverse = null === (I2 = S2.reverse) || void 0 === I2 ? void 0 : I2.slice(), d3.isDataLoaded = true), G2 = S2, t4 = G2.compositionIds, N2 = G2.internalConnections, k2 = G2.linkers, A2 = G2.reverse);
        let x2 = yield (function(e5, t5, n4, o3, r3, c3) {
          return l2(this, arguments, void 0, (function* (e6, t6, n5, o4, r4, c4, l3 = i2.y0) {
            try {
              let d4, u4, p4 = yield (0, a2.QL)(e6);
              return l3 == i2.ZJ ? (d4 = yield (0, a2.MT)(t6, n5), u4 = yield f2(e6, d4, r4, o4)) : l3 == i2.yv ? (d4 = yield (0, a2.D)(t6, n5), u4 = yield f2(e6, d4, r4, o4)) : 100 == l3 ? (d4 = yield (0, a2.nr)(t6, n5), u4 = yield h2(p4, d4, r4, o4)) : l3 == i2.SL ? u4 = yield (0, s2._W)(e6, t6, n5, c4.ofCompositions, o4) : (d4 = yield (0, a2.rv)(t6, n5), u4 = yield h2(p4, d4, r4, o4)), u4;
            } catch (e7) {
              return void console.log("Error Occured in build layer", e7);
            }
          }));
        })(k2, t4, N2, A2, L2, e4[0], u3);
        return r2.Logger.logUpdate(w2), x2;
      } catch (e5) {
        throw console.log("this is the error in the search link multiple", e5), (0, c2.ey)(w2, "SearchLinkMultipleAll", e5), e5;
      }
    }));
  }
  function h2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, o3 = []) {
      (/* @__PURE__ */ new Date()).getTime();
      let i3 = {}, c3 = [];
      for (let t5 = 0; t5 < e4.length; t5++) c3.push(e4[t5].toTheConceptId), c3.push(e4[t5].ofTheConceptId), c3.push(e4[t5].typeId);
      e4.sort((function(e5, t5) {
        return t5.id - e5.id;
      }));
      for (let n5 = 0; n5 < e4.length; n5++) {
        let i4 = false;
        if (o3.includes(e4[n5].id) && (i4 = true), 1 == i4) {
          if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
            let o4 = t4[e4[n5].toTheConceptId], i5 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = null == o4 ? void 0 : o4.data, a3 = Object.keys(c4)[0];
            try {
              let o5 = i5.characterValue + "_reverse";
              "string" == typeof c4 && (c4 = {}), Array.isArray(c4[a3][o5]) || ("string" == typeof c4[a3] && (c4[a3] = {}), c4[a3][o5] = []), c4[a3][o5].push(t4[e4[n5].ofTheConceptId]);
            } catch (e5) {
              console.log("this is error", e5);
            }
          }
        } else if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
          let o4 = t4[e4[n5].ofTheConceptId], i5 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = null == o4 ? void 0 : o4.data, a3 = Object.keys(c4)[0];
          try {
            "string" == typeof c4 && (c4 = {}), Array.isArray(c4[a3][i5.characterValue]) || ("string" == typeof c4[a3] && (c4[a3] = {}), c4[a3][i5.characterValue] = []), c4[a3][i5.characterValue].push(t4[e4[n5].toTheConceptId]);
          } catch (e5) {
            console.log("this is error", e5);
          }
        }
      }
      return i3 = t4[n4], i3;
    }));
  }
  function u2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, o3 = []) {
      let i3 = [], c3 = [];
      for (let t5 = 0; t5 < e4.length; t5++) c3.push(e4[t5].toTheConceptId), c3.push(e4[t5].ofTheConceptId), c3.push(e4[t5].typeId);
      e4.sort((function(e5, t5) {
        return t5.id - e5.id;
      }));
      for (let n5 = 0; n5 < e4.length; n5++) {
        let i4 = false;
        if (o3.includes(e4[n5].id) && (i4 = true), 1 == i4) {
          if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
            let o4 = t4[e4[n5].toTheConceptId], i5 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = Object.keys(o4)[0];
            try {
              let r3 = i5.characterValue + "_reverse";
              "string" == typeof o4 && (o4 = {}), Array.isArray(o4[c4][r3]) || ("string" == typeof o4[c4] && (o4[c4] = {}), o4[c4][r3] = []), o4[c4][r3].push(t4[e4[n5].ofTheConceptId]);
            } catch (e5) {
              console.log("this is error", e5);
            }
          }
        } else if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
          let o4 = t4[e4[n5].ofTheConceptId], i5 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = Object.keys(o4)[0];
          try {
            "string" == typeof o4 && (o4 = {}), Array.isArray(o4[c4][i5.characterValue]) || ("string" == typeof o4[c4] && (o4[c4] = {}), o4[c4][i5.characterValue] = []), o4[c4][i5.characterValue].push(t4[e4[n5].toTheConceptId]);
          } catch (e5) {
            console.log("this is error", e5);
          }
        }
      }
      for (let e5 = 0; e5 < n4.length; e5++) {
        let o4 = t4[n4[e5]];
        o4 && i3.push(o4);
      }
      return i3;
    }));
  }
  function p2(e3, t3, n3, o3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, o4, i3 = []) {
      (/* @__PURE__ */ new Date()).getTime();
      let c3 = [], a3 = [];
      for (let t5 = 0; t5 < e4.length; t5++) a3.push(e4[t5].toTheConceptId), a3.push(e4[t5].ofTheConceptId), a3.push(e4[t5].typeId);
      e4.sort((function(e5, t5) {
        return t5.id - e5.id;
      }));
      for (let n5 = 0; n5 < e4.length; n5++) {
        let o5 = false;
        if (i3.includes(e4[n5].id) && (o5 = true), 1 == o5) {
          if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
            let o6 = t4[e4[n5].toTheConceptId], i4 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = null == o6 ? void 0 : o6.data, a4 = Object.keys(c4)[0];
            try {
              let o7 = i4.characterValue + "_reverse";
              "string" == typeof c4 && (c4 = {}), Array.isArray(c4[a4][o7]) || ("string" == typeof c4[a4] && (c4[a4] = {}), c4[a4][o7] = []), c4[a4][o7].push(t4[e4[n5].ofTheConceptId]);
            } catch (e5) {
              console.log("this is error", e5);
            }
          }
        } else if (t4[e4[n5].ofTheConceptId] && t4[e4[n5].toTheConceptId]) {
          let o6 = t4[e4[n5].ofTheConceptId], i4 = yield (0, r2.GetTheConcept)(e4[n5].typeId), c4 = null == o6 ? void 0 : o6.data, a4 = Object.keys(c4)[0];
          try {
            "string" == typeof c4 && (c4 = {}), Array.isArray(c4[a4][i4.characterValue]) || ("string" == typeof c4[a4] && (c4[a4] = {}), c4[a4][i4.characterValue] = []), c4[a4][i4.characterValue].push(t4[e4[n5].toTheConceptId]);
          } catch (e5) {
            console.log("this is error", e5);
          }
        }
      }
      for (let e5 = 0; e5 < o4.length; e5++) {
        let n5 = t4[o4[e5]];
        n5 && c3.push(n5);
      }
      return c3;
    }));
  }
  function f2(e3, t3, n3) {
    return l2(this, arguments, void 0, (function* (e4, t4, n4, o3 = []) {
      let i3 = {}, c3 = yield (0, r2.GetConnectionBulk)(e4), a3 = [];
      for (let e5 = 0; e5 < c3.length; e5++) a3.push(c3[e5].toTheConceptId), a3.push(c3[e5].ofTheConceptId), a3.push(c3[e5].typeId);
      yield (0, r2.GetConceptBulk)(a3), c3.sort((function(e5, t5) {
        return t5.id - e5.id;
      }));
      for (let e5 = 0; e5 < c3.length; e5++) {
        let n5 = false;
        if (o3.includes(c3[e5].id) && (n5 = true), 1 == n5) {
          if (t4[c3[e5].ofTheConceptId] && t4[c3[e5].toTheConceptId]) {
            let n6 = t4[c3[e5].toTheConceptId], o4 = yield (0, r2.GetTheConcept)(c3[e5].typeId), i4 = n6, a4 = Object.keys(i4)[0];
            try {
              let n7 = o4.characterValue + "_reverse";
              "string" == typeof i4 && (i4 = {}), Array.isArray(i4[a4][n7]) || ("string" == typeof i4[a4] && (i4[a4] = {}), i4[a4][n7] = []), i4[a4][n7].push(t4[c3[e5].ofTheConceptId]);
            } catch (e6) {
              console.log("this is error", e6);
            }
          }
        } else if (t4[c3[e5].ofTheConceptId] && t4[c3[e5].toTheConceptId]) {
          let n6 = t4[c3[e5].ofTheConceptId], o4 = yield (0, r2.GetTheConcept)(c3[e5].typeId), i4 = n6, a4 = Object.keys(i4)[0];
          try {
            "string" == typeof i4 && (i4 = {}), Array.isArray(i4[a4][o4.characterValue]) || ("string" == typeof i4[a4] && (i4[a4] = {}), i4[a4][o4.characterValue] = []), i4[a4][o4.characterValue].push(t4[c3[e5].toTheConceptId]);
          } catch (e6) {
            console.log("this is error", e6);
          }
        }
      }
      return i3 = t4[n4], i3;
    }));
  }
}, 7106: (e2, t2, n2) => {
  n2.d(t2, { zl: () => g2, b6: () => m2, e$: () => I2, y6: () => T2, yV: () => v2, _W: () => C2 });
  var o2 = n2(2830), i2 = n2(6687);
  function r2(e3) {
    return e3.startsWith("the_") ? e3.slice(4) : e3;
  }
  var c2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function a2(e3, t3, n3) {
    return c2(this, void 0, void 0, (function* () {
      var i3, r3, c3, a3, s3, l3, d3, h3;
      let u3 = [];
      for (let t4 = 0; t4 < e3.length; t4++) u3.push(e3[t4].toTheConceptId), u3.push(e3[t4].ofTheConceptId), u3.push(e3[t4].typeId);
      for (let u4 = 0; u4 < e3.length; u4++) {
        let p3 = false;
        n3.includes(e3[u4].id) && (p3 = true);
        let f3 = yield (0, o2.GetTheConcept)(e3[u4].ofTheConceptId), y3 = yield (0, o2.GetTheConcept)(e3[u4].toTheConceptId);
        if (1 == p3) {
          if (0 != f3.id && 0 != y3.id) {
            let n4, s4 = null !== (r3 = null === (i3 = y3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== r3 ? r3 : "self";
            e3[u4].toTheConceptId in t3 ? n4 = t3[e3[u4].toTheConceptId] : (n4 = {}, n4[s4] = {}, t3[e3[u4].toTheConceptId] = n4);
            let l4 = yield (0, o2.GetTheConcept)(e3[u4].typeId);
            try {
              let e4 = null !== (a3 = null === (c3 = null == f3 ? void 0 : f3.type) || void 0 === c3 ? void 0 : c3.characterValue) && void 0 !== a3 ? a3 : "none", n5 = f3.characterValue;
              l4.characterValue, l4.characterValue.includes("_s_") && (f3.id in t3 || (t3[f3.id] = {}), t3[f3.id][e4] = n5), t3[y3.id] = {};
            } catch (e4) {
              console.log("this is error", e4);
            }
          }
        } else if (0 != f3.id && 0 != y3.id) {
          let n4, i4 = null !== (l3 = null === (s3 = f3.type) || void 0 === s3 ? void 0 : s3.characterValue) && void 0 !== l3 ? l3 : "self";
          e3[u4].ofTheConceptId in t3 ? n4 = t3[e3[u4].ofTheConceptId] : (n4 = {}, n4[i4] = {}, t3[e3[u4].ofTheConceptId] = n4);
          let r4 = yield (0, o2.GetTheConcept)(e3[u4].typeId);
          try {
            let e4 = null !== (h3 = null === (d3 = null == y3 ? void 0 : y3.type) || void 0 === d3 ? void 0 : d3.characterValue) && void 0 !== h3 ? h3 : "none", n5 = y3.characterValue;
            r4.characterValue.includes("_s_") && (y3.id in t3 || (t3[y3.id] = {}), t3[y3.id][e4] = n5), t3[f3.id] = {};
          } catch (e4) {
            console.log("this is error", e4);
          }
        }
      }
      return t3;
    }));
  }
  var s2 = n2(5312), l2 = n2(7876), d2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function h2(e3, t3, n3) {
    if (e3 in t3) {
      let o3 = t3[e3];
      o3 && (n3[o3.connectionType + "_count"] = o3.count);
    }
  }
  var u2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, p2 = n2(5898);
  function f2(e3, t3 = "DESC") {
    return "ASC" == t3 ? e3.sort((function(e4, t4) {
      return e4.id - t4.id;
    })) : e3.sort((function(e4, t4) {
      return t4.id - e4.id;
    })), e3;
  }
  var y2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function g2(e3, t3) {
    return y2(this, arguments, void 0, (function* (e4, t4, n3 = "") {
      let r3 = yield (0, o2.SearchWithTypeAndLinkerApi)(e4, t4, n3), c3 = r3.compositionIds, a3 = r3.internalConnections, l3 = r3.linkers, d3 = r3.reverse, h3 = r3.mainCompositionIds, u3 = yield (0, i2.QL)(l3), p3 = yield (0, i2.MT)(c3, a3);
      return yield (0, s2.NK)(u3, p3, h3, d3);
    }));
  }
  function v2(e3, t3, n3, o3, r3) {
    return y2(this, void 0, void 0, (function* () {
      let c3 = yield (0, i2.QL)(e3), a3 = yield (0, i2.rv)(t3, n3);
      return yield (0, s2.Ve)(c3, a3, t3, o3, r3);
    }));
  }
  function C2(e3, t3, n3, o3, r3) {
    return y2(this, void 0, void 0, (function* () {
      let c3 = yield (0, i2.QL)(e3), a3 = yield (0, i2.D)(t3, n3);
      return yield (0, s2.NK)(c3, a3, o3, r3);
    }));
  }
  function m2(e3, t3, n3, s3, l3) {
    return y2(this, void 0, void 0, (function* () {
      if (o2.serviceWorker) try {
        return (yield (0, o2.sendMessage)("formatConnections", { linkers: e3, conceptIds: t3, mainCompositionIds: n3, reverse: s3, countInfos: l3 })).data;
      } catch (e4) {
        console.error("formatConnections error sw: ", e4), (0, o2.handleServiceWorkerException)(e4);
      }
      let d3 = yield (0, i2.QL)(e3);
      d3 = f2(d3);
      let h3 = [];
      h3 = yield a2(d3, h3, s3), h3 = yield (function(e4, t4, n4) {
        return c2(this, void 0, void 0, (function* () {
          var i3, c3, a3, s4, l4, d4, h4, u4;
          let p3 = [];
          for (let t5 = 0; t5 < e4.length; t5++) p3.push(e4[t5].toTheConceptId), p3.push(e4[t5].ofTheConceptId), p3.push(e4[t5].typeId);
          e4.sort((function(e5, t5) {
            return t5.id - e5.id;
          }));
          for (let p4 = 0; p4 < e4.length; p4++) {
            let f3 = false;
            n4.includes(e4[p4].id) && (f3 = true);
            let y3 = yield (0, o2.GetTheConcept)(e4[p4].ofTheConceptId), g3 = yield (0, o2.GetTheConcept)(e4[p4].toTheConceptId);
            if (1 == f3) {
              if (0 != y3.id && 0 != g3.id) {
                let n5, l5 = null !== (c3 = null === (i3 = g3.type) || void 0 === i3 ? void 0 : i3.characterValue) && void 0 !== c3 ? c3 : "self";
                e4[p4].toTheConceptId in t4 ? (n5 = t4[e4[p4].toTheConceptId], l5 in n5 || (n5[l5] = {})) : (n5 = {}, n5[l5] = {}, t4[e4[p4].toTheConceptId] = n5);
                let d5 = yield (0, o2.GetTheConcept)(e4[p4].typeId);
                try {
                  let e5 = null !== (s4 = null === (a3 = null == y3 ? void 0 : y3.type) || void 0 === a3 ? void 0 : a3.characterValue) && void 0 !== s4 ? s4 : "none", t5 = y3.characterValue, o3 = d5.characterValue;
                  "" == o3 && (o3 = e5, o3 = r2(o3));
                  let i4 = { [e5]: t5 }, c4 = o3 + "_reverse";
                  d5.characterValue.includes("_s_") || ("string" == typeof n5[l5] && (n5[l5] = {}), n5[l5][c4] = i4);
                } catch (e5) {
                  console.log("this is error", e5);
                }
              }
            } else if (0 != y3.id && 0 != g3.id) {
              let n5, i4 = null !== (d4 = null === (l4 = y3.type) || void 0 === l4 ? void 0 : l4.characterValue) && void 0 !== d4 ? d4 : "self";
              e4[p4].ofTheConceptId in t4 ? (n5 = t4[e4[p4].ofTheConceptId], i4 in n5 || (n5[i4] = {})) : (n5 = {}, n5[i4] = {}, t4[e4[p4].ofTheConceptId] = n5);
              let c4 = yield (0, o2.GetTheConcept)(e4[p4].typeId);
              try {
                let e5 = null !== (u4 = null === (h4 = null == g3 ? void 0 : g3.type) || void 0 === h4 ? void 0 : h4.characterValue) && void 0 !== u4 ? u4 : "none", t5 = g3.characterValue, o3 = c4.characterValue, a4 = (c4.characterValue, false);
                "" == o3 && (o3 = e5, o3 = r2(o3), a4 = true);
                let s5 = { [e5]: t5 };
                isNaN(Number(o3)) ? c4.characterValue.includes("_s_") || ("string" == typeof n5[i4] && (n5[i4] = {}), n5[i4][o3] = a4 ? t5 : s5) : n5[i4] = [];
              } catch (e5) {
                console.log("this is error", e5);
              }
            }
          }
          return t4;
        }));
      })(d3, h3, s3);
      let u3 = yield (function(e4, t4, n4, i3) {
        return c2(this, arguments, void 0, (function* (e5, t5, n5, i4, r3 = []) {
          var c3, a3, s4, l4, d4, h4;
          let u4 = [], p3 = [];
          for (let t6 = 0; t6 < e5.length; t6++) p3.push(e5[t6].toTheConceptId), p3.push(e5[t6].ofTheConceptId), p3.push(e5[t6].typeId);
          e5.sort((function(e6, t6) {
            return t6.id - e6.id;
          }));
          for (let n6 = 0; n6 < e5.length; n6++) {
            let i5 = false;
            r3.includes(e5[n6].id) && (i5 = true);
            let u5 = yield (0, o2.GetTheConcept)(e5[n6].ofTheConceptId), p4 = yield (0, o2.GetTheConcept)(e5[n6].toTheConceptId);
            if (1 == i5) {
              if (0 != u5.id && 0 != p4.id && p4.id in t5) {
                let i6, r4 = null !== (a3 = null === (c3 = p4.type) || void 0 === c3 ? void 0 : c3.characterValue) && void 0 !== a3 ? a3 : "self";
                e5[n6].toTheConceptId in t5 ? i6 = t5[e5[n6].toTheConceptId] : (i6 = {}, i6[r4] = {}, t5[e5[n6].toTheConceptId] = i6);
                let s5 = yield (0, o2.GetTheConcept)(e5[n6].typeId);
                try {
                  let o3 = s5.characterValue + "_reverse", c4 = t5[e5[n6].ofTheConceptId];
                  c4 && (Array.isArray(i6[r4][o3]) ? i6[r4][o3].push(c4) : s5.characterValue.includes("_s_") ? (i6[r4][o3] = [], i6[r4][o3].push(c4)) : i6[r4][o3] = c4);
                } catch (e6) {
                  console.log("this is error", e6);
                }
              }
            } else if (0 != u5.id && 0 != p4.id && u5.id in t5) {
              let i6, r4 = null !== (l4 = null === (s4 = u5.type) || void 0 === s4 ? void 0 : s4.characterValue) && void 0 !== l4 ? l4 : "self";
              e5[n6].ofTheConceptId in t5 ? (i6 = t5[e5[n6].ofTheConceptId], "string" == typeof i6[r4] && (i6[r4] = {})) : (i6 = {}, i6[r4] = {}, t5[e5[n6].ofTheConceptId] = i6);
              let c4 = false, a4 = (yield (0, o2.GetTheConcept)(e5[n6].typeId)).characterValue;
              "" == a4 && (a4 = p4.characterValue, c4 = true), "" == a4 && (a4 = null !== (h4 = null === (d4 = null == p4 ? void 0 : p4.type) || void 0 === d4 ? void 0 : d4.characterValue) && void 0 !== h4 ? h4 : "");
              try {
                let o3 = t5[e5[n6].toTheConceptId];
                o3 && (Array.isArray(i6[r4]) ? c4 ? i6[r4].push(o3[a4]) : i6[r4].push(o3) : Array.isArray(i6[r4][a4]) ? i6[r4][a4].push(o3) : a4.includes("_s_") ? (i6[r4][a4] = [], c4 ? i6[r4][a4].push(o3[a4]) : i6[r4][a4].push(o3)) : i6[r4][a4] = c4 ? o3[a4] : o3);
              } catch (e6) {
                console.log("this is error", e6);
              }
            }
          }
          for (let e6 = 0; e6 < n5.length; e6++) {
            let o3 = t5[n5[e6]];
            o3 && (o3.id = n5[e6], u4.push(o3));
          }
          return u4;
        }));
      })(d3, h3, n3, [], s3);
      return u3;
    }));
  }
  function T2(e3, t3, n3, c3, s3) {
    return y2(this, arguments, void 0, (function* (e4, t4, n4, c4, s4, u3 = "DESC") {
      if (o2.serviceWorker) try {
        return (yield (0, o2.sendMessage)("formatConnectionsJustId", { linkers: e4, conceptIds: t4, mainCompositionIds: n4, reverse: c4, countInfos: s4, order: u3 })).data;
      } catch (e5) {
        console.error("formatConnectionsJustId error sw: ", e5), (0, o2.handleServiceWorkerException)(e5);
      }
      let y3 = yield (0, i2.QL)(e4), g3 = yield (0, p2.V)(s4);
      y3 = f2(y3, u3);
      let v3 = [];
      v3 = yield a2(y3, v3, c4), v3 = yield (function(e5, t5) {
        return d2(this, arguments, void 0, (function* (e6, t6, n5 = []) {
          var o3, i3, c5, a3, s5, d3, h3, u4;
          let p3 = [];
          for (let t7 = 0; t7 < e6.length; t7++) p3.push(e6[t7].toTheConceptId), p3.push(e6[t7].ofTheConceptId), p3.push(e6[t7].typeId);
          for (let p4 = 0; p4 < e6.length; p4++) {
            let f3 = false, y4 = yield (0, l2.A)(e6[p4].ofTheConceptId), g4 = yield (0, l2.A)(e6[p4].toTheConceptId);
            if (n5.includes(e6[p4].id) && (f3 = true), 1 == f3) {
              if (0 != y4.id && 0 != g4.id) {
                let n6, s6 = yield (0, l2.A)(e6[p4].typeId), d4 = null !== (i3 = null === (o3 = g4.type) || void 0 === o3 ? void 0 : o3.characterValue) && void 0 !== i3 ? i3 : "self";
                e6[p4].toTheConceptId in t6 ? (n6 = t6[e6[p4].toTheConceptId], d4 in n6 || (n6[d4] = {})) : (n6 = {}, n6[d4] = {}, t6[e6[p4].toTheConceptId] = n6);
                try {
                  let e7 = null !== (a3 = null === (c5 = null == y4 ? void 0 : y4.type) || void 0 === c5 ? void 0 : c5.characterValue) && void 0 !== a3 ? a3 : "none", t7 = y4.characterValue, o4 = s6.characterValue;
                  "" == o4 && (o4 = e7, o4 = r2(o4));
                  let i4 = { id: y4.id, [e7]: t7 }, l3 = o4 + "_reverse";
                  l3.includes("_s_") || ("string" == typeof n6[d4] && (n6[d4] = {}), n6[d4][l3] = i4);
                } catch (e7) {
                  console.log("this is error", e7);
                }
              }
            } else if (0 != y4.id && 0 != g4.id) {
              let n6, o4 = yield (0, l2.A)(e6[p4].typeId), i4 = null !== (d3 = null === (s5 = y4.type) || void 0 === s5 ? void 0 : s5.characterValue) && void 0 !== d3 ? d3 : "self";
              e6[p4].ofTheConceptId in t6 ? (n6 = t6[e6[p4].ofTheConceptId], i4 in n6 || (n6[i4] = {})) : (n6 = {}, n6[i4] = {}, t6[e6[p4].ofTheConceptId] = n6);
              try {
                let t7 = null !== (u4 = null === (h3 = null == g4 ? void 0 : g4.type) || void 0 === h3 ? void 0 : h3.characterValue) && void 0 !== u4 ? u4 : "none", c6 = g4.characterValue, a4 = o4.characterValue, s6 = false;
                "" == a4 && (a4 = t7, a4 = r2(a4), s6 = true);
                let l3 = {};
                l3[t7] = { id: g4.id, data: c6, created_on: e6[p4].entryTimeStamp }, isNaN(Number(a4)) ? a4.includes("_s_") || ("string" == typeof n6[i4] && (n6[i4] = {}), n6[i4][a4] = s6 ? l3[t7] : l3) : n6[i4] = [];
              } catch (e7) {
                console.log("this is error", e7);
              }
            }
          }
          return t6;
        }));
      })(y3, v3, c4);
      let C3 = yield (function(e5, t5, n5) {
        return d2(this, arguments, void 0, (function* (e6, t6, n6, o3 = [], i3) {
          var r3, c5, a3, s5, d3, u4, p3;
          (/* @__PURE__ */ new Date()).getTime();
          let f3 = [], y4 = [];
          for (let t7 = 0; t7 < e6.length; t7++) y4.push(e6[t7].toTheConceptId), y4.push(e6[t7].ofTheConceptId), y4.push(e6[t7].typeId);
          for (let n7 = 0; n7 < e6.length; n7++) {
            let f4 = false, y5 = yield (0, l2.A)(e6[n7].ofTheConceptId), g4 = yield (0, l2.A)(e6[n7].toTheConceptId);
            if (o3.includes(e6[n7].id) && (f4 = true), 1 == f4) {
              if (0 != y5.id && 0 != g4.id && g4.id in t6) {
                let o4, i4 = yield (0, l2.A)(e6[n7].typeId), a4 = null !== (c5 = null === (r3 = g4.type) || void 0 === r3 ? void 0 : r3.characterValue) && void 0 !== c5 ? c5 : "self", s6 = false;
                e6[n7].toTheConceptId in t6 && (s6 = true), e6[n7].toTheConceptId in t6 ? (o4 = t6[e6[n7].toTheConceptId], "string" == typeof o4[a4] && (o4[a4] = {})) : (o4 = {}, o4[a4] = {}, t6[e6[n7].toTheConceptId] = o4);
                try {
                  if (t6[e6[n7].ofTheConceptId]) {
                    let r4 = t6[e6[n7].ofTheConceptId];
                    r4 && (r4.id = y5.id, r4.created_on = y5.entryTimeStamp);
                    let c6 = i4.characterValue + "_reverse";
                    Array.isArray(o4[a4][c6]) ? o4[a4][c6].push(r4) : c6.includes("_s_") ? (o4[a4][c6] = [], o4[a4][c6].push(r4)) : o4[a4][c6] = r4;
                  }
                } catch (e7) {
                  console.log("this is error", e7);
                }
              }
            } else if (0 != y5.id && 0 != g4.id && y5.id in t6) {
              let o4, r4 = yield (0, l2.A)(e6[n7].typeId), c6 = null !== (s5 = null === (a3 = y5.type) || void 0 === a3 ? void 0 : a3.characterValue) && void 0 !== s5 ? s5 : "self", f5 = false;
              e6[n7].toTheConceptId in t6 && (f5 = true), e6[n7].ofTheConceptId in t6 ? (o4 = t6[e6[n7].ofTheConceptId], "string" == typeof o4[c6] && (o4[c6] = {})) : (o4 = {}, o4[c6] = {}, t6[e6[n7].ofTheConceptId] = o4), h2(y5.id, i3, o4);
              let v4 = false, C4 = r4.characterValue;
              "" == C4 && (C4 = g4.characterValue, v4 = true), "" == C4 && (C4 = null === (d3 = null == g4 ? void 0 : g4.type) || void 0 === d3 ? void 0 : d3.characterValue);
              try {
                let r5 = null !== (p3 = null === (u4 = null == g4 ? void 0 : g4.type) || void 0 === u4 ? void 0 : u4.characterValue) && void 0 !== p3 ? p3 : "none", a4 = t6[e6[n7].toTheConceptId];
                if (a4) {
                  let t7 = {};
                  t7[r5] = { data: a4[r5], id: g4.id, created_on: e6[n7].entryTimeStamp }, Array.isArray(o4[c6]) ? v4 ? o4[c6].push(a4[C4]) : o4[c6].push(a4) : Array.isArray(o4[c6][C4]) ? o4[c6][C4].push(t7) : C4.includes("_s_") ? (o4[c6][C4] = [], v4 ? o4[c6][C4].push(t7[r5]) : o4[c6][C4].push(t7)) : o4[c6][C4] = v4 ? t7[r5] : t7, h2(g4.id, i3, t7);
                }
              } catch (e7) {
                console.log("this is error", e7);
              }
            }
          }
          for (let e7 = 0; e7 < n6.length; e7++) {
            let o4 = {};
            o4 = t6[n6[e7]], o4 && (o4.id = n6[e7]), f3.push(o4);
          }
          return f3;
        }));
      })(y3, v3, n4, c4, g3);
      return C3;
    }));
  }
  function I2(e3, t3, n3, c3, a3) {
    return y2(this, arguments, void 0, (function* (e4, t4, n4, c4, a4, s3 = "DESC") {
      if (o2.serviceWorker) try {
        return (yield (0, o2.sendMessage)("formatConnectionsDataId", { linkers: e4, conceptIds: t4, mainCompositionIds: n4, reverse: c4, countInfos: a4, order: s3 })).data;
      } catch (e5) {
        console.error("GetConnectionDataPrefetch error sw: ", e5), (0, o2.handleServiceWorkerException)(e5);
      }
      let l3 = yield (0, i2.QL)(e4), d3 = yield (0, p2.V)(a4);
      l3 = f2(l3, s3);
      let y3 = [];
      y3 = yield (function(e5, t5) {
        var n5 = arguments;
        return u2(this, arguments, void 0, (function* (e6, t6, i3 = []) {
          var r3, c5, a5, s4, l4, d4, h3, u3;
          const p3 = o2.Logger.logfunction("FormatFunctionData", n5);
          let f3 = [];
          for (let t7 = 0; t7 < e6.length; t7++) f3.push(e6[t7].toTheConceptId), f3.push(e6[t7].ofTheConceptId), f3.push(e6[t7].typeId);
          for (let n6 = 0; n6 < e6.length; n6++) {
            let p4 = false, f4 = yield (0, o2.GetTheConcept)(e6[n6].ofTheConceptId), y4 = yield (0, o2.GetTheConcept)(e6[n6].toTheConceptId);
            if (i3.includes(e6[n6].id) && (p4 = true), 1 == p4) {
              if (0 != f4.id && 0 != y4.id) {
                let i4, l5 = yield (0, o2.GetTheConcept)(e6[n6].typeId), d5 = null !== (c5 = null === (r3 = y4.type) || void 0 === r3 ? void 0 : r3.characterValue) && void 0 !== c5 ? c5 : "self";
                e6[n6].toTheConceptId in t6 ? i4 = t6[e6[n6].toTheConceptId] : (i4 = {}, i4[d5] = {}, t6[e6[n6].toTheConceptId] = i4);
                try {
                  let e7 = null !== (s4 = null === (a5 = null == f4 ? void 0 : f4.type) || void 0 === a5 ? void 0 : a5.characterValue) && void 0 !== s4 ? s4 : "none", n7 = f4.characterValue;
                  (l5.characterValue + "_reverse").includes("_s_") && (f4.id in t6 || (t6[f4.id] = {}), t6[f4.id][e7] = n7), t6[y4.id] = {};
                } catch (e7) {
                  console.log("this is error", e7);
                }
              }
            } else if (0 != f4.id && 0 != y4.id) {
              let i4, r4 = yield (0, o2.GetTheConcept)(e6[n6].typeId), c6 = null !== (d4 = null === (l4 = f4.type) || void 0 === l4 ? void 0 : l4.characterValue) && void 0 !== d4 ? d4 : "self";
              e6[n6].ofTheConceptId in t6 ? i4 = t6[e6[n6].ofTheConceptId] : (i4 = {}, i4[c6] = {}, t6[e6[n6].ofTheConceptId] = i4);
              try {
                let e7 = null !== (u3 = null === (h3 = null == y4 ? void 0 : y4.type) || void 0 === h3 ? void 0 : h3.characterValue) && void 0 !== u3 ? u3 : "none", n7 = y4.characterValue;
                r4.characterValue.includes("_s_") && (y4.id in t6 || (t6[y4.id] = {}), t6[y4.id][e7] = n7), t6[f4.id] = {};
              } catch (e7) {
                console.log("this is error", e7);
              }
            }
          }
          return o2.Logger.logUpdate(p3), t6;
        }));
      })(l3, y3, c4), y3 = yield (function(e5, t5) {
        var n5 = arguments;
        return u2(this, arguments, void 0, (function* (e6, t6, i3 = []) {
          var c5, a5, s4, l4, d4, h3, u3, p3;
          const f3 = o2.Logger.logfunction("FormatFunctionDataForData", n5);
          let y4 = [];
          for (let t7 = 0; t7 < e6.length; t7++) y4.push(e6[t7].toTheConceptId), y4.push(e6[t7].ofTheConceptId), y4.push(e6[t7].typeId);
          for (let n6 = 0; n6 < e6.length; n6++) {
            let f4 = false, y5 = yield (0, o2.GetTheConcept)(e6[n6].ofTheConceptId), g4 = yield (0, o2.GetTheConcept)(e6[n6].toTheConceptId);
            if (i3.includes(e6[n6].id) && (f4 = true), 1 == f4) {
              if (0 != y5.id && 0 != g4.id) {
                let i4, d5 = yield (0, o2.GetTheConcept)(e6[n6].typeId), h4 = null !== (a5 = null === (c5 = g4.type) || void 0 === c5 ? void 0 : c5.characterValue) && void 0 !== a5 ? a5 : "self";
                e6[n6].toTheConceptId in t6 ? (i4 = t6[e6[n6].toTheConceptId], h4 in i4 || (i4[h4] = {})) : (i4 = {}, i4[h4] = {}, t6[e6[n6].toTheConceptId] = i4);
                try {
                  let e7 = null !== (l4 = null === (s4 = null == y5 ? void 0 : y5.type) || void 0 === s4 ? void 0 : s4.characterValue) && void 0 !== l4 ? l4 : "none", t7 = y5.characterValue, n7 = d5.characterValue;
                  "" == n7 && (n7 = e7, n7 = r2(n7));
                  let o3 = { id: y5.id, data: { [e7]: t7 } }, c6 = n7 + "_reverse";
                  c6.includes("_s_") || ("string" == typeof i4[h4] && (i4[h4] = {}), i4[h4][c6] = o3);
                } catch (e7) {
                  console.log("this is error", e7);
                }
              }
            } else if (0 != y5.id && 0 != g4.id) {
              let i4, c6 = yield (0, o2.GetTheConcept)(e6[n6].typeId), a6 = null !== (h3 = null === (d4 = y5.type) || void 0 === d4 ? void 0 : d4.characterValue) && void 0 !== h3 ? h3 : "self";
              e6[n6].ofTheConceptId in t6 ? (i4 = t6[e6[n6].ofTheConceptId], a6 in i4 || (i4[a6] = {})) : (i4 = {}, i4[a6] = {}, t6[e6[n6].ofTheConceptId] = i4);
              try {
                let e7 = null !== (p3 = null === (u3 = null == g4 ? void 0 : g4.type) || void 0 === u3 ? void 0 : u3.characterValue) && void 0 !== p3 ? p3 : "none", t7 = g4.characterValue, n7 = c6.characterValue, o3 = false;
                "" == n7 && (n7 = e7, n7 = r2(n7), o3 = true);
                let s5 = { id: g4.id, data: { [e7]: t7 } };
                isNaN(Number(n7)) ? n7.includes("_s_") || ("string" == typeof i4[a6] && (i4[a6] = {}), i4[a6][n7] = s5) : i4[a6] = [];
              } catch (e7) {
                console.log("this is error", e7);
              }
            }
          }
          return o2.Logger.logUpdate(f3), t6;
        }));
      })(l3, y3, c4);
      let g3 = yield (function(e5, t5, n5, i3) {
        var r3 = arguments;
        return u2(this, arguments, void 0, (function* (e6, t6, n6, i4, c5 = [], a5) {
          var s4, l4, d4, u3, p3, f3;
          const y4 = o2.Logger.logfunction("FormatFromConnectionsAlteredArrayExternal", r3);
          let g4 = [], v3 = [];
          for (let t7 = 0; t7 < e6.length; t7++) v3.push(e6[t7].toTheConceptId), v3.push(e6[t7].ofTheConceptId), v3.push(e6[t7].typeId);
          for (let n7 = 0; n7 < e6.length; n7++) {
            let i5 = false, r4 = yield (0, o2.GetTheConcept)(e6[n7].ofTheConceptId), y5 = yield (0, o2.GetTheConcept)(e6[n7].toTheConceptId);
            if (c5.includes(e6[n7].id) && (i5 = true), 1 == i5) {
              if (0 != r4.id && 0 != y5.id && y5.id in t6) {
                let i6, c6 = yield (0, o2.GetTheConcept)(e6[n7].typeId), a6 = null !== (l4 = null === (s4 = y5.type) || void 0 === s4 ? void 0 : s4.characterValue) && void 0 !== l4 ? l4 : "self", d5 = false;
                e6[n7].toTheConceptId in t6 && (d5 = true), e6[n7].toTheConceptId in t6 ? (i6 = t6[e6[n7].toTheConceptId], "string" == typeof i6[a6] && (i6[a6] = {})) : (i6 = {}, i6[a6] = {}, t6[e6[n7].toTheConceptId] = i6);
                try {
                  if (t6[e6[n7].ofTheConceptId]) {
                    let o3 = { id: r4.id, data: t6[e6[n7].ofTheConceptId], created_on: e6[n7].entryTimeStamp }, s5 = c6.characterValue + "_reverse";
                    Array.isArray(i6[a6][s5]) ? i6[a6][s5].push(o3) : s5.includes("_s_") ? (i6[a6][s5] = [], i6[a6][s5].push(o3)) : i6[a6][s5] = o3;
                  }
                } catch (e7) {
                  console.log("this is error", e7);
                }
              }
            } else if (0 != r4.id && 0 != y5.id && r4.id in t6) {
              let i6, c6 = yield (0, o2.GetTheConcept)(e6[n7].typeId), s5 = null !== (u3 = null === (d4 = r4.type) || void 0 === d4 ? void 0 : d4.characterValue) && void 0 !== u3 ? u3 : "self", l5 = false;
              e6[n7].toTheConceptId in t6 && (l5 = true), e6[n7].ofTheConceptId in t6 ? (i6 = t6[e6[n7].ofTheConceptId], "string" == typeof i6[s5] && (i6[s5] = {})) : (i6 = {}, i6[s5] = {}, t6[e6[n7].ofTheConceptId] = i6), h2(r4.id, a5, i6);
              let g5 = true, v4 = c6.characterValue;
              "" == v4 && (v4 = y5.characterValue, g5 = true), "" == v4 && (v4 = null === (p3 = null == y5 ? void 0 : y5.type) || void 0 === p3 ? void 0 : p3.characterValue);
              try {
                null === (f3 = null == y5 ? void 0 : y5.type) || void 0 === f3 || f3.characterValue;
                let o3 = t6[e6[n7].toTheConceptId];
                if (o3) {
                  let r5 = { id: y5.id, data: t6[e6[n7].toTheConceptId], created_on: e6[n7].entryTimeStamp };
                  Array.isArray(i6[s5]) ? i6[s5].push(o3) : Array.isArray(i6[s5][v4]) ? i6[s5][c6.characterValue].push(r5) : v4.includes("_s_") ? (i6[s5][v4] = [], i6[s5][v4].push(r5)) : i6[s5][v4] = r5, h2(y5.id, a5, r5);
                }
              } catch (e7) {
                console.log("this is error", e7);
              }
            }
          }
          for (let e7 = 0; e7 < i4.length; e7++) {
            let n7 = {};
            n7.id = i4[e7];
            let r4 = yield (0, o2.GetTheConcept)(n7.id);
            n7.data = t6[i4[e7]], n7.created_on = r4.entryTimeStamp, g4.push(n7);
          }
          return o2.Logger.logUpdate(y4), g4;
        }));
      })(l3, y3, [], n4, c4, d3);
      return g3;
    }));
  }
}, 3518: (e2, t2, n2) => {
  n2.d(t2, { BZ: () => c2, Xr: () => i2, ab: () => r2 });
  var o2 = n2(3278);
  function i2(e3 = "application/json", t3 = "application/json") {
    let n3 = {};
    return n3 = "" != o2.b.BearerAccessToken ? { "Content-Type": e3, Authorization: "Bearer " + o2.b.BearerAccessToken, Accept: t3 } : { "Content-Type": e3, Accept: t3 }, n3;
  }
  function r2(e3 = "application/json", t3 = "", n3 = "application/json") {
    "" == t3 && (t3 = o2.b.BearerAccessToken);
    let i3 = {};
    return i3 = "" != t3 ? { "Content-Type": e3, Authorization: "Bearer " + t3, Accept: n3 } : { "Content-Type": e3, Accept: n3 }, i3;
  }
  function c2() {
    let e3 = o2.b.BearerAccessToken;
    const t3 = new Headers();
    return t3.append("Authorization", "Bearer " + e3), t3;
  }
}, 6467: (e2, t2, n2) => {
  function o2(e3) {
    const t3 = e3.lastIndexOf("_");
    let n3 = [];
    return n3 = t3 > 0 ? [e3.substring(0, t3), e3.substring(t3 + 1, e3.length)] : [e3], n3;
  }
  n2.d(t2, { f: () => o2 });
}, 4310: (e2, t2, n2) => {
  n2.d(t2, { C: () => l2, i: () => d2 });
  var o2 = n2(2830), i2 = n2(5898), r2 = n2(1863), c2 = n2(7106), a2 = n2(3518), s2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function l2(e3) {
    var t3 = arguments;
    return s2(this, void 0, void 0, (function* () {
      o2.Logger.logfunction("BuildWidgetFromId", t3);
      try {
        try {
          if (o2.serviceWorker) return (yield (0, o2.sendMessage)("BuildWidgetFromId", { id: e3 })).data;
        } catch (e4) {
          console.error("BuildWidgetFromId error sw: ", e4), (0, o2.handleServiceWorkerException)(e4);
        }
        let t4 = [], n3 = [], s3 = [], l3 = [], d3 = "DESC", h2 = [], u2 = {}, p2 = {}, f2 = (0, a2.Xr)("application/json"), y2 = o2.BaseUrl.getWidgetData() + "?id=" + e3;
        const g2 = yield fetch(y2, { method: "GET", headers: f2 });
        if (!g2.ok) return (0, r2.ry)(g2), console.log("This is the BuildWidgetFromId error", g2.status), [];
        u2 = yield g2.json(), t4 = u2.conceptIds, n3 = u2.linkers, s3 = u2.reverse, l3 = u2.mainCompositionIds, h2 = u2.countinfo;
        let v2 = (0, i2.w)(h2);
        return p2 = yield (0, c2.e$)(n3, t4, l3, s3, v2, d3), p2;
      } catch (e4) {
        throw console.log("this is the error in the build widget", e4), e4;
      }
    }));
  }
  function d2(e3, t3) {
    for (let n3 = 0; n3 < e3.length; n3++) if (t3 == e3[n3].id) return e3[n3];
  }
}, 4287: (e2, t2, n2) => {
  n2.d(t2, { w: () => c2 });
  var o2 = n2(2830), i2 = n2(3130), r2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s2(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a2(e4) {
        try {
          s2(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s2(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a2);
      }
      s2((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class c2 {
    constructor() {
      this.subscribers = [], this.mainConcept = 0, this.compositionIds = [], this.conceptIds = [], this.internalConnections = [], this.reverse = [], this.linkers = [], this.dependency = [], this.isDataLoaded = false, this.isUpdating = false, this.fetched = false, this.format = i2.yv;
    }
    listenToEventType(e3) {
      window.addEventListener(`${e3}`, ((e4) => {
        if (this.isUpdating) console.log("rejected this");
        else {
          this.isUpdating = true;
          let t3 = this;
          setTimeout((function() {
            return r2(this, void 0, void 0, (function* () {
              let n3 = e4;
              if (!t3.compositionIds.includes(null == n3 ? void 0 : n3.detail)) {
                t3.compositionIds.unshift(null == n3 ? void 0 : n3.detail), t3.listenToEvent(null == n3 ? void 0 : n3.detail);
                let e5 = null == n3 ? void 0 : n3.detail, i3 = yield o2.ConnectionData.GetConnectionByOfTheConceptAndType(e5, e5);
                for (let e6 = 0; e6 < i3.length; e6++) yield o2.ConnectionData.GetConnection(i3[e6]).then(((e7) => {
                  e7.typeId == t3.mainConcept ? t3.internalConnections.includes(e7.id) || t3.internalConnections.push(e7.id) : t3.linkers.includes(e7.id) || t3.linkers.push(e7.id), t3.conceptIds.includes(e7.toTheConceptId) || t3.conceptIds.push(e7.toTheConceptId), t3.compositionIds.includes(e7.ofTheConceptId) || t3.compositionIds.push(e7.ofTheConceptId);
                }));
              }
              t3.isUpdating = false, yield t3.bind(), t3.notify();
            }));
          }), 200);
        }
      }));
    }
    listenToEvent(e3) {
      window.addEventListener(`${e3}`, ((t3) => {
        if (this.isUpdating) console.log("rejected this");
        else {
          this.isUpdating = true;
          let t4 = this;
          setTimeout((function() {
            return r2(this, void 0, void 0, (function* () {
              let n3 = yield o2.ConnectionData.GetConnectionByOfTheConceptAndType(e3, e3);
              for (let e4 = 0; e4 < n3.length; e4++) yield o2.ConnectionData.GetConnection(n3[e4]).then(((e5) => {
                e5.typeId == t4.mainConcept ? t4.internalConnections.includes(e5.id) || t4.internalConnections.push(e5.id) : t4.linkers.includes(e5.id) || t4.linkers.push(e5.id), t4.conceptIds.includes(e5.toTheConceptId) || t4.conceptIds.push(e5.toTheConceptId), t4.compositionIds.includes(e5.ofTheConceptId) || t4.compositionIds.push(e5.ofTheConceptId);
              }));
              t4.isUpdating = false, yield t4.bind(), t4.notify();
            }));
          }), 200);
        }
      }));
    }
    listenToEventConnectionType(e3, t3) {
      window.addEventListener(`${e3}`, ((n3) => {
        if (this.isUpdating) console.log("rejected this");
        else {
          this.isUpdating = true;
          let n4 = this;
          setTimeout((function() {
            return r2(this, void 0, void 0, (function* () {
              let i3 = yield o2.ConnectionData.GetConnectionByOfTheConceptAndType(e3, e3);
              for (let e4 = 0; e4 < i3.length; e4++) i3.typeId == t3 && (yield o2.ConnectionData.GetConnection(i3[e4]).then(((e5) => {
                e5.typeId == n4.mainConcept ? n4.internalConnections.includes(e5.id) || n4.internalConnections.push(e5.id) : n4.linkers.includes(e5.id) || n4.linkers.push(e5.id), n4.conceptIds.includes(e5.toTheConceptId) || n4.conceptIds.push(e5.toTheConceptId), n4.compositionIds.includes(e5.ofTheConceptId) || n4.compositionIds.push(e5.ofTheConceptId);
              })));
              n4.isUpdating = false, yield n4.bind(), n4.notify();
            }));
          }), 200);
        }
      }));
    }
    bind() {
      return r2(this, void 0, void 0, (function* () {
        console.log("this is the old execute data");
      }));
    }
    subscribe(e3) {
      return r2(this, void 0, void 0, (function* () {
        return this.subscribers.push(e3), console.log("again executing data"), yield this.bind(), e3(this.data);
      }));
    }
    unsubscribe(e3) {
      return this.subscribers.filter(((t3) => t3 != e3)), this.subscribers.length;
    }
    notify() {
      console.log("notifiers", this.subscribers), this.subscribers.map(((e3) => {
        console.log("notify"), e3(this.data);
      }));
    }
  }
}, 5328: (e2, t2, n2) => {
  n2.d(t2, { d: () => l2 });
  var o2 = n2(2830), i2 = n2(3130), r2 = n2(8939), c2 = n2(4287), a2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class s2 extends c2.w {
    constructor(e3, t3, n3, o3, i3) {
      super(), this.connections = [], this.data = [], this.mainConcept = e3, this.linker = t3, this.inpage = n3, this.page = o3, this.format = i3;
    }
    bind() {
      return a2(this, void 0, void 0, (function* () {
        var e3;
        if (!this.isDataLoaded) {
          let i3 = yield (0, o2.GetTheConcept)(this.mainConcept), r3 = (null === (e3 = i3.type) || void 0 === e3 ? void 0 : e3.characterValue) + "_s_" + this.linker, c3 = yield (0, o2.GetConceptByCharacterAndType)(r3, 16);
          if (c3.id > 0) {
            let e4 = yield (0, o2.GetConnectionOfTheConcept)(c3.id, i3.id, i3.userId, this.inpage, this.page);
            this.connections = e4;
            for (var t3 = [], n3 = 0; n3 < this.connections.length; n3++) t3.push(this.connections[n3].toTheConceptId), this.linkers.push(this.connections[n3].id), this.listenToEvent(this.connections[n3].toTheConceptId);
            yield (0, o2.GetAllConnectionsOfCompositionBulk)(t3);
          }
          this.isDataLoaded = true, this.listenToEvent(this.mainConcept);
        }
        return yield this.build();
      }));
    }
    build() {
      return a2(this, void 0, void 0, (function* () {
        this.data = [], this.connections = yield (0, o2.GetConnectionBulk)(this.linkers);
        for (var e3 = 0; e3 < this.connections.length; e3++) {
          let t3 = this.connections[e3].toTheConceptId, n3 = yield (0, o2.GetTheConcept)(t3);
          if (console.log("this is the format", this.format), this.format == i2.yv) {
            let e4 = yield (0, r2.RW)(n3.id);
            this.data.push(e4);
          } else if (this.format == i2.ZJ) {
            let e4 = yield (0, r2.kx)(n3.id);
            this.data.push(e4);
          } else if (this.format == i2.iw) {
            let e4 = yield (0, o2.GetCompositionWithIdAndDateFromMemory)(n3.id);
            this.data.push(e4);
          } else {
            let e4 = yield (0, o2.GetCompositionWithIdAndDateFromMemory)(n3.id);
            this.data.push(e4);
          }
        }
        return this.data;
      }));
    }
  }
  function l2(e3, t3, n3, o3, r3 = i2.yv) {
    return new s2(e3, t3, n3, o3, r3);
  }
}, 2830: (e2, t2, n2) => {
  n2.r(t2), n2.d(t2, { ADMIN: () => Wn, ALLID: () => Dn.BG, AccessTracker: () => Je2.J, AddGhostConcept: () => dn2, Anomaly: () => Go, BaseUrl: () => l2.B, BinaryTree: () => _e2.W, BuildWidgetFromId: () => $o.C, BuilderStatefulWidget: () => ko, Composition: () => Dt2, CompositionBinaryTree: () => xt2, CompositionNode: () => St2, Concept: () => no.j, ConceptsData: () => s2.I, Connection: () => O2.N, ConnectionData: () => ze2.d, CreateComposition: () => F2.A, CreateConnectionBetweenEntityLocal: () => Ho, CreateConnectionBetweenTwoConcepts: () => X2, CreateConnectionBetweenTwoConceptsGeneral: () => Z2, CreateConnectionBetweenTwoConceptsLocal: () => Ln.h, CreateDefaultConcept: () => M2.o, CreateDefaultLConcept: () => nn2.u, CreateSession: () => Xt2, CreateSessionVisit: () => Zt2, CreateTheCompositionLocal: () => E2.R, CreateTheCompositionWithCache: () => Ft2, CreateTheConnection: () => ie2.q, CreateTheConnectionGeneral: () => $2, CreateTheConnectionLocal: () => on2.F, DATAID: () => Dn.y0, DATAIDDATE: () => Dn.iw, DelayFunctionExecution: () => bn, DeleteConceptById: () => Pe2, DeleteConceptLocal: () => Gn, DeleteConnectionById: () => J2.m, DeleteConnectionByType: () => Do, DeleteUser: () => je2, DependencyObserver: () => On.w, FilterSearch: () => so, FormatFromConnections: () => hn2.vw, FormatFromConnectionsAltered: () => hn2.y8, FreeschemaQuery: () => Fo, FreeschemaQueryApi: () => Uo, GetAllConnectionsOfComposition: () => W2.s, GetAllConnectionsOfCompositionBulk: () => f2.Y, GetAllTheConnectionsByTypeAndOfTheConcept: () => Wo, GetComposition: () => g2.Nj, GetCompositionBulk: () => et2.dF, GetCompositionBulkWithDataId: () => et2.cw, GetCompositionFromConnectionsWithDataId: () => et2.p8, GetCompositionFromConnectionsWithDataIdFromConnections: () => et2.km, GetCompositionFromConnectionsWithDataIdInObject: () => et2.rv, GetCompositionFromConnectionsWithDataIdIndex: () => et2.Nt, GetCompositionFromConnectionsWithIndex: () => et2.as, GetCompositionFromConnectionsWithIndexFromConnections: () => et2.hG, GetCompositionFromMemoryWithConnections: () => g2.JA, GetCompositionList: () => T2, GetCompositionListAll: () => I2, GetCompositionListAllWithId: () => w2, GetCompositionListListener: () => zn, GetCompositionListLocal: () => b2, GetCompositionListLocalWithId: () => D2, GetCompositionListWithId: () => k2, GetCompositionListWithIdUpdated: () => N2, GetCompositionListener: () => Hn, GetCompositionLocal: () => G2, GetCompositionLocalWithId: () => x2, GetCompositionWithAllIds: () => g2.Mb, GetCompositionWithCache: () => Ht2, GetCompositionWithDataIdBulk: () => zt2, GetCompositionWithDataIdWithCache: () => Jt2, GetCompositionWithId: () => g2.yz, GetCompositionWithIdAndDateFromMemory: () => g2.Ez, GetConceptBulk: () => pt2.r, GetConceptByCharacter: () => v2.A, GetConceptByCharacterAndCategoryLocal: () => C2.$I, GetConceptByCharacterAndType: () => re2.A, GetConnectionBetweenTwoConceptsLinker: () => Rn, GetConnectionBulk: () => ft2.j, GetConnectionById: () => Xe2, GetConnectionDataPrefetch: () => et2.QL, GetConnectionOfTheConcept: () => _2, GetLink: () => ae2, GetLinkListListener: () => to, GetLinkListener: () => Qn.d, GetLinkRaw: () => se2, GetLinkerConnectionFromConcepts: () => De2, GetLinkerConnectionToConcepts: () => We2, GetRelation: () => en2, GetRelationLocal: () => gn2, GetRelationRaw: () => tn2, GetTheConcept: () => z2.A, GetTheConceptLocal: () => un2.f, GetUserGhostId: () => ln2, JUSTDATA: () => Dn.ZJ, LConcept: () => oo, LConnection: () => io, LISTNORMAL: () => Dn.SL, LocalConceptsData: () => y2.v, LocalSyncData: () => ao.H, LocalTransaction: () => Ao, Logger: () => yo.V, LoginToBackend: () => vt2, MakeTheInstanceConcept: () => q2.A, MakeTheInstanceConceptLocal: () => K2.k, MakeTheTimestamp: () => Ze2, MakeTheTypeConcept: () => Ie2, MakeTheTypeConceptApi: () => Se2, MakeTheTypeConceptLocal: () => le2.$, NORMAL: () => Dn.yv, PRIVATE: () => Fn, PUBLIC: () => En, PatcherStructure: () => ro, RAW: () => Dn.XZ, RecursiveSearchApi: () => nt2, RecursiveSearchApiNewRawFullLinker: () => ct2, RecursiveSearchApiRaw: () => it2, RecursiveSearchApiRawFullLinker: () => rt2, RecursiveSearchApiWithInternalConnections: () => ot2, RecursiveSearchListener: () => Zn, SchemaQueryListener: () => Mo, SearchAllConcepts: () => Ot2, SearchLinkInternal: () => Nn, SearchLinkInternalAll: () => An, SearchLinkMultipleAll: () => hn2.cf, SearchLinkMultipleAllObservable: () => Vn, SearchLinkMultipleApi: () => c2.j, SearchQuery: () => Ke2, SearchStructure: () => lo, SearchWithLinker: () => Mt2, SearchWithTypeAndLinker: () => qn.zl, SearchWithTypeAndLinkerApi: () => _n, SessionData: () => co, Signin: () => wt2, Signup: () => mt2, SignupEntity: () => Tt2, SplitStrings: () => a2.f, StatefulWidget: () => Io, SyncData: () => V2.Y, TrashTheConcept: () => $e2, UpdateComposition: () => Ut2, UpdateCompositionLocal: () => pn2.D, UserBinaryTree: () => an2, Validator: () => Bo, ViewInternalData: () => Tn2, ViewInternalDataApi: () => Cn2, WidgetTree: () => Po, convertFromConceptToLConcept: () => In2.F4, convertFromLConceptToConcept: () => In2.dp, convertWidgetTreeToWidget: () => Zo, convertWidgetTreeToWidgetWithWrapper: () => Ko, createFormFieldData: () => Ro, dispatchIdEvent: () => yi, getFromDatabaseWithType: () => ne2, getObjectsFromIndexDb: () => oe2, getWidgetBulkFromId: () => Yo, getWidgetFromId: () => Xo, handleServiceWorkerException: () => vi, hasActivatedSW: () => si, init: () => hi, recursiveFetch: () => g2.zN, recursiveFetchNew: () => Rt2, renderLatestWidget: () => qo, renderPage: () => zo, renderWidget: () => Qo, searchLinkMultipleListener: () => Mn, sendEmail: () => Co, sendMessage: () => ui, serviceWorker: () => oi, setHasActivatedSW: () => li, storeToDatabase: () => te2, subscribedListeners: () => ci, unwrapContainers: () => ni, updateAccessToken: () => di, uploadAttachment: () => dt2, uploadFile: () => ut2, uploadImage: () => ht2, validDocumentFormats: () => lt2, validImageFormats: () => st2 });
  var o2 = {};
  n2.r(o2), n2.d(o2, { ADMIN: () => Wn, ALLID: () => Dn.BG, AccessTracker: () => Je2.J, AddGhostConcept: () => dn2, Anomaly: () => Go, BaseUrl: () => l2.B, BinaryTree: () => _e2.W, BuildWidgetFromId: () => $o.C, BuilderStatefulWidget: () => ko, Composition: () => Dt2, CompositionBinaryTree: () => xt2, CompositionNode: () => St2, Concept: () => no.j, ConceptsData: () => s2.I, Connection: () => O2.N, ConnectionData: () => ze2.d, CreateComposition: () => F2.A, CreateConnectionBetweenEntityLocal: () => Ho, CreateConnectionBetweenTwoConcepts: () => X2, CreateConnectionBetweenTwoConceptsGeneral: () => Z2, CreateConnectionBetweenTwoConceptsLocal: () => Ln.h, CreateDefaultConcept: () => M2.o, CreateDefaultLConcept: () => nn2.u, CreateSession: () => Xt2, CreateSessionVisit: () => Zt2, CreateTheCompositionLocal: () => E2.R, CreateTheCompositionWithCache: () => Ft2, CreateTheConnection: () => ie2.q, CreateTheConnectionGeneral: () => $2, CreateTheConnectionLocal: () => on2.F, DATAID: () => Dn.y0, DATAIDDATE: () => Dn.iw, DelayFunctionExecution: () => bn, DeleteConceptById: () => Pe2, DeleteConceptLocal: () => Gn, DeleteConnectionById: () => J2.m, DeleteConnectionByType: () => Do, DeleteUser: () => je2, DependencyObserver: () => On.w, FilterSearch: () => so, FormatFromConnections: () => hn2.vw, FormatFromConnectionsAltered: () => hn2.y8, FreeschemaQuery: () => Fo, FreeschemaQueryApi: () => Uo, GetAllConnectionsOfComposition: () => W2.s, GetAllConnectionsOfCompositionBulk: () => f2.Y, GetAllTheConnectionsByTypeAndOfTheConcept: () => Wo, GetComposition: () => g2.Nj, GetCompositionBulk: () => et2.dF, GetCompositionBulkWithDataId: () => et2.cw, GetCompositionFromConnectionsWithDataId: () => et2.p8, GetCompositionFromConnectionsWithDataIdFromConnections: () => et2.km, GetCompositionFromConnectionsWithDataIdInObject: () => et2.rv, GetCompositionFromConnectionsWithDataIdIndex: () => et2.Nt, GetCompositionFromConnectionsWithIndex: () => et2.as, GetCompositionFromConnectionsWithIndexFromConnections: () => et2.hG, GetCompositionFromMemoryWithConnections: () => g2.JA, GetCompositionList: () => T2, GetCompositionListAll: () => I2, GetCompositionListAllWithId: () => w2, GetCompositionListListener: () => zn, GetCompositionListLocal: () => b2, GetCompositionListLocalWithId: () => D2, GetCompositionListWithId: () => k2, GetCompositionListWithIdUpdated: () => N2, GetCompositionListener: () => Hn, GetCompositionLocal: () => G2, GetCompositionLocalWithId: () => x2, GetCompositionWithAllIds: () => g2.Mb, GetCompositionWithCache: () => Ht2, GetCompositionWithDataIdBulk: () => zt2, GetCompositionWithDataIdWithCache: () => Jt2, GetCompositionWithId: () => g2.yz, GetCompositionWithIdAndDateFromMemory: () => g2.Ez, GetConceptBulk: () => pt2.r, GetConceptByCharacter: () => v2.A, GetConceptByCharacterAndCategoryLocal: () => C2.$I, GetConceptByCharacterAndType: () => re2.A, GetConnectionBetweenTwoConceptsLinker: () => Rn, GetConnectionBulk: () => ft2.j, GetConnectionById: () => Xe2, GetConnectionDataPrefetch: () => et2.QL, GetConnectionOfTheConcept: () => _2, GetLink: () => ae2, GetLinkListListener: () => to, GetLinkListener: () => Qn.d, GetLinkRaw: () => se2, GetLinkerConnectionFromConcepts: () => De2, GetLinkerConnectionToConcepts: () => We2, GetRelation: () => en2, GetRelationLocal: () => gn2, GetRelationRaw: () => tn2, GetTheConcept: () => z2.A, GetTheConceptLocal: () => un2.f, GetUserGhostId: () => ln2, JUSTDATA: () => Dn.ZJ, LConcept: () => oo, LConnection: () => io, LISTNORMAL: () => Dn.SL, LocalConceptsData: () => y2.v, LocalSyncData: () => ao.H, LocalTransaction: () => Ao, Logger: () => yo.V, LoginToBackend: () => vt2, MakeTheInstanceConcept: () => q2.A, MakeTheInstanceConceptLocal: () => K2.k, MakeTheTimestamp: () => Ze2, MakeTheTypeConcept: () => Ie2, MakeTheTypeConceptApi: () => Se2, MakeTheTypeConceptLocal: () => le2.$, NORMAL: () => Dn.yv, PRIVATE: () => Fn, PUBLIC: () => En, PatcherStructure: () => ro, RAW: () => Dn.XZ, RecursiveSearchApi: () => nt2, RecursiveSearchApiNewRawFullLinker: () => ct2, RecursiveSearchApiRaw: () => it2, RecursiveSearchApiRawFullLinker: () => rt2, RecursiveSearchApiWithInternalConnections: () => ot2, RecursiveSearchListener: () => Zn, SchemaQueryListener: () => Mo, SearchAllConcepts: () => Ot2, SearchLinkInternal: () => Nn, SearchLinkInternalAll: () => An, SearchLinkMultipleAll: () => hn2.cf, SearchLinkMultipleAllObservable: () => Vn, SearchLinkMultipleApi: () => c2.j, SearchQuery: () => Ke2, SearchStructure: () => lo, SearchWithLinker: () => Mt2, SearchWithTypeAndLinker: () => qn.zl, SearchWithTypeAndLinkerApi: () => _n, SessionData: () => co, Signin: () => wt2, Signup: () => mt2, SignupEntity: () => Tt2, SplitStrings: () => a2.f, StatefulWidget: () => Io, SyncData: () => V2.Y, TrashTheConcept: () => $e2, UpdateComposition: () => Ut2, UpdateCompositionLocal: () => pn2.D, UserBinaryTree: () => an2, Validator: () => Bo, ViewInternalData: () => Tn2, ViewInternalDataApi: () => Cn2, WidgetTree: () => Po, convertFromConceptToLConcept: () => In2.F4, convertFromLConceptToConcept: () => In2.dp, convertWidgetTreeToWidget: () => Zo, convertWidgetTreeToWidgetWithWrapper: () => Ko, createFormFieldData: () => Ro, dispatchIdEvent: () => yi, getFromDatabaseWithType: () => ne2, getObjectsFromIndexDb: () => oe2, getWidgetBulkFromId: () => Yo, getWidgetFromId: () => Xo, handleServiceWorkerException: () => vi, hasActivatedSW: () => si, init: () => hi, recursiveFetch: () => g2.zN, recursiveFetchNew: () => Rt2, renderLatestWidget: () => qo, renderPage: () => zo, renderWidget: () => Qo, searchLinkMultipleListener: () => Mn, sendEmail: () => Co, sendMessage: () => ui, serviceWorker: () => oi, setHasActivatedSW: () => li, storeToDatabase: () => te2, subscribedListeners: () => ci, unwrapContainers: () => ni, updateAccessToken: () => di, uploadAttachment: () => dt2, uploadFile: () => ut2, uploadImage: () => ht2, validDocumentFormats: () => lt2, validImageFormats: () => st2 });
  var i2 = n2(5020), r2 = n2(205), c2 = n2(2832), a2 = n2(6467), s2 = n2(9639), l2 = n2(9581), d2 = n2(3518), h2 = n2(1863), u2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function p2(e3, t3) {
    var n3 = arguments;
    return u2(this, void 0, void 0, (function* () {
      const o3 = yo.V.logfunction("GetAllConceptsByType", n3);
      try {
        var i3 = new URLSearchParams();
        i3.append("type", e3), i3.append("user_id", t3.toString());
        var r3 = (0, d2.Xr)("application/x-www-form-urlencoded");
        const n4 = yield fetch(l2.B.GetAllConceptsByTypeUrl(), { method: "POST", headers: r3, body: i3 });
        if (n4.ok) {
          const e4 = yield n4.json();
          for (var c3 = 0; c3 < e4.length; c3++) s2.I.AddConcept(e4[c3]);
        } else console.log("GetAllConceptsByType error", n4.status), (0, h2.ry)(n4);
      } catch (e4) {
        e4 instanceof Error ? console.log("GetAllConceptsByType error message: ", e4.message) : console.log("GetAllConceptsByType unexpected error: ", e4), (0, h2.Mb)(e4, l2.B.GetAllConceptsByTypeUrl()), (0, h2.ey)(o3, "GetAllConceptsByType", e4);
      }
    }));
  }
  var f2 = n2(8642), y2 = n2(9736), g2 = n2(8939), v2 = n2(2013), C2 = n2(8064), m2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function T2(e3, t3) {
    var n3 = arguments;
    return m2(this, arguments, void 0, (function* (e4, t4, o3 = 10, i3 = 1) {
      const r3 = yo.V.logfunction("GetCompositionList", n3);
      if (oi) {
        r3.serviceWorker = true;
        try {
          const n4 = yield ui("GetCompositionList", { compositionName: e4, userId: t4, inpage: o3, page: i3 });
          return yo.V.logUpdate(r3), n4.data;
        } catch (e5) {
          console.error("GetCompositionList sw error: ", e5), (0, h2.ey)(r3, "GetCompositionList", e5), vi(e5);
        }
      }
      let c3 = yield (0, v2.A)(e4), a3 = [];
      if (c3) {
        yield p2(e4, t4);
        let n4 = yield s2.I.GetConceptsByTypeIdAndUser(c3.id, t4), r4 = o3 * (i3 - 1), l3 = [];
        for (let e5 = r4; e5 < r4 + o3; e5++) n4[e5] && l3.push(n4[e5].id);
        yield (0, f2.Y)(l3);
        for (let e5 = r4; e5 < r4 + o3; e5++) if (n4[e5]) {
          let t5 = yield (0, g2.kx)(n4[e5].id);
          a3.push(t5);
        }
      }
      return yo.V.logUpdate(r3), a3;
    }));
  }
  function I2(e3, t3) {
    return m2(this, arguments, void 0, (function* (e4, t4, n3 = 10, o3 = 1) {
      let i3 = b2(e4, t4), r3 = T2(e4, t4), c3 = [];
      return Promise.race([i3, r3]).then(((e5) => {
        console.log("Promise result", e5), c3.push(...e5);
      })).catch(((e5) => {
        console.log("error in handling", e5);
      })), r3.then(((e5) => {
        console.log("This is the second promise result", e5), c3.push(...e5);
      })), c3;
    }));
  }
  function w2(e3, t3) {
    return m2(this, arguments, void 0, (function* (e4, t4, n3 = 10, o3 = 1) {
      if (oi) try {
        return (yield ui("GetCompositionListAllWithId", { compositionName: e4, userId: t4, inpage: n3, page: o3 })).data;
      } catch (e5) {
        console.error("GetCompositionListAllWithId sw error: ", e5), vi(e5);
      }
      let i3 = yield (0, C2.Ay)(e4), r3 = yield (0, v2.A)(e4), c3 = [], a3 = [], l3 = [], d3 = [];
      0 != i3.id && (a3 = yield y2.v.GetConceptsByTypeIdAndUser(i3.id, t4)), 0 != r3.id && (yield p2(e4, t4), d3 = yield s2.I.GetConceptsByTypeIdAndUser(r3.id, t4), c3 = d3);
      for (let e5 = 0; e5 < a3.length; e5++) {
        let t5 = false;
        for (let n4 = 0; n4 < d3.length; n4++) a3[e5].ghostId == d3[n4].ghostId && (t5 = true);
        t5 || l3.push(a3[e5]);
      }
      console.log("This is the all list", l3);
      let h3 = [];
      return h3 = yield (function(e5, t5) {
        return m2(this, arguments, void 0, (function* (e6, t6, n4 = 10, o4 = 1) {
          let i4 = [], r4 = n4 * (o4 - 1), c4 = [], a4 = t6.length;
          for (let t7 = r4; t7 < r4 + n4 - a4; t7++) e6[t7] && c4.push(e6[t7].id);
          for (let e7 = 0; e7 < t6.length; e7++) {
            let n5 = yield x2(t6[e7].id);
            i4.push(n5);
          }
          yield (0, f2.Y)(c4);
          for (let t7 = r4; t7 < r4 + n4 - a4; t7++) if (e6[t7]) {
            let n5 = yield (0, g2.RW)(e6[t7].id);
            i4.push(n5);
          }
          return i4;
        }));
      })(c3, l3, n3, o3), h3;
    }));
  }
  function k2(e3, t3) {
    return m2(this, arguments, void 0, (function* (e4, t4, n3 = 10, o3 = 1) {
      if (oi) try {
        return (yield ui("GetCompositionListWithId", { compositionName: e4, userId: t4, inpage: n3, page: o3 })).data;
      } catch (e5) {
        console.error("GetCompositionListWithId sw error: ", e5), vi(e5);
      }
      let i3 = yield (0, v2.A)(e4), r3 = [];
      if (i3) {
        yield p2(e4, t4);
        let c3 = yield s2.I.GetConceptsByTypeIdAndUser(i3.id, t4), a3 = n3 * (o3 - 1), l3 = [];
        for (let e5 = a3; e5 < a3 + n3; e5++) c3[e5] && l3.push(c3[e5].id);
        yield (0, f2.Y)(l3);
        for (let e5 = a3; e5 < a3 + n3; e5++) if (c3[e5]) {
          let t5 = yield (0, g2.RW)(c3[e5].id);
          r3.push(t5);
        }
      }
      return r3;
    }));
  }
  function N2(e3, t3) {
    return m2(this, arguments, void 0, (function* (e4, t4, n3 = 10, o3 = 1) {
      let i3 = yield (0, v2.w)(e4), r3 = [];
      if (i3) {
        yield p2(e4, t4);
        let c3 = yield s2.I.GetConceptsByTypeIdAndUser(i3.id, t4), a3 = n3 * (o3 - 1), l3 = [];
        for (let e5 = a3; e5 < a3 + n3; e5++) c3[e5] && l3.push(c3[e5].id);
        yield (0, f2.Y)(l3);
        for (let e5 = a3; e5 < a3 + n3; e5++) if (c3[e5]) {
          let t5 = yield (0, g2.RW)(c3[e5].id);
          r3.push(t5);
        }
      }
      return r3;
    }));
  }
  var A2 = n2(4864), L2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, S2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function G2(e3) {
    return S2(this, void 0, void 0, (function* () {
      var t3, n3;
      try {
        if (oi) try {
          return (yield ui("GetCompositionLocal", { id: e3 })).data;
        } catch (e4) {
          console.error("GetCompositionLocal error sw: ", e4), vi(e4);
        }
        let o3 = [], i3 = {};
        o3 = yield A2.G.GetConnectionsOfCompositionLocal(e3);
        let r3 = [];
        for (let e4 = 0; e4 < o3.length; e4++) r3.includes(o3[e4].ofTheConceptId) || r3.push(o3[e4].ofTheConceptId);
        let c3 = yield y2.v.GetConcept(e3);
        if (0 == c3.id) {
          let t4 = yield (function(e4) {
            var t5 = arguments;
            return L2(this, void 0, void 0, (function* () {
              const n4 = yo.V.logfunction("TranslateLocalToReal", t5);
              let o4 = (0, M2.o)();
              try {
                var i4 = (0, d2.ab)("application/x-www-form-urlencoded");
                const t6 = yield fetch(l2.B.GetRealConceptById(), { method: "POST", headers: i4, body: `id=${e4}` });
                if (t6.ok) return o4 = yield t6.json(), o4.id > 0 && s2.I.AddConcept(o4), o4;
                console.log("Error in Getting Translating concept Error", t6.status), (0, h2.ry)(t6), yo.V.logUpdate(n4);
              } catch (e5) {
                e5 instanceof Error ? console.log("Error in Getting Translating concept error message: ", e5) : console.log("Error in Getting Translating concept unexpected error: ", e5), (0, h2.Mb)(e5, l2.B.GetRealConceptById()), (0, h2.ey)(n4, "TranslateLocalToReal", e5);
              }
              return o4;
            }));
          })(e3);
          if (t4.id > 0) return yield (0, g2.Nj)(t4.id);
        }
        let a3 = yield B2(e3, o3, r3);
        return i3[null !== (n3 = null === (t3 = null == c3 ? void 0 : c3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : "top"] = a3, i3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  function x2(e3) {
    return S2(this, void 0, void 0, (function* () {
      var t3, n3;
      try {
        if (oi) try {
          return (yield ui("GetCompositionLocalWithId", { id: e3 })).data;
        } catch (e4) {
          console.error("GetCompositionLocalWithId error sw: ", e4), vi(e4);
        }
        let o3 = [], i3 = {}, r3 = {};
        o3 = yield A2.G.GetConnectionsOfCompositionLocal(e3);
        let c3 = [];
        for (let e4 = 0; e4 < o3.length; e4++) c3.includes(o3[e4].ofTheConceptId) || c3.push(o3[e4].ofTheConceptId);
        let a3 = yield y2.v.GetConcept(e3);
        if (0 != a3.id) {
          let r4 = yield B2(e3, o3, c3);
          i3[null !== (n3 = null === (t3 = null == a3 ? void 0 : a3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : "top"] = r4;
        }
        return r3.data = i3, r3.id = e3, r3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  function B2(e3, t3, n3) {
    return S2(this, arguments, void 0, (function* (e4, t4, n4, o3 = []) {
      var i3, r3, c3;
      let a3 = {}, s3 = [], l3 = yield y2.v.GetConcept(e4);
      if (0 != l3.id && null == l3.type) {
        let e5 = l3.typeId, t5 = yield y2.v.GetConcept(e5);
        l3.type = t5;
      }
      if (null === (i3 = null == l3 ? void 0 : l3.type) || void 0 === i3 ? void 0 : i3.characterValue, !n4.includes(e4)) return null == l3 ? void 0 : l3.characterValue;
      if (o3.includes(e4)) return "";
      o3.push(e4);
      for (let o4 = 0; o4 < t4.length; o4++) if (t4[o4].ofTheConceptId == e4) {
        let e5 = t4[o4].toTheConceptId, i4 = yield y2.v.GetConcept(e5);
        if (0 != i4.id && null == (null == i4 ? void 0 : i4.type)) {
          let e6 = i4.typeId, t5 = yield y2.v.GetConcept(e6);
          i4.type = t5;
        }
        let l4 = "the_", d3 = (null !== (c3 = null === (r3 = null == i4 ? void 0 : i4.type) || void 0 === r3 ? void 0 : r3.characterValue) && void 0 !== c3 ? c3 : "top").replace(l4, "");
        if (isNaN(Number(d3))) {
          if (d3) {
            const o5 = yield B2(e5, t4, n4);
            a3[d3] = o5;
          }
        } else {
          const o5 = yield B2(e5, t4, n4);
          s3[d3] = o5, a3 = s3;
        }
      }
      return a3;
    }));
  }
  var R2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function b2(e3, t3) {
    return R2(this, void 0, void 0, (function* () {
      if (oi) try {
        return (yield ui("GetCompositionListLocal", { compositionName: e3, userId: t3 })).data;
      } catch (e4) {
        console.error("GetCompositionListLocal error sw: ", e4), vi(e4);
      }
      try {
        let n3 = yield (0, C2.Ay)(e3), o3 = [];
        if (0 != n3.id) {
          let e4 = yield y2.v.GetConceptsByTypeIdAndUser(n3.id, t3);
          for (let t4 = 0; t4 < e4.length; t4++) {
            let n4 = yield G2(e4[t4].id);
            o3.push(n4);
          }
        }
        return o3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  function D2(e3, t3) {
    return R2(this, void 0, void 0, (function* () {
      if (oi) try {
        return (yield ui("GetCompositionListLocalWithId", { compositionName: e3, userId: t3 })).data;
      } catch (e4) {
        console.error("GetCompositionListLocalWithId error sw: ", e4), vi(e4);
      }
      try {
        let n3 = yield (0, C2.Ay)(e3), o3 = [];
        if (0 != n3.id) {
          let e4 = yield y2.v.GetConceptsByTypeIdAndUser(n3.id, t3);
          for (let t4 = 0; t4 < e4.length; t4++) {
            let n4 = yield x2(e4[t4].id);
            o3.push(n4);
          }
        }
        return o3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  var W2 = n2(2), F2 = n2(1218), E2 = n2(999), U2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function _2(e3, t3, n3) {
    var o3 = arguments;
    return U2(this, arguments, void 0, (function* (e4, t4, n4, i3 = 10, r3 = 1) {
      const c3 = yo.V.logfunction("GetConnectionOfTheConcept", o3);
      let a3 = [];
      try {
        if (oi) {
          c3.serviceWorker = true;
          try {
            const o5 = yield ui("GetConnectionOfTheConcept", { typeId: e4, ofTheConceptId: t4, userId: n4, inpage: i3, page: r3 });
            return yo.V.logUpdate(c3), o5.data;
          } catch (e5) {
            console.error("GetConnectionOfTheConcept sw error: ", e5), (0, h2.ey)(c3, "GetConnectionOfTheConcept", e5), vi(e5);
          }
        }
        let o4 = new URLSearchParams();
        o4.append("typeId", `${e4}`), o4.append("ofTheConceptId", `${t4}`), o4.append("userId", `${n4}`), o4.append("inpage", `${i3}`), o4.append("page", `${r3}`);
        let s3 = (0, d2.Xr)("application/x-www-form-urlencoded");
        const u3 = yield fetch(l2.B.GetAllConnectionsOfConceptUrl(), { method: "POST", headers: s3, body: o4 });
        return u3.ok ? a3 = yield u3.json() : ((0, h2.ey)(c3, "GetConnectionOfTheConcept", u3.status), (0, h2.ry)(u3), console.log("Get connection of concept error", u3.status)), yo.V.logUpdate(c3), a3;
      } catch (e5) {
        e5 instanceof Error ? console.log("Get connection of concept  error message: ", e5.message) : console.log("Get connection of concept unexpected error: ", e5), (0, h2.Mb)(e5, l2.B.GetAllConnectionsOfConceptUrl()), (0, h2.ey)(c3, "GetConnectionOfTheConcept", e5);
      }
    }));
  }
  var O2 = n2(2155), V2 = n2(442), M2 = n2(7282), P2 = n2(5976), j2 = n2(7273), H2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function $2(e3, t3, n3, o3) {
    return H2(this, arguments, void 0, (function* (e4, t4, n4, o4, i3 = 1, r3 = 4) {
      if (e4 > 0 && n4 > 0) {
        var c3 = t4, a3 = yield P2.p.getId(), s3 = new O2.N(a3, e4, n4, c3, o4, i3, r3);
        return e4 == n4 ? (s3.ofTheConceptId = 0, s3.toTheConceptId = 1, s3) : (s3.toUpdate = true, s3.isTemp = false, V2.Y.AddConnection(s3), s3);
      }
      throw new j2.z("cannot create connection because id are negative ", false, 400, "");
    }));
  }
  var J2 = n2(1838), z2 = n2(7876), q2 = n2(8407), Q2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function X2(e3, t3, n3) {
    return Q2(this, arguments, void 0, (function* (e4, t4, n4, o3 = false, i3 = false) {
      var r3, c3;
      if (oi) try {
        return (yield ui("CreateConnectionBetweenTwoConcepts", { ofTheConcept: e4, toTheConcept: t4, linker: n4, both: o3, count: i3 })).data;
      } catch (e5) {
        console.error("CreateConnectionBetweenTwoConcepts sw error: ", e5), vi(e5);
      }
      let a3 = e4.userId;
      if (o3) {
        let o4 = n4 + "_by", c4 = (null === (r3 = t4.type) || void 0 === r3 ? void 0 : r3.characterValue) + "_s_" + o4;
        i3 && (yield Y2(o4, t4, a3));
        let s4 = yield (0, q2.A)("connection", c4, false, 999, 999, 999), l4 = new O2.N(0, t4.id, e4.id, a3, s4.id, 1e3, 4);
        V2.Y.AddConnection(l4);
      }
      let s3 = n4 + "_s", l3 = (null === (c3 = e4.type) || void 0 === c3 ? void 0 : c3.characterValue) + "_s_" + s3;
      i3 && (yield Y2(s3, e4, a3));
      let d3 = yield (0, q2.A)("connection", l3, false, 999, 999, 999), h3 = new O2.N(0, e4.id, t4.id, a3, d3.id, 1e3, 4);
      return V2.Y.AddConnection(h3), h3;
    }));
  }
  function Y2(e3, t3) {
    return Q2(this, arguments, void 0, (function* (e4, t4, n3 = null) {
      var o3;
      let i3 = t4, r3 = null != n3 ? n3 : t4.userId, c3 = e4 + "_count", a3 = (null === (o3 = t4.type) || void 0 === o3 ? void 0 : o3.characterValue) + "_s_" + c3, s3 = yield (0, q2.A)("connection", a3, false, r3, 4, 999), l3 = yield _2(s3.id, t4.id, r3, 10, 1), d3 = [], h3 = (0, M2.o)();
      for (let e5 = 0; e5 < l3.length; e5++) {
        let t5 = yield (0, z2.A)(l3[e5].toTheConceptId);
        d3.push(t5);
      }
      if (d3.length < 1) h3 = yield (0, q2.A)("count", "1", false, r3, 4, 999);
      else {
        let e5 = d3[0], t5 = 0;
        try {
          t5 = Number(e5.characterValue);
        } catch (e6) {
          t5 = 0;
        }
        t5 += 1, h3 = yield (0, q2.A)("count", t5.toString(), false, r3, 4, 999);
        for (let e6 = 0; e6 < l3.length; e6++) (0, J2.m)(l3[e6].id);
      }
      let u3 = new O2.N(0, i3.id, h3.id, i3.userId, s3.id, 1e3, 4);
      yield V2.Y.AddConnection(u3);
    }));
  }
  function Z2(e3, t3, n3) {
    return Q2(this, arguments, void 0, (function* (e4, t4, n4, o3 = false, i3 = false) {
      var r3, c3;
      let a3 = e4.userId;
      if (o3) {
        let o4 = n4 + "_by", c4 = (null === (r3 = t4.type) || void 0 === r3 ? void 0 : r3.characterValue) + "_s_" + o4;
        i3 && (yield Y2(o4, t4, a3));
        let s4 = yield (0, q2.A)("connection", c4, false, 999, 999, 999), l4 = new O2.N(0, t4.id, e4.id, a3, s4.id, 1e3, 4);
        V2.Y.AddConnection(l4);
      }
      let s3 = n4 + "_s", l3 = (null === (c3 = e4.type) || void 0 === c3 ? void 0 : c3.characterValue) + "_s_" + s3;
      i3 && (yield Y2(s3, e4, a3));
      let d3 = yield (0, q2.A)("connection", l3, false, 999, 999, 999);
      return yield $2(e4.id, e4.userId, t4.id, d3.id, 1e3, 4);
    }));
  }
  var K2 = n2(5868), ee2 = (n2(3655), function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  });
  function te2(e3, t3) {
    const n3 = yo.V.logfunction("storeToDatabase", [e3, "noindexdb"]);
    yo.V.logUpdate(n3);
  }
  function ne2(e3, t3, n3) {
    return ee2(this, void 0, void 0, (function* () {
      const t4 = yo.V.logfunction("getFromDatabaseWithType", [e3, "noindexdb"]);
      yo.V.logUpdate(t4);
    }));
  }
  function oe2(e3) {
    return ee2(this, void 0, void 0, (function* () {
      const t3 = yo.V.logfunction("getObjectsFromIndexDb", [e3, "noindexdb"]);
      yo.V.logUpdate(t3);
    }));
  }
  var ie2 = n2(1666), re2 = n2(4402), ce2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function ae2(e3, t3) {
    var n3 = arguments;
    return ce2(this, arguments, void 0, (function* (e4, t4, o3 = 10, i3 = 1) {
      var r3;
      const c3 = yo.V.logfunction("GetLink", n3);
      if (oi) {
        c3.serviceWorker = true;
        try {
          const n4 = yield ui("GetLink", { id: e4, linker: t4, inpage: o3, page: i3 });
          return yo.V.logUpdate(c3), n4.data;
        } catch (e5) {
          console.error("GetLink sw error: ", e5), (0, h2.ey)(c3, "GetLink", e5), vi(e5);
        }
      }
      let a3 = [], s3 = yield (0, z2.A)(e4), l3 = (null === (r3 = s3.type) || void 0 === r3 ? void 0 : r3.characterValue) + "_s_" + t4, d3 = yield (0, re2.A)(l3, 16);
      if (d3.id > 0) {
        let e5 = yield _2(d3.id, s3.id, s3.userId, o3, i3), t5 = [];
        for (let n4 = 0; n4 < e5.length; n4++) t5.push(e5[n4].toTheConceptId);
        yield (0, f2.Y)(t5);
        for (let t6 = 0; t6 < e5.length; t6++) {
          let n4 = e5[t6].toTheConceptId, o4 = yield (0, z2.A)(n4), i4 = yield (0, g2.Ez)(o4.id);
          a3.push(i4);
        }
      }
      return yo.V.logUpdate(c3), a3;
    }));
  }
  function se2(e3, t3) {
    var n3 = arguments;
    return ce2(this, arguments, void 0, (function* (e4, t4, o3 = 10, i3 = 1) {
      var r3;
      const c3 = yo.V.logfunction("GetLinkRaw", n3);
      let a3 = [], s3 = yield (0, z2.A)(e4), l3 = (null === (r3 = s3.type) || void 0 === r3 ? void 0 : r3.characterValue) + "_s_" + t4, d3 = yield (0, re2.A)(l3, 16);
      if (d3.id > 0) {
        let e5 = yield _2(d3.id, s3.id, s3.userId, o3, i3), t5 = [];
        for (let n4 = 0; n4 < e5.length; n4++) t5.push(e5[n4].toTheConceptId);
        for (let t6 = 0; t6 < e5.length; t6++) {
          let n4 = e5[t6].toTheConceptId, o4 = yield (0, z2.A)(n4);
          a3.push(o4);
        }
      }
      return yo.V.logUpdate(c3), a3;
    }));
  }
  var le2 = n2(8357), de2 = n2(2212);
  class he2 {
    constructor(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3) {
      this.id = 0, this.isNew = false, this.userId = e3, this.data = `${t3}`, this.securityId = n3, this.securityUserId = o3, this.accessId = i3, this.accessUserId = r3, this.sessionId = c3, this.sessionUserId = a3, this.isNew = l3;
    }
  }
  class ue2 {
    constructor() {
      this.name = "character Repository";
    }
    static AddCharacter(e3) {
      this.characterData[e3.id] = e3;
    }
    static GetCharacter(e3) {
      for (var t3 = new he2(0, "0", 0, 0, 0, 0, 0, 0, "0", false), n3 = 0; n3 < this.characterData.length; n3++) this.characterData[n3].data == e3 && (t3 = this.characterData[n3]);
      return t3;
    }
  }
  ue2.characterData = [];
  class pe2 {
    constructor(e3, t3, n3, o3) {
      this.id = e3, this.userId = t3, this.referentId = n3, this.isNew = o3;
    }
  }
  var fe2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, ye2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function ge2(e3, t3, n3, o3, i3) {
    return ye2(this, void 0, void 0, (function* () {
      return new he2(t3, e3, n3, t3, o3, t3, i3, t3, "", false), yield (function() {
        return fe2(this, void 0, void 0, (function* () {
          var e4;
          const t4 = yo.V.logfunction("CreateTheCharacter", e4);
          try {
            if (0 == (e4 = ue2.GetCharacter(e4.data)).id) {
              var n4 = (0, d2.Xr)();
              const i4 = yield fetch(l2.B.CreateTheCharacterDataUrl(), { method: "POST", headers: n4, body: JSON.stringify(e4) });
              if (!i4.ok) throw (0, h2.ry)(i4), new Error(`Error! status: ${i4.status}`);
              const r3 = yield i4.json();
              var o4 = new he2(r3.userId, e4.data, 0, 0, 4, 4, 999, 999, "", false);
              return o4.id = r3.id, ue2.AddCharacter(o4), yo.V.logUpdate(t4), r3;
            }
            return new pe2(e4.id, e4.userId, 0, false);
          } catch (e5) {
            throw e5 instanceof Error ? console.log("create the character error message: ", e5.message) : console.log("create the character unexpected error: ", e5), (0, h2.ey)(t4, "CreateTheCharacter", e5), e5;
          }
        }));
      })();
    }));
  }
  var ve2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ce2(e3, t3, n3, o3, i3, r3, c3) {
    return ve2(this, void 0, void 0, (function* () {
      let a3 = yield (0, re2.A)(e3, o3), s3 = a3;
      return 0 == s3.id && (a3 = yield (0, de2.Ay)(e3, t3, n3, o3, i3, r3, c3), s3 = a3), s3;
    }));
  }
  var me2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, Te2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ie2(e3, t3, n3, o3) {
    var i3 = arguments;
    return Te2(this, void 0, void 0, (function* () {
      const r3 = yo.V.logfunction("MakeTheTypeConcept", i3);
      if (oi) {
        r3.serviceWorker = true;
        try {
          const i4 = yield ui("MakeTheTypeConcept", { typeString: e3, sessionId: t3, sessionUserId: n3, userId: o3 });
          return yo.V.logUpdate(r3), i4.data;
        } catch (e4) {
          console.error("MakeTheTypeConcept sw error: ", e4), (0, h2.ey)(r3, "MakeTheTypeConcept", e4), vi(e4);
        }
      }
      let c3 = yield (0, v2.A)(e3);
      if (c3 && (0 == c3.id || 0 == c3.userId)) {
        let i4 = (0, a2.f)(e3);
        if (i4.length > 0) if (i4[0] == e3) {
          let n4 = yield (function(e4, t4, n5, o4, i5, r4) {
            return me2(this, void 0, void 0, (function* () {
              let n6;
              if (1 == e4.length) {
                let i6 = e4.charCodeAt(0), c4 = 49;
                yield ge2(e4, t4, 999, o4, r4), n6 = Ce2(e4, t4, 4, c4, i6, o4, "the_character");
              } else {
                let i6 = yield ge2(e4, t4, 999, o4, r4);
                i6.isNew, n6 = yield Ce2(e4, t4, 4, 51, i6.id, o4, "the_characters");
              }
              return n6;
            }));
          })(e3, o3, 0, 999, 0, t3);
          c3 = n4;
        } else {
          let r4 = yield Ie2(i4[0], t3, n3, o3), a3 = yield Ie2(i4[1], t3, n3, o3);
          a3 && (c3 = yield (0, de2.N)(e3, o3, r4.id, a3.id, 999, 999, i4[1]));
        }
      }
      return yo.V.logUpdate(r3), c3;
    }));
  }
  var we2 = n2(8146), ke2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, Ne2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ae2(e3) {
    return Ne2(this, void 0, void 0, (function* () {
      const t3 = yo.V.logfunction("GetConceptByCharacterAndCategory", e3);
      let n3 = (0, M2.o)();
      if ("the" == e3) return n3.id = 1, n3.typeId = 5, n3.characterValue = "the", n3;
      let o3 = (0, a2.f)(e3);
      if (o3.length > 1) {
        let t4 = 1, i3 = yield Ae2(o3[0]);
        0 != i3.id && (t4 = i3.id), n3 = yield (function(e4, t5) {
          var n4 = arguments;
          return Ne2(this, void 0, void 0, (function* () {
            const o4 = yo.V.logfunction("GetConceptByCharacterAndCategoryFromMemory", n4);
            let i4 = yield s2.I.GetConceptByCharacterAndCategoryLocal(e4, t5);
            return 0 == i4.id && (i4 = yield (function(e5, t6) {
              var n5 = arguments;
              return ke2(this, void 0, void 0, (function* () {
                const o5 = yo.V.logfunction("GetConceptByCharacterAndCategoryDirectApi", n5);
                let i5 = (0, M2.o)();
                try {
                  var r3 = (0, d2.Xr)("application/x-www-form-urlencoded");
                  const n6 = yield fetch(l2.B.GetConceptByCharacterAndCategoryDirectUrl(), { method: "POST", headers: r3, body: `character_value=${e5}&category_id=${t6}` });
                  n6.ok ? (i5 = yield n6.json(), s2.I.AddConcept(i5)) : (console.log("This is the concept by category and character error", n6.status), (0, h2.ry)(n6)), yo.V.logUpdate(o5);
                } catch (e6) {
                  e6 instanceof Error ? console.log(" This is the concept by category and character error message: ", e6.message) : console.log(" This is the concept by category and character unexpected error: ", e6), (0, h2.Mb)(e6, l2.B.GetConceptByCharacterAndCategoryDirectUrl()), (0, h2.ey)(o5, "GetConceptByCharacterAndCategoryDirectApi", e6);
                }
                return i5;
              }));
            })(e4, t5)), yo.V.logUpdate(o4), i4;
          }));
        })(e3, t4);
      } else o3[0] == e3 && (n3 = yield (function(e4) {
        var t4 = arguments;
        return Ne2(this, void 0, void 0, (function* () {
          const n4 = yo.V.logfunction("GetConceptByCharacter", t4);
          let o4 = yield s2.I.GetConceptByCharacterAndTypeLocal(e4, 51);
          return 0 == o4.id && (o4 = yield (0, we2.Y)(e4)), yo.V.logUpdate(n4), o4;
        }));
      })(e3));
      return yo.V.logUpdate(t3), n3;
    }));
  }
  var Le2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Se2(e3, t3) {
    var n3 = arguments;
    return Le2(this, void 0, void 0, (function* () {
      const t4 = yo.V.logfunction("MakeTheTypeConceptApi", n3);
      let o3 = (0, M2.o)();
      try {
        if (o3 = yield Ae2(e3), 0 == o3.id || 4 == o3.typeId) {
          let n4 = (0, d2.Xr)("application/x-www-form-urlencoded");
          const i3 = yield fetch(l2.B.MakeTheTypeConceptUrl(), { method: "POST", headers: n4, body: `type=${e3}` });
          if (!i3.ok) throw (0, h2.ry)(i3), new Error(`Error! status: ${i3.status}`);
          o3 = yield i3.json(), yo.V.logUpdate(t4);
        }
      } catch (e4) {
        e4 instanceof Error ? console.log("Make The Type Concept Api error : ", e4.message) : console.log("Make The Type Concept Api error : ", e4), (0, h2.Mb)(e4, l2.B.MakeTheTypeConceptUrl()), (0, h2.ey)(t4, "MakeTheTypeConceptApi", e4);
      }
      return o3;
    }));
  }
  var Ge2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function xe2(e3) {
    var t3 = arguments;
    return Ge2(this, void 0, void 0, (function* () {
      yo.V.logfunction("GetAllLinkerConnectionsFromTheConcept", t3);
      var n3 = [];
      try {
        (/* @__PURE__ */ new Date()).getTime();
        var o3 = (0, d2.Xr)("application/x-www-form-urlencoded");
        const t4 = yield fetch(l2.B.GetAllLinkerConnectionOfConceptUrl() + `?conceptId=${e3}`, { method: "GET", headers: o3 });
        if (t4.ok) {
          const e4 = yield t4.json();
          for (var i3 = 0; i3 < e4.length; i3++) {
            var r3 = e4[i3];
            n3.push(r3);
          }
        } else console.log("Get all linker connection from the concepts error", "cannot get respone"), (0, h2.ry)(t4);
      } catch (e4) {
        e4 instanceof Error ? console.log("Get all linker connection from the concepts error: ", e4.message) : console.log("Get all linker connection from the concepts error(Unexpected): ", e4), (0, h2.Mb)(e4, l2.B.GetAllLinkerConnectionOfConceptUrl());
      }
      return n3;
    }));
  }
  var Be2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Re2(e3) {
    var t3 = arguments;
    return Be2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("GetAllLinkerConnectionsToTheConcept", t3);
      var o3 = [];
      try {
        (/* @__PURE__ */ new Date()).getTime();
        var i3 = (0, d2.Xr)("application/x-www-form-urlencoded");
        const t4 = yield fetch(l2.B.GetAllLinkerConnectionToConceptUrl() + `?conceptId=${e3}`, { method: "GET", headers: i3 });
        if (t4.ok) {
          const e4 = yield t4.json();
          for (var r3 = 0; r3 < e4.length; r3++) {
            var c3 = e4[r3];
            o3.push(c3);
          }
          yo.V.logUpdate(n3);
        } else console.log("Get all linker connection To the concepts error", "cannot get respone"), (0, h2.ry)(t4);
      } catch (e4) {
        e4 instanceof Error ? console.log("Get all linker connection To the concepts error: ", e4.message) : console.log("Get all linker connection To the concepts error(Unexpected): ", e4), (0, h2.Mb)(e4, l2.B.GetAllLinkerConnectionToConceptUrl()), (0, h2.ey)(n3, "GetAllLinkerConnectionsToTheConcept", e4);
      }
      return o3;
    }));
  }
  var be2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function De2(e3) {
    var t3 = arguments;
    return be2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("GetLinkerConnectionFromConcepts", t3);
      let o3 = yield xe2(e3);
      for (let e4 = 0; e4 < o3.length; e4++) {
        let t4 = o3[e4], n4 = t4.typeId, i3 = yield (0, z2.A)(n4);
        t4.type = i3;
      }
      return yo.V.logUpdate(n3), o3;
    }));
  }
  function We2(e3) {
    var t3 = arguments;
    return be2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("GetLinkerConnectionToConcepts", t3);
      let o3 = yield Re2(e3);
      for (let e4 = 0; e4 < o3.length; e4++) {
        let t4 = o3[e4], n4 = t4.typeId, i3 = yield (0, z2.A)(n4);
        t4.type = i3;
      }
      return yo.V.logUpdate(n3), o3;
    }));
  }
  var Fe2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, Ee2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, Ue2 = n2(6963), _e2 = n2(2202), Oe2 = n2(5457), Ve2 = n2(991), Me2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Pe2(e3) {
    var t3 = arguments;
    return Me2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("DeleteConceptById", t3);
      if (oi) try {
        return (yield ui("DeleteConceptById", { id: e3 })).data;
      } catch (e4) {
        console.error("DeleteConceptById sw error: ", e4), vi(e4);
      }
      if (e3 > 0) {
        var o3 = yield s2.I.GetConcept(e3);
        if (o3.id > 0) {
          var i3 = o3.typeId, r3 = o3.characterValue;
          yield Oe2.c.removeTypeConcept(i3, e3), yield Ue2.f.removeNodeByCharacter(r3, e3), yield (function(e4) {
            var t4 = arguments;
            return Ee2(this, void 0, void 0, (function* () {
              const n4 = yo.V.logfunction("DeleteTheConcept", t4);
              try {
                const t5 = new FormData();
                t5.append("id", e4.toString());
                let o4 = (0, d2.BZ)();
                const i4 = yield fetch(l2.B.DeleteConceptUrl(), { method: "POST", headers: o4, body: t5 });
                i4.ok || (console.log("Delete concept error", i4.status), (0, h2.ry)(i4)), yo.V.logUpdate(n4);
              } catch (e5) {
                e5 instanceof Error ? console.log("Delete concept error message: ", e5.message) : console.log("Delete concept unexpected error: ", e5), (0, h2.Mb)(e5, l2.B.DeleteConceptUrl()), (0, h2.ey)(n4, "DeleteTheConcept", e5);
              }
            }));
          })(e3), yield _e2.W.removeNodeFromTree(e3), yield Ve2.H.removeNodeFromTree(e3);
        }
      } else y2.v.RemoveConceptById(e3);
      yo.V.logUpdate(n3);
    }));
  }
  function je2(e3) {
    return Me2(this, void 0, void 0, (function* () {
      if (oi) try {
        return (yield ui("DeleteUser", { id: e3 })).data;
      } catch (e4) {
        console.error("DeleteUser sw error: ", e4), vi(e4);
      }
      e3 > 0 ? (function(e4) {
        var t3 = arguments;
        Fe2(this, void 0, void 0, (function* () {
          const n3 = yo.V.logfunction("DeleteUserInBackend", t3);
          try {
            var o3 = (0, d2.ab)("application/json", "");
            let t4 = l2.B.DeleteUserUrl();
            t4 = t4 + "?conceptId=" + e4 + "&apiKey=freeschema";
            const i3 = yield fetch(t4, { method: "POST", headers: o3 });
            if (i3.ok) {
              let e5 = yield i3.json(), t5 = Number(e5.data);
              return console.log("this is the delete email concept", t5), Pe2(t5), yo.V.logUpdate(n3), t5;
            }
            throw (0, h2.ry)(i3), new Error(`Delete composition Error! status: ${i3.status}`);
          } catch (e5) {
            e5 instanceof Error ? console.log("Delete composition error message: ", e5.message) : console.log("Delete composition unexpected error: ", e5), (0, h2.Mb)(e5, l2.B.DeleteConceptUrl()), (0, h2.ey)(n3, "DeleteUserInBackend", e5);
          }
        }));
      })(e3) : y2.v.RemoveConceptById(e3);
    }));
  }
  var He2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function $e2(e3, t3) {
    return He2(this, void 0, void 0, (function* () {
      try {
        const n3 = new Headers();
        n3.append("Authorization", "Bearer " + t3);
        const o3 = new FormData();
        o3.append("id", e3.toString());
        const i3 = yield fetch(l2.B.DeleteConceptUrl(), { method: "POST", body: o3, headers: n3 });
        if (!i3.ok) throw (0, h2.ry)(i3), new Error(`Delete composition Error! status: ${i3.status}`);
      } catch (e4) {
        e4 instanceof Error ? console.log("Delete composition error message: ", e4.message) : console.log("Delete composition unexpected error: ", e4), (0, h2.Mb)(e4, l2.B.DeleteConceptUrl());
      }
    }));
  }
  var Je2 = n2(1735), ze2 = n2(8286), qe2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, Qe2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Xe2(e3) {
    var t3 = arguments;
    return Qe2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("GetConnectionById", t3);
      if (console.log("AccessTracker activation status from GetConnectionById"), true === Je2.J.activateStatus) try {
        Je2.J.incrementConnection(e3);
      } catch (e4) {
        console.error("Error adding connection in access tracker"), yo.V.log("ERROR", "Error Adding Connection");
      }
      if (oi) try {
        return (yield ui("GetConnectionById", { id: e3 })).data;
      } catch (e4) {
        console.error("GetConnectionById sw error: ", e4), vi(e4);
      }
      let o3 = yield ze2.d.GetConnection(e3);
      if ((null == o3 || 0 == o3.id) && null != e3 && null != e3) {
        let t4 = yield (function(e4) {
          var t5 = arguments;
          return qe2(this, void 0, void 0, (function* () {
            const n4 = yo.V.logfunction("GetConnection", t5);
            let o4 = yield ze2.d.GetConnection(e4);
            try {
              if (0 != o4.id) return o4;
              {
                let t6 = (0, d2.Xr)("application/x-www-form-urlencoded");
                const i3 = new FormData();
                i3.append("id", e4.toString());
                const r3 = yield fetch(l2.B.GetConnectionUrl(), { method: "POST", headers: t6, body: i3 });
                return r3.ok ? (o4 = yield r3.json(), ze2.d.AddConnection(o4)) : ((0, h2.ry)(r3), console.log("Get Connection Error", r3.status)), yo.V.logUpdate(n4), o4;
              }
            } catch (e5) {
              e5 instanceof Error ? console.log("Get Connection error message: ", e5.message) : console.log("Get Connection unexpected error: ", e5), (0, h2.Mb)(e5, l2.B.GetConnectionUrl()), (0, h2.ey)(n4, "GetConnection", e5);
            }
          }));
        })(e3);
        o3 = t4;
      }
      return yo.V.logUpdate(n3), o3;
    }));
  }
  var Ye2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ze2(e3, t3, n3) {
    return Ye2(this, arguments, void 0, (function* (e4, t4, n4, o3 = 4, i3 = 999) {
      const r3 = yo.V.logfunction("MakeTheTimestamp");
      if (oi) {
        r3.serviceWorker = true;
        try {
          const c4 = yield ui("MakeTheTimestamp", { type: e4, referent: t4, userId: n4, accessId: o3, sessionInformationId: i3 });
          return yo.V.logUpdate(r3), c4.data;
        } catch (e5) {
          console.error("MakeTheTimestamp sw error: ", e5), (0, h2.ey)(r3, "MakeTheTimestamp", e5), vi(e5);
        }
      }
      let c3, a3 = "", s3 = e4.startsWith("the_"), l3 = (0, M2.o)();
      return a3 = s3 ? e4 : "the_" + e4, l3 = yield Se2(a3, n4), c3 = yield Ce2(t4, n4, 4, l3.id, 0, o3, a3), yo.V.logUpdate(r3), c3;
    }));
  }
  class Ke2 {
    constructor() {
      this.composition = 0, this.type = "", this.linker = "", this.inpage = 10, this.page = 1, this.listLinkers = [], this.fullLinkers = [], this.textSearch = "", this.logic = "or", this.reverse = false, this.doFilter = false, this.filterSearches = [], this.selectors = [], this.ofCompositions = [];
    }
  }
  var et2 = n2(6687), tt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function nt2() {
    var e3 = arguments;
    return tt2(this, arguments, void 0, (function* (t3 = 0, n3 = [], o3 = "") {
      const i3 = yo.V.logfunction("RecursiveSearchApi", e3);
      let r3 = [];
      try {
        if (oi) {
          i3.serviceWorker = true;
          try {
            const e5 = yield ui("RecursiveSearchApi", { composition: t3, listLinkers: n3, textSearch: o3 });
            return yo.V.logUpdate(i3), e5.data;
          } catch (e5) {
            console.error("RecursiveSearchApi sw error: ", e5), (0, h2.ey)(i3, "RecursiveSearchApi", e5), vi(e5);
          }
        }
        let e4 = new Ke2();
        e4.composition = t3, e4.listLinkers = n3, e4.textSearch = o3;
        let c3 = JSON.stringify(e4), a3 = (0, d2.Xr)();
        const s3 = yield fetch(l2.B.RecursiveSearchUrl(), { method: "POST", headers: a3, body: c3 });
        if (s3.ok) {
          const e5 = yield s3.json();
          let t4 = e5.compositionIds, n4 = e5.internalConnections;
          e5.externalConnections, r3 = yield (0, et2.p8)(t4, n4);
        } else console.log("recursive search error ", s3.status), (0, h2.ey)(i3, "RecursiveSearchApi", s3.status), (0, h2.ry)(s3);
        yo.V.logUpdate(i3);
      } catch (e4) {
        e4 instanceof Error ? console.log("recursive search error message: ", e4.message) : console.log("recursive search unexpected error: ", e4), (0, h2.ey)(i3, "RecursiveSearchApi", e4), (0, h2.Mb)(e4, l2.B.RecursiveSearchUrl());
      }
      return r3;
    }));
  }
  function ot2() {
    var e3 = arguments;
    return tt2(this, arguments, void 0, (function* (t3 = 0, n3 = [], o3 = "") {
      const i3 = yo.V.logfunction("RecursiveSearchApiWithInternalConnections", e3);
      let r3 = [];
      try {
        if (oi) {
          i3.serviceWorker = true;
          try {
            const e5 = yield ui("RecursiveSearchApiWithInternalConnections", { composition: t3, listLinkers: n3, textSearch: o3 });
            return yo.V.logUpdate(i3), e5.data;
          } catch (e5) {
            console.error("RecursiveSearchApiWithInternalConnections sw error: ", e5), (0, h2.ey)(i3, "RecursiveSearchApiWithInternalConnections", e5), vi(e5);
          }
        }
        let e4 = new Ke2();
        e4.composition = t3, e4.listLinkers = n3, e4.textSearch = o3;
        let c3 = JSON.stringify(e4), a3 = (0, d2.Xr)();
        const s3 = yield fetch(l2.B.RecursiveSearchUrl(), { method: "POST", headers: a3, body: c3 });
        if (s3.ok) {
          const e5 = yield s3.json();
          let t4 = e5.compositionIds, n4 = e5.internalConnections;
          e5.externalConnections, r3 = yield (0, et2.km)(t4, n4), yo.V.logUpdate(i3);
        } else console.log("recursive search error ", s3.status), (0, h2.ey)(i3, "GetCompositionConnectionsBetweenTwoConcepts", s3.status), (0, h2.ry)(s3);
      } catch (e4) {
        e4 instanceof Error ? console.log("recursive search error message: ", e4.message) : console.log("recursive search unexpected error: ", e4), (0, h2.ey)(i3, "GetCompositionConnectionsBetweenTwoConcepts", e4), (0, h2.Mb)(e4, l2.B.RecursiveSearchUrl());
      }
      return r3;
    }));
  }
  function it2() {
    var e3 = arguments;
    return tt2(this, arguments, void 0, (function* (t3 = 0, n3 = [], o3 = "") {
      const i3 = yo.V.logfunction("RecursiveSearchApiRaw", e3);
      try {
        if (oi) {
          i3.serviceWorker = true;
          try {
            const e5 = yield ui("RecursiveSearchApiRaw", { composition: t3, listLinkers: n3, textSearch: o3 });
            return yo.V.logUpdate(i3), e5.data;
          } catch (e5) {
            console.error("RecursiveSearchApiRaw sw error: ", e5), (0, h2.ey)(i3, "RecursiveSearchApiRaw", e5), vi(e5);
          }
        }
        let e4 = new Ke2();
        e4.composition = t3, e4.listLinkers = n3, e4.textSearch = o3;
        let r3 = JSON.stringify(e4), c3 = (0, d2.Xr)();
        const a3 = yield fetch(l2.B.RecursiveSearchUrl(), { method: "POST", headers: c3, body: r3 });
        if (a3.ok) {
          const e5 = yield a3.json();
          return e5.compositionIds, e5.internalConnections, e5.externalConnections, yo.V.logUpdate(i3), e5;
        }
        return console.log("recursive search error ", a3.status), (0, h2.ey)(i3, "RecursiveSearchApiRaw", a3.status), (0, h2.ry)(a3), yo.V.logUpdate(i3), [];
      } catch (e4) {
        e4 instanceof Error ? console.log("recursive search error message: ", e4.message) : console.log("recursive search unexpected error: ", e4), (0, h2.ey)(i3, "RecursiveSearchApiRaw", e4), (0, h2.Mb)(e4, l2.B.RecursiveSearchUrl());
      }
    }));
  }
  function rt2() {
    var e3 = arguments;
    return tt2(this, arguments, void 0, (function* (t3 = 0, n3 = [], o3 = "") {
      const i3 = yo.V.logfunction("RecursiveSearchApiRawFullLinker", e3);
      try {
        if (oi) {
          i3.serviceWorker = true;
          try {
            const e5 = yield ui("RecursiveSearchApiRawFullLinker", { composition: t3, fullLinkers: n3, textSearch: o3 });
            return yo.V.logUpdate(i3), e5.data;
          } catch (e5) {
            console.error("RecursiveSearchApiRawFullLinker sw error: ", e5), (0, h2.ey)(i3, "RecursiveSearchApiRawFullLinker", e5), vi(e5);
          }
        }
        let e4 = new Ke2();
        e4.composition = t3, e4.fullLinkers = n3, e4.textSearch = o3;
        let r3 = JSON.stringify(e4), c3 = (0, d2.Xr)();
        const a3 = yield fetch(l2.B.RecursiveSearchUrl(), { method: "POST", headers: c3, body: r3 });
        if (a3.ok) {
          const e5 = yield a3.json();
          return e5.compositionIds, e5.internalConnections, e5.externalConnections, yo.V.logUpdate(i3), e5;
        }
        return console.log("recursive search error ", a3.status), (0, h2.ey)(i3, "RecursiveSearchApiRawFullLinker", a3.status), (0, h2.ry)(a3), yo.V.logUpdate(i3), [];
      } catch (e4) {
        e4 instanceof Error ? console.log("recursive search error message: ", e4.message) : console.log("recursive search unexpected error: ", e4), (0, h2.Mb)(e4, l2.B.RecursiveSearchUrl()), (0, h2.ey)(i3, "RecursiveSearchApiRawFullLinker", e4);
      }
    }));
  }
  function ct2() {
    var e3 = arguments;
    return tt2(this, arguments, void 0, (function* (t3 = 0, n3 = [], o3 = "") {
      const i3 = yo.V.logfunction("RecursiveSearchApiRawFullLinker", e3);
      try {
        if (oi) try {
          i3.serviceWorker = true;
          const e5 = yield ui("RecursiveSearchApiNewRawFullLinker", { composition: t3, fullLinkers: n3, textSearch: o3 });
          return yo.V.logUpdate(i3), e5.data;
        } catch (e5) {
          console.error("RecursiveSearchApiNewRawFullLinker sw error: ", e5), (0, h2.ey)(i3, "RecursiveSearchApiNewRawFullLinker", e5), vi(e5);
        }
        let e4 = new Ke2();
        e4.composition = t3, e4.fullLinkers = n3, e4.textSearch = o3;
        let r3 = JSON.stringify(e4), c3 = (0, d2.Xr)();
        const a3 = yield fetch(l2.B.RecursiveSearchUrl(), { method: "POST", headers: c3, body: r3 });
        if (a3.ok) {
          const e5 = yield a3.json();
          return e5.compositionIds, e5.internalConnections, e5.externalConnections, yo.V.logUpdate(i3), e5;
        }
        return console.log("recursive search error ", a3.status), (0, h2.ey)(i3, "RecursiveSearchApiNewRawFullLinker", a3.status), (0, h2.ry)(a3), yo.V.logUpdate(i3), [];
      } catch (e4) {
        e4 instanceof Error ? console.log("recursive search error message: ", e4.message) : console.log("recursive search unexpected error: ", e4), (0, h2.Mb)(e4, l2.B.RecursiveSearchUrl()), (0, h2.ey)(i3, "RecursiveSearchApiNewRawFullLinker", e4);
      }
    }));
  }
  var at2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  const st2 = ["image/jpeg", "image/jpg", "image/png", "image/webp"], lt2 = ["application/msword", "application/vnd.ms-excel", "application/vnd.ms-powerpoint", "text/plain", "application/pdf"];
  function dt2(e3, t3) {
    return at2(this, void 0, void 0, (function* () {
      const n3 = yo.V.logfunction("uploadAttachment");
      try {
        console.log("File Type", e3.type);
        const o3 = new FormData();
        let i3;
        if (lt2.includes(e3.type)) o3.append("file", e3, e3.name), i3 = yield ut2(o3, t3);
        else {
          if (!st2.includes(e3.type)) return { message: "Invalid File Format", success: false };
          o3.append("image", e3, e3.name), i3 = yield ht2(o3, t3);
        }
        return (null == i3 ? void 0 : i3.data) ? (yo.V.logUpdate(n3), { message: "Upload Success", success: true, url: i3.data }) : { message: "File Upload Failed", success: false };
      } catch (e4) {
        throw console.error(e4), (0, h2.ey)(n3, "uploadAttachment", e4), e4;
      }
    }));
  }
  function ht2(e3) {
    return at2(this, arguments, void 0, (function* (e4, t3 = "") {
      const n3 = yo.V.logfunction("uploadImage");
      try {
        const o3 = yield fetch(l2.B.uploadImageUrl(), { method: "POST", body: e4, headers: { Authorization: `Bearer ${t3}` } });
        if (!o3.ok) {
          const e5 = o3.headers.get("content-type");
          e5 && e5.includes("text/plain") && console.info(null == o3 ? void 0 : o3.text());
          const t4 = yield null == o3 ? void 0 : o3.text();
          return console.error(`${o3.status} ${t4}`), yo.V.logUpdate(n3), null;
        }
        return yield o3.json();
      } catch (e5) {
        return console.error(e5), (0, h2.ey)(n3, "uploadImage", e5), null;
      }
    }));
  }
  function ut2(e3) {
    return at2(this, arguments, void 0, (function* (e4, t3 = "") {
      const n3 = yo.V.logfunction("uploadFile");
      try {
        const o3 = yield fetch(l2.B.uploadFileUrl(), { method: "POST", body: e4, headers: { Authorization: `Bearer ${t3}` } });
        if (!o3.ok) {
          const e5 = o3.headers.get("content-type");
          e5 && e5.includes("text/plain") && console.info(o3.text());
          const t4 = yield o3.text();
          return console.error(`${o3.status} ${t4}`), null;
        }
        return yo.V.logUpdate(n3), yield o3.json();
      } catch (e5) {
        return console.error(e5), (0, h2.ey)(n3, "uploadFile", e5), null;
      }
    }));
  }
  var pt2 = n2(1239), ft2 = n2(7467), yt2 = n2(3278), gt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function vt2(e3, t3) {
    var n3 = arguments;
    return gt2(this, void 0, void 0, (function* () {
      const o3 = yo.V.logfunction("LoginToBackend", n3);
      try {
        let n4 = { email: e3, password: t3 }, i3 = new Headers();
        i3.append("Content-Type", "application/json");
        let r3 = JSON.stringify(n4);
        const c3 = yield fetch(l2.B.LoginUrl(), { method: "POST", headers: i3, body: r3 }), a3 = yield c3.json();
        if (c3.ok) return yt2.b.BearerAccessToken = a3.data.token, yo.V.logUpdate(o3), a3;
        console.log("Login tsccs error message: ", c3.status), (0, h2.ER)(c3, a3);
      } catch (e4) {
        e4 instanceof Error ? console.log("Login tsccs error message: ", e4.message) : console.log(" Login tsccs  unexpected error: ", e4), (0, h2.Mb)(e4, l2.B.LoginUrl()), (0, h2.ey)(o3, "LoginToBackend", e4);
      }
    }));
  }
  var Ct2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function mt2(e3) {
    return Ct2(this, void 0, void 0, (function* () {
      const t3 = yield (function() {
        return Ct2(this, arguments, void 0, (function* (e4 = "", t4 = {}) {
          let n3 = { message: "success", status: false, statusCode: 200, data: "cannot signup" };
          try {
            const o3 = yield fetch(e4, { method: "POST", mode: "cors", cache: "no-cache", credentials: "same-origin", headers: { "Content-Type": "application/json" }, redirect: "follow", referrerPolicy: "no-referrer", body: JSON.stringify(t4) }), i3 = yield o3.json();
            return o3.ok ? n3 = { message: "success", status: true, statusCode: 200, data: i3 } : (0, h2.ER)(o3, i3), n3;
          } catch (t5) {
            console.log("Signup Error: ", t5), (0, h2.Mb)(t5, e4);
          }
        }));
      })(l2.B.SignupUrl(), e3);
      return t3;
    }));
  }
  function Tt2(e3) {
    return Ct2(this, void 0, void 0, (function* () {
      const t3 = l2.B.NODE_URL, n3 = yield fetch(`${t3}/api/v1/entity/signup`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(e3) });
      if (n3.ok) return n3.json();
      if (404 === n3.status) throw new Error("404, Not found");
      if (500 === n3.status) throw new Error("500, internal server error");
      throw new Error(n3.status);
    }));
  }
  var It2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function wt2(e3) {
    return It2(this, void 0, void 0, (function* () {
      const t3 = JSON.stringify({ email: e3.email, password: e3.password });
      let n3 = { message: "success", status: false, statusCode: 200, data: "" };
      const o3 = new Headers();
      o3.append("Content-Type", "application/json");
      const i3 = l2.B.LoginUrl();
      try {
        const e4 = yield fetch(i3, { method: "POST", headers: o3, body: t3, redirect: "follow" }), r3 = yield e4.json();
        return e4.ok ? n3 = { message: "success", status: true, statusCode: 200, data: null == r3 ? void 0 : r3.data } : (0, h2.ER)(e4, r3), n3;
      } catch (e4) {
        console.log("Sign in api error", e4), (0, h2.Mb)(e4, i3);
      }
    }));
  }
  var kt2 = n2(9934), Nt2 = n2(4485);
  function At2(e3 = [], t3) {
    Array.isArray(e3) && e3.splice(e3.findIndex((function(e4) {
      return e4.id === t3.id;
    })), 1);
  }
  function Lt2(e3 = [], t3) {
    Array.isArray(e3) && e3.splice(e3.findIndex((function(e4) {
      return e4.id === t3.id;
    })), 1);
  }
  class St2 {
    constructor(e3, t3, n3, o3) {
      this.expiryTime = new Date(Date.now() + 6e5), this.height = 1, this.key = e3, this.value = t3, this.leftNode = n3, this.rightNode = o3;
    }
    isValid() {
      const e3 = new Date(Date.now());
      return !(this.expiryTime < e3 && (xt2.removeNodeFromTree(this.key), 1));
    }
    saveToCache(e3) {
      this.value.cached = e3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      const o3 = t3.leftNode, i3 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return this.isValid(), e3;
        t3.rightNode = this.addNode(e3, i3, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      const r3 = this.getBalanceFactor(t3);
      if (r3 > 1 && t3.leftNode) {
        if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
        if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r3 < -1 && t3.rightNode) {
        if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
        if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return this.isValid(), t3;
    }
    rightRotate(e3) {
      if (e3) {
        const t3 = e3.leftNode;
        if (t3) {
          const n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        const t3 = e3.rightNode;
        if (t3) {
          const n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key && t3.isValid() ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (null == e3.leftNode) {
        const t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        const t4 = e3.leftNode;
        return e3 = null, t4;
      }
      {
        const t4 = this.inOrderSuccessor(e3.rightNode);
        return e3.value = t4.value, e3.key = t4.key, e3.rightNode = this.removeNode(e3.rightNode, t4.key), e3;
      }
    }
    countNodeBelow(e3) {
      return null == e3 ? 0 : 1 + this.countNodeBelow(e3.leftNode) + this.countNodeBelow(e3.rightNode);
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
  var Gt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class xt2 {
    static addNodeToTree(e3) {
      if (null == this.root) return this.root = e3, this.root;
      this.root = this.root.addNode(e3, this.root, this.root.height);
    }
    static addCompositionToTree(e3) {
      const t3 = new St2(e3.id, e3, null, null);
      this.addNodeToTree(t3);
    }
    static getNodeFromTree(e3) {
      return Gt2(this, void 0, void 0, (function* () {
        return this.root ? this.root.getFromNode(e3, this.root) : null;
      }));
    }
    static removeNodeFromTree(e3) {
      return Gt2(this, void 0, void 0, (function* () {
        this.root && (this.root = this.root.removeNode(this.root, e3));
      }));
    }
    static countNumberOfNodes() {
      return this.root ? this.root.countNodeBelow(this.root) : 0;
    }
  }
  xt2.root = null;
  var Bt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Rt2(e3, t3, n3, o3) {
    return Bt2(this, arguments, void 0, (function* (e4, t4, n4, o4, i3 = []) {
      var r3, c3;
      let a3 = {};
      const l3 = [];
      if (0 == e4) return "";
      let d3 = bt2(n4, e4);
      if (null != d3 && 0 != d3.id || null == e4 || null == e4 || (d3 = yield (0, z2.A)(e4)), 0 != d3.id && null == d3.type) {
        const e5 = d3.typeId;
        let t5 = bt2(n4, e5);
        d3.type = t5, null == t5 && null != e5 && null != e5 && (t5 = yield (0, z2.A)(e5), d3.type = t5);
      }
      if (!o4.includes(e4)) return null == d3 ? void 0 : d3.characterValue;
      if (i3.includes(e4)) return "";
      i3.push(e4);
      for (let d4 = 0; d4 < t4.length; d4++) if (t4[d4].ofTheConceptId == e4) {
        const h3 = t4[d4].toTheConceptId;
        if (o4.includes(e4)) {
          let e5 = bt2(n4, h3);
          if (null != e5 && 0 != e5.id || null == h3 || null == h3 || (e5 = yield (0, z2.A)(h3)), 0 != e5.id && null == (null == e5 ? void 0 : e5.type)) {
            const t5 = e5.typeId;
            let n5 = yield s2.I.GetConcept(t5);
            e5.type = n5, null == n5 && null != t5 && null != t5 && (n5 = yield (0, z2.A)(t5), e5.type = n5);
          }
          const d5 = "the_", u3 = (null !== (c3 = null === (r3 = null == e5 ? void 0 : e5.type) || void 0 === r3 ? void 0 : r3.characterValue) && void 0 !== c3 ? c3 : "").replace(d5, "");
          if (isNaN(Number(u3))) {
            if (u3) {
              const e6 = yield Rt2(h3, t4, n4, o4, i3);
              a3[u3] = e6;
            }
          } else {
            const e6 = yield Rt2(h3, t4, n4, o4, i3);
            l3[u3] = e6, a3 = l3;
          }
        }
      }
      return a3;
    }));
  }
  function bt2(e3, t3) {
    let n3 = (0, M2.o)();
    for (let o3 = 0; o3 < e3.length; o3++) if (t3 == e3[o3].id) return n3 = e3[o3], n3;
    return n3;
  }
  class Dt2 {
    constructor() {
      this.id = 0, this.mainConcept = (0, M2.o)(), this.connections = [], this.concepts = [], this.subcompositions = [], this.cached = {};
    }
    updateCache() {
      return e3 = this, t3 = void 0, o3 = function* () {
        if (0 == this.mainConcept.id) for (let e4 = 0; e4 < this.concepts.length; e4++) this.concepts[e4].id == this.id && (this.mainConcept = this.concepts[e4]);
        this.cached = yield Rt2(this.id, this.connections, this.concepts, this.subcompositions, []);
      }, new ((n3 = void 0) || (n3 = Promise))((function(i3, r3) {
        function c3(e4) {
          try {
            s3(o3.next(e4));
          } catch (e5) {
            r3(e5);
          }
        }
        function a3(e4) {
          try {
            s3(o3.throw(e4));
          } catch (e5) {
            r3(e5);
          }
        }
        function s3(e4) {
          var t4;
          e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
            e5(t4);
          }))).then(c3, a3);
        }
        s3((o3 = o3.apply(e3, t3 || [])).next());
      }));
      var e3, t3, n3, o3;
    }
    UpdateAcrossDistributedSystem() {
      var e3, t3;
      try {
        0 != this.id && (t3 = null === (e3 = this.id) || void 0 === e3 ? void 0 : e3.toString(), l2.B.MQTT_CONNECTION && l2.B.MQTT_CONNECTION.publish("compositionUpdate", t3));
      } catch (e4) {
        console.log("Error while publishing message", e4);
      }
    }
    isUpdating() {
      this.UpdateAcrossDistributedSystem();
    }
    GetDataCache() {
      var e3, t3, n3;
      const o3 = {};
      o3[null !== (n3 = null === (t3 = null === (e3 = this.mainConcept) || void 0 === e3 ? void 0 : e3.type) || void 0 === t3 ? void 0 : t3.characterValue) && void 0 !== n3 ? n3 : ""] = this.cached;
      const i3 = {};
      return i3.data = o3, i3.id = this.id, i3;
    }
  }
  var Wt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ft2(e3) {
    return Wt2(this, arguments, void 0, (function* (e4, t3 = null, n3 = null, o3 = null, i3 = null, r3 = null, c3 = null, a3 = null) {
      const s3 = null != i3 ? i3 : 999, l3 = null != r3 ? r3 : 4, d3 = null != c3 ? c3 : 999;
      let h3 = null != o3 ? o3 : 0, u3 = (0, M2.o)();
      null == a3 && (a3 = new Dt2());
      for (const o4 in e4) if ("object" == typeof e4[o4] || Array.isArray(e4[o4])) {
        const p3 = yield (0, q2.A)(o4, "", true, s3, l3, d3);
        if (null == t3 && null == n3) {
          let t4 = h3;
          u3 = p3, t4 = p3.id, h3 = p3.id, a3.concepts.push(p3), a3.id = p3.id, yield Ft2(e4[o4], p3.id, p3.userId, t4, i3, r3, c3, a3);
        } else {
          const s4 = null != t3 ? t3 : 999, l4 = null != n3 ? n3 : 999, d4 = h3;
          u3 = p3, a3.concepts.push(p3);
          const f3 = yield (0, ie2.q)(s4, l4, p3.id, d4);
          a3.connections.push(f3), yield Ft2(e4[o4], p3.id, p3.userId, d4, i3, r3, c3, a3);
        }
        null != e4[o4] && null != e4[o4] && a3.subcompositions.push(p3.id);
      } else {
        const i4 = null != t3 ? t3 : 999, r4 = null != n3 ? n3 : 999, c4 = h3, u4 = yield (0, q2.A)(o4, e4[o4], false, s3, l3, d3);
        a3.concepts.push(u4);
        const p3 = yield (0, ie2.q)(i4, r4, u4.id, c4);
        a3.connections.push(p3);
      }
      return u3;
    }));
  }
  var Et2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ut2(e3) {
    return Et2(this, void 0, void 0, (function* () {
      const t3 = yo.V.logfunction("UpdateComposition");
      if (oi) {
        t3.serviceWorker = true;
        try {
          const n4 = yield ui("UpdateComposition", { patcherStructure: e3 });
          return yo.V.logUpdate(t3), n4.data;
        } catch (e4) {
          console.error("UpdateComposition sw error: ", e4), (0, h2.ey)(t3, "UpdateComposition", e4), vi(e4);
        }
      }
      const n3 = e3.userId, o3 = e3.sessionId, i3 = e3.accessId;
      let r3 = [];
      const c3 = [];
      let a3 = (0, M2.o)(), s3 = (0, M2.o)();
      const l3 = [];
      let d3 = e3.compositionId;
      const u3 = e3.ofTheCompositionId;
      let p3 = [];
      if (d3 < 0) {
        let e4 = yield (0, z2.A)(d3, n3);
        if (!(e4.id > 0)) return null;
        d3 = e4.id;
      }
      r3 = yield (0, W2.s)(d3);
      const f3 = [], y3 = new Dt2(), g3 = [];
      y3.id = d3, y3.isUpdating();
      let v3 = [];
      for (let e4 = 0; e4 < r3.length; e4++) (0, kt2.A)(g3, r3[e4].ofTheConceptId), (0, kt2.A)(f3, r3[e4].ofTheConceptId), (0, kt2.A)(f3, r3[e4].toTheConceptId), v3.push(r3[e4].ofTheConceptId);
      y3.subcompositions = g3, y3.connections = r3;
      for (let e4 = 0; e4 < f3.length; e4++) {
        const t4 = yield (0, z2.A)(f3[e4]);
        d3 == f3[e4] && (a3 = t4), u3 == f3[e4] && (s3 = t4), c3.push(t4);
      }
      const C3 = e3.patchObject;
      for (const e4 in C3) {
        let t4 = (0, M2.o)();
        const r4 = C3[e4];
        let d4 = a3;
        if (s3.id > 0 && (d4 = s3), Array.isArray(r4) || "object" == typeof r4) {
          t4 = yield (0, q2.A)(e4, "", true, a3.userId, 4, 999), y3.subcompositions.push(t4.id);
          const n4 = (0, Nt2.vo)(c3, t4);
          for (let e5 = 0; e5 < n4.length; e5++) if (n4[e5].id > 0) {
            const t5 = (0, Nt2.wS)(y3.connections, n4[e5].id);
            p3 = p3.concat(t5), l3.push(n4[e5]);
          }
          yield Ft2(C3[e4], t4.id, t4.userId, a3.id, a3.userId, 4, 999, y3);
        } else {
          t4 = yield (0, q2.A)(e4, r4, false, n3, i3, o3);
          const a4 = (0, Nt2.vo)(c3, t4);
          for (let e5 = 0; e5 < a4.length; e5++) if (a4[e5].id > 0) {
            const t5 = (0, Nt2.wS)(y3.connections, a4[e5].id);
            p3 = p3.concat(t5), l3.push(a4[e5]);
          }
        }
        const h3 = (0, ie2.q)(d4.id, d4.userId, t4.id, a3.id);
        c3.push(t4), y3.connections.push(h3);
      }
      for (let e4 = 0; e4 < p3.length; e4++) Lt2(y3.connections, p3[e4]), (0, J2.m)(p3[e4].id);
      for (let e4 = 0; e4 < l3.length; e4++) At2(c3, l3[e4]);
      y3.concepts = y3.concepts.concat(c3), y3.mainConcept = a3, y3.id = a3.id, yield y3.updateCache(), xt2.addCompositionToTree(y3), V2.Y.SyncDataOnline();
      let m3 = y3.GetDataCache();
      return yo.V.logUpdate(t3), m3;
    }));
  }
  var _t2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ot2(e3, t3, n3, o3) {
    return _t2(this, arguments, void 0, (function* (e4, t4, n4, o4, i3 = 10, r3 = 1) {
      var c3 = (0, d2.ab)("application/x-www-form-urlencoded", o4), a3 = new URLSearchParams();
      a3.append("type", e4), a3.append("search", t4), a3.append("composition", n4), a3.append("inpage", i3.toString()), a3.append("page", r3.toString());
      const s3 = l2.B.SearchCompositionsUrl() + "?" + a3.toString();
      try {
        const e5 = yield fetch(s3, { method: "GET", headers: c3 });
        return e5.ok ? yield e5.json() : ((0, h2.ry)(e5), []);
      } catch (e5) {
        console.log("This is the searching error", e5), (0, h2.Mb)(e5, s3);
      }
    }));
  }
  var Vt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Mt2(e3) {
    return Vt2(this, arguments, void 0, (function* (e4, t3 = "") {
      var n3 = (0, d2.ab)("application/json", t3);
      const o3 = l2.B.SearchLinkMultipleAll(), i3 = JSON.stringify(e4);
      try {
        const e5 = yield fetch(o3, { method: "POST", headers: n3, body: i3 });
        return e5.ok ? yield e5.json() : (console.log("This is the searching error", e5.status), (0, h2.ry)(e5), []);
      } catch (e5) {
        console.log("This is the searching error", e5), (0, h2.Mb)(e5, o3);
      }
    }));
  }
  var Pt2 = n2(7139), jt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ht2(e3) {
    return jt2(this, arguments, void 0, (function* (e4, t3 = []) {
      var n3, o3;
      let i3 = [];
      const r3 = [];
      let c3 = {}, a3 = {};
      const l3 = yield xt2.getNodeFromTree(e4), d3 = [];
      let h3 = yield s2.I.GetConcept(e4);
      if (0 == h3.id && null != e4 && null != e4 && (h3 = yield (0, Pt2.r)(e4)), null == l3) {
        let s3 = [];
        s3 = t3.length > 0 ? $t2(e4, t3) : yield (0, W2.s)(e4), i3 = s3;
        for (let e5 = 0; e5 < i3.length; e5++) d3.includes(i3[e5].ofTheConceptId) || (d3.push(i3[e5].ofTheConceptId), r3.push(i3[e5].ofTheConceptId)), r3.includes(i3[e5].toTheConceptId) || r3.push(i3[e5].toTheConceptId);
        qt2(h3, i3, r3, d3);
        let l4 = [];
        a3 = yield (0, g2.zN)(e4, i3, d3, l4), c3[null !== (o3 = null === (n3 = null == h3 ? void 0 : h3.type) || void 0 === n3 ? void 0 : n3.characterValue) && void 0 !== o3 ? o3 : ""] = a3;
      } else a3 = l3.value.GetDataCache(), c3 = a3;
      return 0 == h3.id ? "" : c3;
    }));
  }
  function $t2(e3, t3) {
    const n3 = [];
    for (let o3 = 0; o3 < t3.length; o3++) t3[o3].typeId == e3 && n3.push(t3[o3]);
    return n3;
  }
  function Jt2(e3) {
    return jt2(this, arguments, void 0, (function* (e4, t3 = []) {
      var n3, o3;
      let i3 = {}, r3 = [];
      const c3 = [];
      let a3;
      const l3 = {}, d3 = yield xt2.getNodeFromTree(e4), h3 = [];
      let u3 = yield s2.I.GetConcept(e4);
      if (0 == u3.id && null != e4 && null != e4 && (u3 = yield (0, Pt2.r)(e4)), null == d3) {
        let s3 = [];
        s3 = t3.length > 0 ? $t2(e4, t3) : yield (0, W2.s)(e4), r3 = s3;
        for (let e5 = 0; e5 < r3.length; e5++) h3.includes(r3[e5].ofTheConceptId) || (h3.push(r3[e5].ofTheConceptId), c3.push(r3[e5].ofTheConceptId)), c3.includes(r3[e5].toTheConceptId) || c3.push(r3[e5].toTheConceptId);
        qt2(u3, r3, c3, h3), a3 = yield (0, g2.zN)(e4, r3, h3), l3[null !== (o3 = null === (n3 = null == u3 ? void 0 : u3.type) || void 0 === n3 ? void 0 : n3.characterValue) && void 0 !== o3 ? o3 : ""] = a3, i3.created_at = u3.entryTimeStamp, i3.data = l3, i3.id = e4;
      } else a3 = d3.value.GetDataCache(), i3 = a3;
      return 0 == u3.id ? "" : i3;
    }));
  }
  function zt2(e3, t3) {
    return jt2(this, void 0, void 0, (function* () {
      let n3 = [];
      const o3 = [];
      n3 = yield (0, ft2.j)(t3);
      for (let t4 = 0; t4 < e3.length; t4++) {
        const i3 = yield Jt2(e3[t4], n3);
        i3 && o3.push(i3);
      }
      return o3;
    }));
  }
  function qt2(e3, t3, n3, o3) {
    return jt2(this, void 0, void 0, (function* () {
      const i3 = new Dt2(), r3 = yield (function(e4) {
        return jt2(this, void 0, void 0, (function* () {
          let t4 = [];
          const n4 = [];
          for (let o4 = 0; o4 < (null == e4 ? void 0 : e4.length); o4++) {
            const i4 = yield s2.I.GetConcept(e4[o4]);
            0 == i4.id ? n4.push(e4[o4]) : t4.push(i4);
          }
          return 0 == (null == n4 ? void 0 : n4.length) || (t4 = yield (0, pt2.I)(n4)), t4;
        }));
      })(n3);
      i3.connections = t3, i3.concepts = r3, i3.id = e3.id, i3.subcompositions = o3, i3.mainConcept = e3;
      const c3 = yield Rt2(e3.id, t3, r3, o3, []);
      i3.cached = c3, xt2.addCompositionToTree(i3);
    }));
  }
  var Qt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Xt2(e3) {
    return Qt2(this, void 0, void 0, (function* () {
      try {
        var t3 = (0, d2.Xr)();
        const n3 = JSON.stringify(e3), o3 = yield fetch(l2.B.CreateSessionId(), { method: "POST", headers: t3, body: n3 });
        return o3.ok ? o3.json() : (console.log("Creating session failed", yield o3.json()), (0, h2.ry)(o3), null);
      } catch (e4) {
        console.log("Creating session failed", e4), (0, h2.Mb)(e4, l2.B.CreateSessionId());
      }
    }));
  }
  var Yt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Zt2(e3, t3) {
    return Yt2(this, void 0, void 0, (function* () {
      try {
        var n3 = (0, d2.Xr)("application/x-www-form-urlencoded");
        const o3 = new URLSearchParams();
        o3.append("sessionId", e3.toString()), o3.append("url", t3);
        const i3 = yield fetch(l2.B.CreateSessionVisitUrl(), { method: "POST", headers: n3, body: o3 });
        return i3.ok ? i3.json() : (console.log("Creating session url failed", yield i3.json()), (0, h2.ry)(i3), null);
      } catch (e4) {
        console.log("Creating session url failed", e4), (0, h2.Mb)(e4, l2.B.CreateSessionVisitUrl());
      }
    }));
  }
  var Kt2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function en2(e3, t3) {
    var n3 = arguments;
    return Kt2(this, arguments, void 0, (function* (e4, t4, o3 = 10, i3 = 1) {
      const r3 = yo.V.logfunction("GetRelation", n3);
      if (oi) {
        r3.serviceWorker = true;
        try {
          const n4 = yield ui("GetRelation", { id: e4, relation: t4, inpage: o3, page: i3 });
          return yo.V.logUpdate(r3), n4.data;
        } catch (e5) {
          console.error("GetRelation error sw: ", e5), (0, h2.ey)(r3, "GetRelation", e5), vi(e5);
        }
      }
      let c3 = [], a3 = yield (0, z2.A)(e4), s3 = yield Ae2(t4);
      if (s3.id > 0) {
        let e5 = yield _2(s3.id, a3.id, a3.userId, o3, i3), t5 = [];
        for (let n4 = 0; n4 < e5.length; n4++) t5.push(e5[n4].toTheConceptId);
        yield (0, f2.Y)(t5);
        for (let t6 = 0; t6 < e5.length; t6++) {
          let n4 = e5[t6].toTheConceptId, o4 = yield (0, z2.A)(n4), i4 = yield (0, g2.Ez)(o4.id);
          c3.push(i4);
        }
      }
      return yo.V.logUpdate(r3), c3;
    }));
  }
  function tn2(e3, t3) {
    var n3 = arguments;
    return Kt2(this, arguments, void 0, (function* (e4, t4, o3 = 10, i3 = 1) {
      const r3 = yo.V.logfunction("GetRelationRaw", n3);
      if (oi) {
        r3.serviceWorker = true;
        try {
          const n4 = yield ui("GetRelationRaw", { id: e4, relation: t4, inpage: o3, page: i3 });
          return yo.V.logUpdate(r3), n4.data;
        } catch (e5) {
          console.error("GetRelationRaw error sw: ", e5), (0, h2.ey)(r3, "GetRelationRaw", e5), vi(e5);
        }
      }
      let c3 = [], a3 = yield (0, z2.A)(e4), s3 = yield Ae2(t4);
      if (s3.id > 0) {
        let e5 = yield _2(s3.id, a3.id, a3.userId, o3, i3), t5 = [];
        for (let n4 = 0; n4 < e5.length; n4++) t5.push(e5[n4].toTheConceptId);
        for (let t6 = 0; t6 < e5.length; t6++) {
          let n4 = e5[t6].toTheConceptId, o4 = yield (0, z2.A)(n4);
          c3.push(o4);
        }
      }
      return yo.V.logUpdate(r3), c3;
    }));
  }
  var nn2 = n2(6416), on2 = n2(4711);
  class rn2 {
    constructor(e3, t3, n3, o3) {
      this.value = [], this.height = 1, this.key = e3, this.value.push(t3), this.leftNode = n3, this.rightNode = o3;
    }
    addNode(e3, t3, n3) {
      if (null == t3) return e3;
      var o3 = t3.leftNode, i3 = t3.rightNode;
      if (t3.key > e3.key) t3.leftNode = this.addNode(e3, o3, n3);
      else {
        if (!(t3.key < e3.key)) return t3.value.push(...e3.value), t3;
        t3.rightNode = this.addNode(e3, i3, n3);
      }
      t3.height = 1 + Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode));
      let r3 = this.getBalanceFactor(t3);
      if (r3 > 1 && t3.leftNode) {
        if (e3.key < t3.leftNode.key) return this.rightRotate(t3);
        if (e3.key > t3.leftNode.key) return t3.leftNode = this.leftRotate(t3.leftNode), this.rightRotate(t3);
      }
      if (r3 < -1 && t3.rightNode) {
        if (e3.key > t3.rightNode.key) return this.leftRotate(t3);
        if (e3.key < t3.rightNode.key) return t3.rightNode = this.rightRotate(t3.rightNode), this.leftRotate(t3);
      }
      return t3;
    }
    rightRotate(e3) {
      if (e3) {
        let t3 = e3.leftNode;
        if (t3) {
          let n3 = t3.rightNode;
          return e3.leftNode = n3, t3.rightNode = e3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(t3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    leftRotate(e3) {
      if (e3) {
        let t3 = e3.rightNode;
        if (t3) {
          let n3 = t3.leftNode;
          return t3.leftNode = e3, e3.rightNode = n3, e3.height = Math.max(this.getHeight(e3.leftNode), this.getHeight(e3.rightNode)) + 1, t3.height = Math.max(this.getHeight(t3.leftNode), this.getHeight(e3.rightNode)) + 1, t3;
        }
      }
      return e3;
    }
    getHeight(e3) {
      return e3 ? e3.height : 0;
    }
    getBalanceFactor(e3) {
      return null == e3 ? 0 : this.getHeight(e3.leftNode) - this.getHeight(e3.rightNode);
    }
    getFromNode(e3, t3) {
      return t3 ? e3 == t3.key ? t3 : e3 < t3.key ? this.getFromNode(e3, t3.leftNode) : e3 > t3.key ? this.getFromNode(e3, t3.rightNode) : t3 : t3;
    }
    removeNode(e3, t3) {
      if (null == e3) return e3;
      if (e3.key > t3) return e3.leftNode = this.removeNode(e3.leftNode, t3), e3;
      if (e3.key < t3) return e3.rightNode = this.removeNode(e3.rightNode, t3), e3;
      if (null == e3.leftNode) {
        let t4 = e3.rightNode;
        return e3 = null, t4;
      }
      if (null == e3.rightNode) {
        let t4 = e3.leftNode;
        return e3 = null, t4;
      }
      var n3 = this.inOrderSuccessor(e3.rightNode);
      return e3.value = n3.value, e3.key = n3.key, e3.rightNode = this.removeNode(e3.rightNode, n3.key), e3;
    }
    countNodeBelow(e3) {
      return null == e3 ? 0 : 1 + this.countNodeBelow(e3.leftNode) + this.countNodeBelow(e3.rightNode);
    }
    inOrderSuccessor(e3) {
      for (; null != e3.leftNode; ) e3 = e3.leftNode;
      return e3;
    }
  }
  var cn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class an2 {
    static compositeKey(e3, t3) {
      return ("0000" + e3.toString(16).toUpperCase()).slice(-4) + ("0000" + t3.toString(16).toUpperCase()).slice(-4);
    }
    static addNodeToTree(e3) {
      if (null == this.root) return this.root = e3, this.root;
      this.root = this.root.addNode(e3, this.root, this.root.height);
    }
    static waitForDataToLoad() {
      return cn2(this, void 0, void 0, (function* () {
        return new Promise(((e3, t3) => {
          this.checkFlag(e3), setTimeout((() => {
            t3("not");
          }), 25e3);
        }));
      }));
    }
    static checkFlag(e3) {
      if (r2.B.isDataLoaded) return e3("done");
      setTimeout(an2.checkFlag, 1e3, e3);
    }
    static addConceptToTree(e3, t3, n3 = 999) {
      let o3 = this.compositeKey(t3, n3);
      var i3 = new rn2(o3, e3, null, null);
      this.addNodeToTree(i3);
    }
    static getNodeFromTree(e3, t3) {
      return cn2(this, void 0, void 0, (function* () {
        let n3 = this.compositeKey(e3, t3);
        return this.root ? this.root.getFromNode(n3, this.root) : null;
      }));
    }
    static removeNodeFromTree(e3) {
      return cn2(this, arguments, void 0, (function* (e4, t3 = 999) {
        if (this.root) {
          let n3 = this.compositeKey(e4, t3);
          this.root = this.root.removeNode(this.root, n3);
        }
      }));
    }
    static countNumberOfNodes() {
      return this.root ? this.root.countNodeBelow(this.root) : 0;
    }
  }
  an2.root = null;
  var sn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function ln2(e3, t3) {
    return sn2(this, arguments, void 0, (function* (e4, t4, n3 = 999) {
      let o3 = yield an2.getNodeFromTree(e4, n3), i3 = (0, nn2.u)();
      if (o3) for (let e5 = 0; e5 < o3.value.length; e5++) {
        let n4 = o3.value[e5];
        n4.ghostId == t4 && (i3 = n4);
      }
      return i3;
    }));
  }
  function dn2(e3, t3) {
    return sn2(this, arguments, void 0, (function* (e4, t4, n3 = 999) {
      an2.addConceptToTree(e4, t4, n3);
    }));
  }
  var hn2 = n2(5312), un2 = n2(1213), pn2 = n2(3729), fn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, yn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function gn2(e3, t3, n3) {
    return yn2(this, void 0, void 0, (function* () {
      try {
        if (oi) try {
          return (yield ui("GetRelationLocal", { id: e3, relation: t3, userId: n3 })).data;
        } catch (e4) {
          console.error("GetRelationLocal error sw: ", e4), vi(e4);
        }
        let o3 = yield (0, C2.$I)(t3), i3 = [];
        0 != o3.id && (i3 = yield (function(e4, t4) {
          return fn2(this, void 0, void 0, (function* () {
            try {
              return yield A2.G.GetConnectionOfCompositionAndTypeLocal(t4, e4);
            } catch (e5) {
              throw e5;
            }
          }));
        })(e3, o3.id));
        let r3 = [];
        for (let e4 = 0; e4 < i3.length; e4++) {
          let t4 = yield G2(i3[e4].toTheConceptId);
          r3.push(t4);
        }
        return r3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  var vn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Cn2(e3) {
    return vn2(this, void 0, void 0, (function* () {
      let t3 = [];
      try {
        var n3 = (0, d2.Xr)();
        const o3 = yield fetch(l2.B.ViewInternalDataUrl(), { method: "POST", headers: n3, body: JSON.stringify(e3) });
        if (o3.ok) {
          let e4 = yield o3.json(), n4 = {};
          for (let o4 = 0; o4 < e4.length; o4++) {
            let i3 = e4[o4].concepts;
            t3 = e4[o4].connections;
            let r3 = e4[o4].id;
            (0, pt2.r)(i3), n4[r3] = t3;
          }
          return n4;
        }
        return console.log("View Internal Data error", o3.status), (0, h2.ry)(o3), t3;
      } catch (e4) {
        throw e4 instanceof Error ? console.log(" This is the view internal data error message: ", e4.message) : console.log(" This is the view internal data unexpected error: ", e4), e4;
      }
    }));
  }
  var mn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Tn2(e3) {
    return mn2(this, void 0, void 0, (function* () {
      var t3;
      try {
        let n3 = yield Cn2(e3), o3 = [];
        for (let i3 = 0; i3 < e3.length; i3++) {
          let r3 = e3[i3], c3 = n3[r3];
          if (r3 && c3) {
            let e4 = [], t4 = {};
            for (let t5 = 0; t5 < c3.length; t5++) e4.includes(c3[t5].ofTheConceptId) || e4.push(c3[t5].ofTheConceptId);
            let n4 = yield (0, g2.zN)(r3, c3, e4);
            t4.data = n4, t4.id = r3, o3.push(t4);
          } else {
            let e4 = {};
            e4.id = r3;
            let n4 = yield (0, z2.A)(r3), i4 = {};
            n4.type && (i4[null === (t3 = null == n4 ? void 0 : n4.type) || void 0 === t3 ? void 0 : t3.characterValue] = n4.characterValue, e4.data = i4, o3.push(e4));
          }
        }
        return o3;
      } catch (e4) {
        throw e4;
      }
    }));
  }
  var In2 = n2(176), wn2 = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  }, kn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Nn(e3) {
    return kn(this, arguments, void 0, (function* (e4, t3 = "") {
      try {
        let n3 = yield (function(e5) {
          return wn2(this, arguments, void 0, (function* (e6, t4 = "") {
            var n4 = (0, d2.ab)("application/json", t4);
            let o3 = l2.B.SearchInternalWithAuthenticatedCcsUrl();
            o3 = o3 + "?composition=" + e6.composition + "&search=" + e6.search + "&internalComposition=" + e6.internalComposition + "&type=" + e6.type + "&inpage=" + e6.inpage + "&page=" + e6.page;
            try {
              const e7 = yield fetch(o3, { method: "GET", headers: n4 });
              return e7.ok ? yield e7.json() : (console.log("This is the searching internal error", e7.status), (0, h2.ry)(e7), []);
            } catch (e7) {
              console.log("This is the searching internal error", e7), (0, h2.Mb)(e7, o3);
            }
          }));
        })(e4, t3);
        return yield Tn2(n3);
      } catch (e5) {
        throw e5;
      }
    }));
  }
  function An(e3) {
    return kn(this, arguments, void 0, (function* (e4, t3 = "") {
      try {
        return yield (function(e5) {
          return wn2(this, void 0, void 0, (function* () {
            var t4 = (0, d2.ab)("application/json", "");
            let n3 = l2.B.SearchInternalWithCcsUrl();
            n3 = n3 + "?composition=" + e5.composition + "&search=" + e5.search + "&internalComposition=" + e5.internalComposition + "&type=" + e5.type + "&inpage=" + e5.inpage + "&page=" + e5.page;
            try {
              const e6 = yield fetch(n3, { method: "GET", headers: t4 });
              return e6.ok ? yield e6.json() : (console.log("This is the searching internal error", e6.status), (0, h2.ry)(e6), []);
            } catch (e6) {
              console.log("This is the searching internal error", e6), (0, h2.Mb)(e6, n3);
            }
          }));
        })(e4);
      } catch (e5) {
        throw e5;
      }
    }));
  }
  var Ln = n2(8095), Sn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Gn(e3) {
    return Sn(this, void 0, void 0, (function* () {
      if (oi) try {
        return (yield ui("DeleteConceptLocal", { id: e3 })).data;
      } catch (e4) {
        console.error("DeleteConceptLocal error sw: ", e4), vi(e4);
      }
      let t3 = yield (0, un2.f)(e3);
      y2.v.RemoveConcept(t3);
    }));
  }
  var xn = n2(2803), Bn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Rn(e3, t3, n3, o3) {
    return Bn(this, arguments, void 0, (function* (e4, t4, n4, o4, i3 = true) {
      var r3, c3;
      const a3 = yo.V.logfunction("GetConnectionBetweenTwoConceptsLinker");
      if (oi) {
        a3.serviceWorker = true;
        try {
          const r4 = yield ui("GetConnectionBetweenTwoConceptsLinker", { ofTheConcept: e4, toTheConcept: t4, linker: n4, fullLinker: o4, forward: i3 });
          return yo.V.logUpdate(a3), r4.data;
        } catch (e5) {
          console.error("GetConnectionBetweenTwoConceptsLinker sw error: ", e5), (0, h2.ey)(a3, "GetConnectionBetweenTwoConceptsLinker", e5), vi(e5);
        }
      }
      let s3 = (0, M2.o)();
      if ("" != n4) {
        let o5 = "";
        o5 = i3 ? (null === (r3 = e4.type) || void 0 === r3 ? void 0 : r3.characterValue) + "_s_" + n4 + "_s" : (null === (c3 = t4.type) || void 0 === c3 ? void 0 : c3.characterValue) + "_s_" + n4 + "_by", s3 = yield (0, q2.A)("connection", o5, false, 999);
      }
      "" != o4 && (s3 = yield Se2(o4, 999));
      let l3 = [];
      return l3 = i3 ? yield (0, xn.x)(e4.id, t4.id, s3.id) : yield (0, xn.x)(t4.id, e4.id, s3.id), yo.V.logUpdate(a3), l3;
    }));
  }
  function bn(e3, t3) {
    return new Promise(((n3, o3) => {
      setTimeout((() => {
        n3(t3);
      }), e3);
    }));
  }
  var Dn = n2(3130);
  const Wn = 3, Fn = 4, En = 5;
  var Un = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function _n(e3, t3) {
    return Un(this, arguments, void 0, (function* (e4, t4, n3 = "") {
      let o3 = l2.B.SearchAllTypeWithLinker(e4.auth);
      var i3 = (0, d2.ab)("application/json", n3);
      o3 = o3 + "?search=" + e4.search + "&type=" + e4.type + "&inpage=" + e4.inpage + "&page=" + e4.page;
      const r3 = JSON.stringify(t4);
      try {
        const e5 = yield fetch(o3, { method: "POST", headers: i3, body: r3 });
        return e5.ok ? yield e5.json() : ((0, h2.ry)(e5), console.log("This is the searching multiple error", e5.status), []);
      } catch (e5) {
        console.log("This is the searching SearchWithTypeAndLinker error", e5), (0, h2.Mb)(e5, o3);
      }
    }));
  }
  var On = n2(4287);
  class Vn extends On.w {
    constructor(e3, t3, n3 = Dn.y0) {
      super(), this.searchQuery = [], this.format = Dn.y0, this.searchQuery = e3, this.format = n3;
    }
    bind() {
      return e3 = this, t3 = void 0, o3 = function* () {
        return this.data = yield (0, hn2.cf)(this.searchQuery, "", this, this.format), this.mainConcept = this.searchQuery[0].composition, this.listenToEvent(this.mainConcept), console.log("this is the data", this.data), this.data;
      }, new ((n3 = void 0) || (n3 = Promise))((function(i3, r3) {
        function c3(e4) {
          try {
            s3(o3.next(e4));
          } catch (e5) {
            r3(e5);
          }
        }
        function a3(e4) {
          try {
            s3(o3.throw(e4));
          } catch (e5) {
            r3(e5);
          }
        }
        function s3(e4) {
          var t4;
          e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
            e5(t4);
          }))).then(c3, a3);
        }
        s3((o3 = o3.apply(e3, t3 || [])).next());
      }));
      var e3, t3, n3, o3;
    }
  }
  function Mn(e3, t3, n3 = Dn.y0) {
    return new Vn(e3, null != t3 ? t3 : "", n3);
  }
  var Pn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class jn extends On.w {
    constructor(e3, t3 = Dn.ZJ) {
      super(), this.id = e3, this.format = t3;
    }
    bind() {
      return Pn(this, void 0, void 0, (function* () {
        if (!this.isDataLoaded) {
          let e3 = yield (0, g2.hL)(this.id);
          this.mainConcept = this.id, this.compositionIds = e3.compositionList;
          let t3 = e3.connectionList;
          for (let e4 = 0; e4 < t3.length; e4++) this.internalConnections.push(t3[e4].id);
          this.isDataLoaded = true, this.listenToEvent(this.mainConcept);
        }
        return yield this.build();
      }));
    }
    build() {
      return Pn(this, void 0, void 0, (function* () {
        let e3 = [], t3 = this.internalConnections;
        for (let n3 = 0; n3 < t3.length; n3++) e3.push(yield ze2.d.GetConnection(t3[n3]));
        return this.format == Dn.ZJ ? this.data = yield (0, g2.ay)(this.mainConcept, e3, this.compositionIds) : this.format == Dn.y0 ? this.data = yield (0, g2.$V)(this.mainConcept, e3, this.compositionIds) : this.format == Dn.yv ? this.data = yield (0, g2.re)(this.mainConcept, e3, this.compositionIds) : this.data = yield (0, g2.ay)(this.mainConcept, e3, this.compositionIds), this.data;
      }));
    }
  }
  function Hn(e3, t3 = Dn.ZJ) {
    return new jn(e3, t3);
  }
  var $n = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Jn extends On.w {
    constructor(e3, t3, n3, o3, i3) {
      super(), this.data = [], this.startPage = 0, this.compositionName = e3, this.userId = t3, this.inpage = n3, this.page = o3, this.format = i3;
    }
    bind() {
      return $n(this, void 0, void 0, (function* () {
        if (!this.isDataLoaded) {
          var e3 = yield (0, v2.A)(this.compositionName);
          if (e3) {
            yield p2(this.compositionName, this.userId);
            let o3 = yield s2.I.GetConceptsByTypeIdAndUser(e3.id, this.userId);
            for (var t3 = this.inpage * (this.page - 1), n3 = t3; n3 < t3 + this.inpage; n3++) o3[n3] && this.compositionIds.push(o3[n3].id);
          }
          yield (0, f2.Y)(this.compositionIds), this.isDataLoaded = true, this.listenToEventType(e3.id);
          for (let e4 = 0; e4 < this.compositionIds.length; e4++) this.listenToEvent(this.compositionIds[e4]);
        }
        return yield this.build();
      }));
    }
    build() {
      return $n(this, void 0, void 0, (function* () {
        if (this.data = [], this.format == Dn.ZJ) {
          for (let e3 = this.startPage; e3 < this.startPage + this.inpage; e3++) if (this.compositionIds[e3]) {
            let t3 = yield (0, g2.kx)(this.compositionIds[e3]);
            this.data.push(t3);
          }
        } else if (this.format == Dn.y0) {
          for (let e3 = this.startPage; e3 < this.startPage + this.inpage; e3++) if (this.compositionIds[e3]) {
            let t3 = yield (0, g2.RW)(this.compositionIds[e3]);
            this.data.push(t3);
          }
        } else if (this.format == Dn.yv) {
          for (let e3 = this.startPage; e3 < this.startPage + this.inpage; e3++) if (this.compositionIds[e3]) {
            let t3 = yield (0, g2.XI)(this.compositionIds[e3]);
            this.data.push(t3);
          }
        } else for (let e3 = this.startPage; e3 < this.startPage + this.inpage; e3++) if (this.compositionIds[e3]) {
          let t3 = yield (0, g2.kx)(this.compositionIds[e3]);
          this.data.push(t3);
        }
        return this.data;
      }));
    }
  }
  function zn(e3, t3, n3, o3, i3 = Dn.ZJ) {
    return new Jn(e3, t3, n3, o3, i3);
  }
  var qn = n2(7106), Qn = n2(5328), Xn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Yn extends On.w {
    constructor(e3, t3, n3 = "", o3) {
      super(), this.searchText = "", this.connections = [], this.externalConnectionIds = [], this.data = [], this.mainConcept = e3, this.searchLinkers = t3, this.textSearch = n3, o3 && (this.format = o3);
    }
    listenToEvent(e3) {
      window.addEventListener(`${e3}`, ((t3) => {
        if (this.isUpdating) console.log("rejected this");
        else {
          this.isUpdating = true;
          let t4 = this;
          setTimeout((function() {
            return Xn(this, void 0, void 0, (function* () {
              let n3 = yield ze2.d.GetConnectionByOfTheConceptAndType(e3, e3);
              for (let e4 = 0; e4 < n3.length; e4++) yield ze2.d.GetConnection(n3[e4]).then(((e5) => {
                e5.typeId == t4.mainConcept ? t4.internalConnections.includes(e5.id) || t4.internalConnections.push(e5.id) : t4.linkers.includes(e5.id) || t4.linkers.push(e5.id), t4.conceptIds.includes(e5.toTheConceptId) || t4.conceptIds.push(e5.toTheConceptId), t4.compositionIds.includes(e5.ofTheConceptId) || t4.compositionIds.push(e5.ofTheConceptId), t4.compositionIds.includes(e5.toTheConceptId) || t4.compositionIds.push(e5.toTheConceptId);
              }));
              t4.isUpdating = false, yield t4.bind(), t4.notify();
            }));
          }), 200);
        }
      }));
    }
    bind() {
      return Xn(this, void 0, void 0, (function* () {
        if (!this.isDataLoaded) {
          this.isDataLoaded = true;
          const e3 = yield it2(this.mainConcept, this.searchLinkers, this.textSearch);
          this.compositionIds = e3.compositionIds || [], this.internalConnections = e3.internalConnections || [], this.externalConnectionIds = e3.externalConnections || [], this.linkers = this.externalConnectionIds, this.connections = yield (0, ft2.j)(this.externalConnectionIds);
          for (let e4 = 0; e4 < this.compositionIds.length; e4++) this.listenToEvent(this.compositionIds[e4]);
          this.listenToEvent(this.mainConcept);
        }
        return yield this.build();
      }));
    }
    build() {
      return Xn(this, void 0, void 0, (function* () {
        return this.externalConnectionIds = this.linkers, this.format && this.format == Dn.XZ ? this.data = { compositionIds: this.compositionIds, internalConnections: this.internalConnections, externalConnections: this.externalConnectionIds } : this.data = yield (0, et2.p8)(this.compositionIds, this.internalConnections), this.data;
      }));
    }
  }
  function Zn(e3, t3, n3 = "", o3) {
    return new Yn(e3, t3, n3, o3);
  }
  var Kn = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class eo extends On.w {
    constructor(e3, t3, n3, o3 = Dn.y0) {
      super(), this.searchQuery = [], this.format = Dn.y0, this.mainCompositionIds = [], this.searchCharacter = "", this.token = "", this.searchStructure = e3, this.searchQuery = t3, this.searchQuery[0].type = e3.composition, this.searchCharacter = e3.composition, this.format = o3, this.token = yt2.b.BearerAccessToken;
    }
    listenToEventType(e3) {
      window.addEventListener(`${e3}`, ((e4) => {
        if (this.isUpdating) console.log("rejected this");
        else {
          this.isUpdating = true;
          let t3 = this;
          setTimeout((function() {
            return Kn(this, void 0, void 0, (function* () {
              let n3 = e4;
              t3.mainCompositionIds.includes(null == n3 ? void 0 : n3.detail) || (t3.mainCompositionIds.unshift(null == n3 ? void 0 : n3.detail), t3.conceptIds.push(null == n3 ? void 0 : n3.detail), t3.listenToEvent(null == n3 ? void 0 : n3.detail), ze2.d.GetConnectionsOfConcept(null == n3 ? void 0 : n3.detail).then(((e5) => {
                for (let n4 = 0; n4 < e5.length; n4++) t3.linkers.push(e5[n4].id);
              }))), t3.isUpdating = false, yield t3.bind(), t3.notify();
            }));
          }), 200);
        }
      }));
    }
    bind() {
      return Kn(this, void 0, void 0, (function* () {
        if (!this.isDataLoaded) {
          this.isDataLoaded = true;
          var e3 = yield (0, v2.A)(this.searchCharacter);
          let t3 = yield _n(this.searchStructure, this.searchQuery, this.token);
          this.conceptIds = t3.compositionIds, this.internalConnections = t3.internalConnections, this.linkers = t3.linkers, this.reverse = t3.reverse, this.mainCompositionIds = t3.mainCompositionIds, this.listenToEventType(e3.id);
          for (let e4 = 0; e4 < this.mainCompositionIds.length; e4++) this.listenToEvent(this.mainCompositionIds[e4]);
        }
        return yield this.build();
      }));
    }
    build() {
      return Kn(this, void 0, void 0, (function* () {
        return yield (0, pt2.r)(this.conceptIds), this.format == Dn.y0 ? this.data = yield (0, qn.yV)(this.linkers, this.conceptIds, this.internalConnections, this.mainCompositionIds, this.reverse) : this.data = yield (0, qn._W)(this.linkers, this.conceptIds, this.internalConnections, this.mainCompositionIds, this.reverse), this.data;
      }));
    }
  }
  function to(e3, t3, n3, o3 = Dn.y0) {
    return new eo(e3, t3, n3, o3);
  }
  var no = n2(2615);
  class oo {
    constructor(e3, t3, n3, o3, i3, r3, c3, a3 = false, s3, d3, h3) {
      this.structureType = "lconcept", this.isComposition = false, this.isTemp = false, this.isSynced = false, this.applicationId = l2.B.getRandomizer(), this.id = e3, this.userId = t3, this.typeId = n3, this.ghostId = e3, this.categoryId = o3, this.characterValue = r3, this.accessId = i3, this.type = null, this.isNew = a3, this.typeCharacter = c3, this.entryTimeStamp = s3, this.updatedTimeStamp = d3, this.isSynced = false, this.referentId = h3;
    }
    getType() {
      console.log(this.typeId);
    }
  }
  class io {
    constructor(e3, t3, n3, o3, i3, r3) {
      this.isTemp = false, this.applicationId = l2.B.getRandomizer(), this.type = (0, M2.o)(), this.id = e3, this.ofTheConceptId = t3, this.toTheConceptId = n3, this.typeId = o3, this.ghostId = e3, this.orderId = i3, this.typeCharacter = "", this.accessId = r3, this.typeCharacter = "", this.entryTimeStamp = /* @__PURE__ */ new Date(), this.terminationDateTime = /* @__PURE__ */ new Date(), this.localSyncTime = /* @__PURE__ */ new Date();
    }
  }
  class ro {
    constructor() {
      this.compositionId = 0, this.userId = 999, this.sessionId = 999, this.accessId = 4, this.ofTheCompositionId = 0, this.patchObject = {};
    }
  }
  class co {
    constructor() {
      this.id = "0", this.remote_address = "", this.server_port = "", this.server_address = "", this.server_name = "", this.server_software = "", this.http_user_agent = "", this.self = "", this.port = "", this.userId = "", this.email = "";
    }
  }
  var ao = n2(628);
  class so {
    constructor() {
      this.type = "", this.search = "", this.logicoperator = "=", this.index = 0, this.composition = true, this.name = "", this.operateon = "";
    }
  }
  class lo {
    constructor() {
      this.type = "", this.search = "", this.composition = "", this.internalComposition = "", this.userId = 999, this.inpage = 10, this.page = 1, this.auth = true;
    }
  }
  var ho = n2(7887), uo = n2(3075), po = n2(7869), fo = n2(9635), yo = n2(9700);
  class go {
    static initialize() {
      try {
        console.warn("Initialized Application Monitoring for tracking errors..."), this.initGlobalErrorHandlers(), this.logCatchError(), this.logErrorEvent(), this.logUnhandledError(), this.logUserInteractions(), this.logNetworkRequests(), this.logRouteChanges(), this.logPerformanceMetrics(), this.logWebSocketEvents();
      } catch (e3) {
        console.error("Error during Application Monitoring initialization:", e3);
      }
    }
    static initGlobalErrorHandlers() {
      try {
        if (console.log("this is the window", window), void 0 === typeof window) return;
        window.onerror = (e3, t3, n3, o3, i3) => {
          const r3 = { message: e3, source: t3, lineno: n3, colno: o3, stack: (null == i3 ? void 0 : i3.stack) || "undefined" };
          console.log("This is the window error", r3), yo.V.logApplication("ERROR", "Runtime Error", r3), yo.V.log("ERROR", "Runtime Error", r3);
        }, window.onunhandledrejection = (e3) => {
          yo.V.logApplication("ERROR", "Unhandled Promise Rejection", { message: e3.reason ? e3.reason.message : e3.reason, stack: e3.reason ? e3.reason.stack : null }), yo.V.log("ERROR", "Unhandled Promise Rejection", { message: e3.reason ? e3.reason.message : e3.reason, stack: e3.reason ? e3.reason.stack : null });
        };
      } catch (e3) {
        console.warn("Failed to initialize global error handlers:", e3);
      }
    }
    static logCatchError() {
      try {
        const e3 = console.error;
        console.log("Inside originalConsoleError..."), console.error = function(...t3) {
          const n3 = "Console Error", o3 = { arguments: t3.map(((e4) => vo(e4))) };
          yo.V.logApplication("ERROR", n3, o3), yo.V.log("ERROR", n3, o3), e3.apply(console, t3);
        };
      } catch (e3) {
        console.warn("Failed to override console.error:", e3);
      }
    }
    static logErrorEvent() {
      try {
        window.addEventListener("error", ((e3) => {
          var t3;
          console.log("Inside error event...");
          const n3 = { error: (null === (t3 = e3.error) || void 0 === t3 ? void 0 : t3.message) || e3.message, source: e3.filename, line: e3.lineno, column: e3.colno, stack: e3.error ? vo(e3.error.stack) : void 0 }, o3 = "Unhandled Error";
          yo.V.logApplication("ERROR", o3, n3), yo.V.log("ERROR", o3, n3);
        }));
      } catch (e3) {
        console.warn("Failed to add error event listener:", e3);
      }
    }
    static logUnhandledError() {
      try {
        window.addEventListener("unhandledrejection", ((e3) => {
          var t3, n3;
          console.log("Inside unhandledrejection...");
          const o3 = { reason: (null === (t3 = e3.reason) || void 0 === t3 ? void 0 : t3.message) || String(e3.reason), stack: (null === (n3 = e3.reason) || void 0 === n3 ? void 0 : n3.stack) || "No stack trace available" };
          yo.V.logApplication("ERROR", "Unhandled Promise Rejection", o3), yo.V.log("ERROR", "Unhandled Promise Rejection", o3);
        }));
      } catch (e3) {
        console.warn("Failed to add unhandled rejection event listener:", e3);
      }
    }
    static logUserInteractions() {
      document.addEventListener("click", ((e3) => {
        var t3;
        const n3 = e3.target, o3 = { element: n3.tagName, id: n3.id, classes: n3.className, text: null === (t3 = n3.innerText) || void 0 === t3 ? void 0 : t3.slice(0, 50) };
        yo.V.logApplication("INFO", "User Click", o3);
      })), document.addEventListener("input", ((e3) => {
        const t3 = e3.target;
        t3.tagName, t3.id, t3.value;
      })), document.addEventListener("scroll", (() => {
        window.scrollY;
      }));
    }
    static logNetworkRequests() {
      try {
        if (void 0 === typeof window) return;
        const e3 = null === window || void 0 === window ? void 0 : window.fetch;
        if (!e3) throw new Error("Original fetch is not available.");
        const t3 = [l2.B.PostLogger(), l2.B.PostPrefetchConceptConnections()];
        window.fetch = (...n3) => {
          return o3 = this, i3 = void 0, c3 = function* () {
            const [o4, i4] = n3, r4 = o4 instanceof Request ? o4.url : o4 instanceof URL ? o4.toString() : o4;
            if (t3.includes(r4)) return console.log("Ignored URLs detected : ", r4), e3(...n3);
            let c4 = { request: { type: "REQUEST", message: "Network Request", method: (null == i4 ? void 0 : i4.method) || "GET", url: r4, body: null == i4 ? void 0 : i4.body } };
            try {
              const t4 = yield e3(...n3);
              return c4.response = { type: "RESPONSE", message: "Network Response", url: r4, status: t4.status }, t4;
            } catch (e4) {
              throw c4.response = { type: "ERROR", message: "Network Request Failed", url: r4, error: e4 instanceof Error ? e4.message : String(e4) }, yo.V.logApplication("ERROR", "Failed Network Request", c4), new Error(`Network request failed for ${r4}: ${e4.message}`);
            }
          }, new ((r3 = void 0) || (r3 = Promise))((function(e4, t4) {
            function n4(e5) {
              try {
                s3(c3.next(e5));
              } catch (e6) {
                t4(e6);
              }
            }
            function a3(e5) {
              try {
                s3(c3.throw(e5));
              } catch (e6) {
                t4(e6);
              }
            }
            function s3(t5) {
              var o4;
              t5.done ? e4(t5.value) : (o4 = t5.value, o4 instanceof r3 ? o4 : new r3((function(e5) {
                e5(o4);
              }))).then(n4, a3);
            }
            s3((c3 = c3.apply(o3, i3 || [])).next());
          }));
          var o3, i3, r3, c3;
        };
      } catch (e3) {
        console.warn("Failed to override network requests:", e3);
      }
    }
    static logPerformanceMetrics() {
      void 0 !== typeof window && (null === window || void 0 === window || window.addEventListener("load", (() => {
        const e3 = performance.timing;
        e3.loadEventEnd, e3.navigationStart, e3.domContentLoadedEventEnd, e3.navigationStart;
      })));
    }
    static logRouteChanges() {
      const e3 = history.pushState;
      history.pushState = function(...t3) {
        var n3;
        const o3 = { url: null === (n3 = t3[2]) || void 0 === n3 ? void 0 : n3.toString() };
        return yo.V.logApplication("INFO", "Route Change", o3), e3.apply(this, t3);
      }, null === window || void 0 === window || window.addEventListener("popstate", (() => {
        const e4 = { url: location.href };
        yo.V.logApplication("INFO", "Route Changed (Back/Forward)", e4);
      }));
    }
    static logWebSocketEvents() {
      if (void 0 === typeof window) return;
      const e3 = WebSocket;
      window.WebSocket = class extends e3 {
        constructor(e4, t3) {
          super(e4, t3);
          const n3 = { url: e4.toString() };
          yo.V.logApplication("INFO", "WebSocket Open", n3), this.addEventListener("message", ((t4) => {
            const n4 = { url: e4, data: t4.data };
            yo.V.logApplication("INFO", "WebSocket Message", n4);
          })), this.addEventListener("error", ((t4) => {
            const n4 = { url: e4, error: t4 instanceof Error ? t4.message : String(t4) };
            yo.V.logApplication("ERROR", "WebSocket Error", n4);
          })), this.addEventListener("close", (() => {
            const t4 = { url: e4 };
            yo.V.logApplication("INFO", "WebSocket Closed", t4);
          }));
        }
      };
    }
  }
  function vo(e3) {
    try {
      return JSON.stringify(e3, ((e4, t3) => t3 && "object" == typeof t3 && t3 instanceof Error ? { message: t3.message, stack: t3.stack } : t3));
    } catch (e4) {
      return "Error while serializing value";
    }
  }
  const Co = (e3, t3, ...n3) => {
    return o3 = void 0, i3 = [e3, t3, ...n3], c3 = function* (e4, t4, n4 = false) {
      try {
        let o4 = l2.B.sendMail();
        n4 && (o4 = l2.B.sendBulkMail());
        const i4 = yield fetch(o4, { method: "POST", body: e4 instanceof FormData ? e4 : JSON.stringify(e4), headers: { "Content-Type": "application/json", Authorization: `Bearer ${t4}` } }), r4 = i4.headers.get("content-type");
        if (!i4.ok) {
          const e5 = yield i4.json();
          return console.info(`${i4.status} ${e5}`), null;
        }
        const c4 = yield i4.json();
        return r4 && r4.includes("text/plain") ? yield i4.text() : c4;
      } catch (e5) {
        return console.error(e5), null;
      }
    }, new ((r3 = void 0) || (r3 = Promise))((function(e4, t4) {
      function n4(e5) {
        try {
          s3(c3.next(e5));
        } catch (e6) {
          t4(e6);
        }
      }
      function a3(e5) {
        try {
          s3(c3.throw(e5));
        } catch (e6) {
          t4(e6);
        }
      }
      function s3(t5) {
        var o4;
        t5.done ? e4(t5.value) : (o4 = t5.value, o4 instanceof r3 ? o4 : new r3((function(e5) {
          e5(o4);
        }))).then(n4, a3);
      }
      s3((c3 = c3.apply(o3, i3 || [])).next());
    }));
    var o3, i3, r3, c3;
  };
  class mo {
    constructor() {
      this.inDevelopment = false, this.subscribers = [];
    }
    notify() {
      console.log("this is the subscribers", this.subscribers), this.subscribers.map(((e3) => {
        e3(this.data);
      }));
    }
    dataChange(e3) {
      return this.subscribers.push(e3), e3(this.data);
    }
  }
  class To extends mo {
    constructor() {
      super(...arguments), this.element = null, this.elementIdentifier = 0, this.widgetMounted = false;
    }
    getComponent() {
      return this.element;
    }
    getElementById(e3) {
      let t3 = this.getComponent(), n3 = document.body;
      if (t3) {
        let o3 = t3.querySelector("#" + e3);
        if (o3) return n3 = o3, n3;
      }
      return null;
    }
    createWidgetWrapperIdentifier() {
      return this.elementIdentifier = 1e4 * Math.random(), this.elementIdentifier.toString();
    }
  }
  class Io extends To {
    constructor() {
      super(...arguments), this.html = "", this.css = "", this.js = "", this.childWidgets = [], this.childWidgetElement = [], this.widgetState = {}, this.parentElement = "";
    }
    getElement() {
      return this.element;
    }
    setTitle(e3) {
      document.title = e3;
    }
    getHtml() {
      return this.html;
    }
    UpdateChildData(e3, t3) {
      let n3 = t3;
      n3.data = e3, n3.render(), n3.update();
    }
    update() {
    }
    setState(e3) {
      this.data = e3, this.notify(), this.render();
    }
    loadChildWidgets() {
      this.childWidgets.map(((e3) => {
        let t3 = this.getElementById(e3.parentElement);
        t3 && (t3.innerHTML = ""), e3.mount(t3);
      }));
    }
    render() {
      this.element && (this.element.innerHTML = this.getHtml()), this.after_render(), this.widgetMounted && this.loadChildWidgets();
    }
    getElementByClassName(e3) {
      let t3 = this.getComponent();
      return t3 ? null == t3 ? void 0 : t3.querySelectorAll("." + e3) : [];
    }
    mount_child() {
    }
    mount(e3) {
      return t3 = this, n3 = void 0, i3 = function* () {
        e3 && (this.element = document.createElement("div"), this.element.id = this.createWidgetWrapperIdentifier(), this.element.innerHTML = this.getHtml(), e3.appendChild(this.element), this.parentElement = e3.id, this.before_render(), this.mount_child(), this.widgetMounted = true);
      }, new ((o3 = void 0) || (o3 = Promise))((function(e4, r3) {
        function c3(e5) {
          try {
            s3(i3.next(e5));
          } catch (e6) {
            r3(e6);
          }
        }
        function a3(e5) {
          try {
            s3(i3.throw(e5));
          } catch (e6) {
            r3(e6);
          }
        }
        function s3(t4) {
          var n4;
          t4.done ? e4(t4.value) : (n4 = t4.value, n4 instanceof o3 ? n4 : new o3((function(e5) {
            e5(n4);
          }))).then(c3, a3);
        }
        s3((i3 = i3.apply(t3, n3 || [])).next());
      }));
      var t3, n3, o3, i3;
    }
    before_render() {
      this.render();
    }
    after_render() {
      console.log("this is calling the after render", this);
    }
    renderChildWidgets() {
      function e3(t3) {
        var n3;
        t3 && (null === (n3 = t3.childWidgets) || void 0 === n3 || n3.forEach(((t4) => {
          e3(t4);
        })), t3.render());
      }
      console.log("this is the render child widget", this), this.childWidgets.forEach(((t3) => {
        e3(t3);
      }));
    }
    setWidgetState(e3, t3) {
      this.widgetState[e3] = t3, (function e4(t4) {
        t4 && Array.isArray(t4.childWidgets) && t4.childWidgets.forEach(((n3) => {
          n3.widgetState = Object.assign(Object.assign({}, n3.widgetState), t4.widgetState), e4(n3);
        }));
      })(this), this.renderChildWidgets();
    }
    getWidgetState(e3, t3) {
      return Object.keys.length && this.widgetState[e3] ? this.widgetState[e3] : t3;
    }
  }
  var wo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class ko extends Io {
    constructor() {
      super(...arguments), this.childComponents = [], this.componentMounted = false, this.oldHtml = null, this.phonebooks = [], this.childrenData = {}, this.childWidgets = [], this.typeValueList = [], this.widgetType = "the_element_name", this.parentConceptList = [];
    }
    getUserId() {
      return wo(this, void 0, void 0, (function* () {
        const e3 = yield new Promise(((e4) => {
          let t3 = (null === localStorage || void 0 === localStorage ? void 0 : localStorage.getItem("profile")) || "";
          t3 ? e4(JSON.parse(t3)) : e4();
        }));
        return null == e3 ? void 0 : e3.userId;
      }));
    }
    getTypeValueList() {
      return wo(this, arguments, void 0, (function* (e3 = "") {
        return new Promise(((t3) => wo(this, void 0, void 0, (function* () {
          const n3 = null == (e3 = this.widgetType) ? void 0 : e3.match(/^[a-z0-9]+_[a-z0-9]+/i), o3 = n3 ? n3[0] : "", i3 = null == e3 ? void 0 : e3.match(/^([a-z0-9]+).*_([a-z0-9]+)$/i), r3 = i3 ? `${i3[1]}_${i3[2]}` : "";
          let c3 = [], a3 = new so();
          a3.type = r3, a3.search = "1", a3.logicoperator = ">", a3.name = "emailfilter", a3.operateon = "entityEmail", a3.composition = false, c3.push(a3);
          let s3 = new Fo();
          s3.typeConnection = e3, s3.name = "entityEmail";
          let l3 = new Fo();
          l3.type = o3, l3.filterLogic = "( emailfilter )", l3.filters = c3, l3.name = "top", l3.inpage = 100, l3.freeschemaQueries = [s3], l3.outputFormat = Dn.y0, Mo(l3, "").subscribe(((n4) => {
            if (null == n4 ? void 0 : n4.length) {
              const i4 = null == n4 ? void 0 : n4.map(((t4) => {
                var n5, i5, c4, a4, s4, l4, d3;
                const h3 = null === (a4 = null === (c4 = null === (i5 = null === (n5 = t4.data) || void 0 === n5 ? void 0 : n5[o3]) || void 0 === i5 ? void 0 : i5[e3]) || void 0 === c4 ? void 0 : c4.data) || void 0 === a4 ? void 0 : a4[r3];
                return { id: null === (d3 = null === (l4 = null === (s4 = t4.data) || void 0 === s4 ? void 0 : s4[o3]) || void 0 === l4 ? void 0 : l4[e3]) || void 0 === d3 ? void 0 : d3.id, name: h3, text: h3 };
              }));
              return this.typeValueList = i4, t3(i4), i4;
            }
          }));
        }))));
      }));
    }
    setTitle(e3) {
      document.title = e3;
    }
    getHtml() {
      return this.html;
    }
    createRandomNumber() {
      return this.elementIdentifier = 1e4 * Math.random(), this.elementIdentifier;
    }
    mount_child() {
      return wo(this, void 0, void 0, (function* () {
        try {
          new Function("tsccs", `
        return (async function() {
          ${this.mountChildWidgetsFunction}
        }).call(this);
      `).bind(this)(o2);
        } catch (e3) {
          throw console.log("This is the error in the mount child", e3), e3;
        }
      }));
    }
    setProperty(e3) {
      return wo(this, void 0, void 0, (function* () {
        return this.widgetType = e3, this.getTypeValueList(this.widgetType).then((() => {
          var e4, t3, n3;
          null === (e4 = this.element) || void 0 === e4 || e4.setAttribute("data-type-value", this.widgetType), null === (n3 = null === (t3 = this.element) || void 0 === t3 ? void 0 : t3.parentElement) || void 0 === n3 || n3.setAttribute("data-type-value", this.widgetType), this.render();
        })), this;
      }));
    }
    createTypeEditor(e3) {
      !(function(e4, t3) {
        if (e4) {
          const n3 = document.querySelector("#widget-properties #widget-type"), o3 = null == n3 ? void 0 : n3.querySelectorAll("input");
          null == o3 || o3.forEach(((e5) => {
            null == e5 || e5.remove();
          }));
          const i3 = e4.target.closest(".added-widget-container"), r3 = e4.target.closest("div");
          let c3 = "";
          i3 ? c3 = null == i3 ? void 0 : i3.getAttribute("data-type-value") : r3 && (c3 = null == r3 ? void 0 : r3.getAttribute("data-type-value"));
          const a3 = document.createElement("input");
          a3.setAttribute("type", "text"), a3.setAttribute("name", "input-widgetTypeValue"), a3.setAttribute("of", t3.elementIdentifier.toString()), a3.setAttribute("class", "form-control"), a3.setAttribute("id", "widgetType"), a3.setAttribute("onchange", "updateWidgetTypeValue(event)"), t3.widgetType ? a3.value = t3.widgetType : a3.setAttribute("placeholder", "e.g. the_entity");
          let s3 = t3;
          a3.addEventListener("change", (function(e5) {
            var t4, n4, o4;
            const i4 = null === (t4 = null == e5 ? void 0 : e5.target) || void 0 === t4 ? void 0 : t4.value;
            s3.widgetType = i4, s3.before_render(), s3.loadChildWidgets(), null === (o4 = null === (n4 = s3.element) || void 0 === n4 ? void 0 : n4.parentElement) || void 0 === o4 || o4.setAttribute("data-type-value", s3.widgetType);
          })), null == n3 || n3.appendChild(a3);
        }
      })(e3, this);
    }
    mount(e3) {
      return wo(this, void 0, void 0, (function* () {
        if (e3) {
          this.element = document.createElement("div"), this.element.id = this.createWidgetWrapperIdentifier();
          let t3 = this;
          this.inDevelopment && (this.element.onclick = function(e4) {
            e4.preventDefault(), t3.createTypeEditor(e4);
          }, this.element.className = "mftsccs-marking-element"), this.element.innerHTML = this.getHtml(), null == e3 || e3.setAttribute("data-type-value", t3.widgetType), e3.appendChild(this.element), this.parentElement = e3.id, 0 == this.componentMounted || 0 == this.widgetMounted ? (this.before_render(), this.mount_child(), this.widgetMounted = true, this.componentMounted = true) : this.render(), this.childWidgetElement = this.getElementByClassName("added-widget-container");
        }
      }));
    }
    before_render() {
      try {
        new Function("tsccs", `
        return (async function() {
          ${this.componentDidMountFunction}
        }).call(this);
      `).bind(this)(o2);
      } catch (e3) {
        throw console.log("This is the error in the before render", e3), e3;
      }
    }
    after_render() {
      try {
        new Function("tsccs", `
        return (async function() {
          ${this.addEventFunction}
        }).call(this);
      `).bind(this)(o2);
      } catch (e3) {
        throw console.log("This is the error in the after render", e3), e3;
      }
    }
    CreateConnectionBetweenEntityLocal(e3, t3, n3) {
      return wo(this, void 0, void 0, (function* () {
        var o3;
        const i3 = e3.userId, r3 = (null === (o3 = e3.type) || void 0 === o3 ? void 0 : o3.characterValue) + "_" + n3, c3 = yield (0, le2.$)(r3, 999, 999, i3);
        return yield (0, on2.F)(e3.id, t3.id, c3.id, 1e3), "connection created";
      }));
    }
  }
  var No = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Ao {
    constructor() {
      this.actions = { concepts: [], connections: [] }, this.success = true, this.transactionId = Math.random().toString().substring(5);
    }
    initialize() {
      return No(this, void 0, void 0, (function* () {
        yield ao.H.initializeTransaction(this.transactionId);
      }));
    }
    commitTransaction() {
      return No(this, void 0, void 0, (function* () {
        if (!this.success) throw Error("Query Transaction Expired");
        yield ao.H.SyncDataOnline(this.transactionId), this.actions = { concepts: [], connections: [] }, this.success = false;
      }));
    }
    rollbackTransaction() {
      return No(this, void 0, void 0, (function* () {
        this.success = false, this.actions = { concepts: [], connections: [] }, yield ao.H.rollbackTransaction(this.transactionId, this.actions);
      }));
    }
    markAction() {
      return No(this, void 0, void 0, (function* () {
        yield ao.H.markTransactionActions(this.transactionId, this.actions);
      }));
    }
    MakeTheInstanceConceptLocal(e3, t3) {
      return No(this, arguments, void 0, (function* (e4, t4, n3 = false, o3, i3, r3 = 999, c3 = 0) {
        try {
          if (!this.success) throw Error("Query Transaction Expired");
          const a3 = yield (0, K2.k)(e4, t4, n3, o3, i3, r3, c3, this.actions);
          return yield this.markAction(), a3;
        } catch (e5) {
          throw console.log(e5), this.success = false, e5;
        }
      }));
    }
    MakeTheTypeConceptLocal(e3, t3, n3, o3) {
      return No(this, void 0, void 0, (function* () {
        try {
          if (!this.success) throw Error("Query Transaction Expired");
          const i3 = yield (0, le2.$)(e3, t3, n3, o3, this.actions);
          return yield this.markAction(), i3;
        } catch (e4) {
          throw console.log(e4), this.success = false, e4;
        }
      }));
    }
    CreateConnectionBetweenTwoConceptsLocal(e3, t3, n3) {
      return No(this, arguments, void 0, (function* (e4, t4, n4, o3 = false) {
        try {
          if (!this.success) throw Error("Query Transaction Expired");
          const i3 = yield (0, Ln.h)(e4, t4, n4, o3, this.actions);
          return yield this.markAction(), i3;
        } catch (e5) {
          throw console.log(e5), this.success = false, e5;
        }
      }));
    }
    CreateTheConnectionLocal(e3, t3, n3) {
      return No(this, arguments, void 0, (function* (e4, t4, n4, o3 = 1, i3 = "", r3 = 999) {
        try {
          if (!this.success) throw Error("Query Transaction Expired");
          const c3 = yield (0, on2.F)(e4, t4, n4, o3, i3, r3, this.actions);
          return yield this.markAction(), c3;
        } catch (e5) {
          throw console.log(e5), this.success = false, e5;
        }
      }));
    }
    CreateTheCompositionLocal(e3) {
      return No(this, arguments, void 0, (function* (e4, t3 = null, n3 = null, o3 = null, i3 = null, r3 = null, c3 = null, a3 = false) {
        try {
          if (!this.success) throw Error("Query Transaction Expired");
          const s3 = yield (0, E2.R)(e4, t3, n3, o3, i3, r3, c3, a3, this.actions);
          return yield this.markAction(), s3;
        } catch (e5) {
          throw console.log(e5), this.success = false, e5;
        }
      }));
    }
  }
  const Lo = { number: /^\d+(\.\d+)?$/, text: /^[\s\S]*$/, textOnly: /^[A-Za-z\s]+$/, email: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/, document: /\.(pdf|docx?|pptx?|xlsx?)$/i, sound: /\.(mp3|wav|ogg|flac)$/i, image: /\.(jpg|jpeg|png|gif|bmp|svg|webp)$/i, video: /\.(mp4|avi|mov|mkv|flv|webm)$/i, url: /^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/, date: /^\d{4}-\d{2}-\d{2}$/, time: /^(?:[01]\d|2[0-3]):[0-5]\d$/, password: /^.{6,}$/, ipaddress: /^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$|^([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4})$/, uuid: /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/ };
  var So = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Go {
    constructor() {
      Go.cacheInitialized || Go.initializeAnomalyParameters();
    }
    static initializeAnomalyParameters() {
      return So(this, void 0, void 0, (function* () {
        try {
          yield Go.getAnomalyParameters(), Go.refreshCache(), Go.cacheInitialized = true;
        } catch (e3) {
          console.error("Error during anomaly parameter initialization:", e3);
        }
      }));
    }
    static getAnomalyParameters() {
      return So(this, void 0, void 0, (function* () {
        const e3 = Date.now();
        if (Go.anomalyParamsCache && e3 - Go.lastFetchedTime < Go.cacheExpiryThreshold) return console.log("Returning cached anomaly parameters"), Go.anomalyParamsCache;
        try {
          return yield Go.fetchAnomalyParameters();
        } catch (e4) {
          throw console.error("Error fetching anomaly parameters:", e4), e4;
        }
      }));
    }
    static fetchAnomalyParameters() {
      return So(this, void 0, void 0, (function* () {
        try {
          const e3 = yield fetch("https://devai.freeschema.com/v1/get-frontend-anomaly-parameters", { method: "GET", headers: { "Content-Type": "application/json" } });
          if (!e3.ok) throw new Error("Failed to fetch anomaly parameters");
          const t3 = yield e3.json();
          return Go.anomalyParamsCache = t3.data, Go.lastFetchedTime = Date.now(), t3.data;
        } catch (e3) {
          throw console.error("API Fetch Error:", e3), e3;
        }
      }));
    }
    static refreshCache() {
      return So(this, void 0, void 0, (function* () {
        try {
          Date.now() - Go.lastFetchedTime > Go.cacheExpiryThreshold && (yield Go.getAnomalyParameters());
        } catch (e3) {
          console.error("Error refreshing anomaly parameters cache:", e3);
        }
      }));
    }
    detectDataType(e3) {
      for (const [t3, n3] of Object.entries(Lo)) if (n3.test(e3)) return t3;
      return null;
    }
    checkConceptAnomaly(e3, t3) {
      return So(this, void 0, void 0, (function* () {
        const n3 = [];
        try {
          if (!t3) return n3.push("Null value"), { valid: false, warnings: n3 };
          const o3 = Go.anomalyParamsCache;
          e3.startsWith("the_") || (e3 = `the_${e3}`);
          const i3 = o3[e3];
          if (console.log("Concept Details : ", i3), !i3) return console.warn(`No concept details found for type: ${e3}`), n3.push(`No concept details found for type: ${e3}`), { valid: false, warnings: n3 };
          const r3 = t3.length, { min_length: c3, max_length: a3, data_types: s3 } = i3, l3 = r3 >= c3 && r3 <= a3, d3 = this.detectDataType(t3), h3 = s3.includes(d3);
          return l3 || n3.push(`Length of '${t3}' is outside the allowed range (min: ${c3}, max: ${a3}). Current length: ${r3}.`), h3 || n3.push(`Type mismatch for '${t3}'. Expected types: ${s3.join(", ")}, detected type: ${d3}.`), l3 && h3 && n3.push(`Concept ${e3} is valid. Length: ${r3}, Type: ${d3}`), { valid: l3 && h3, warnings: n3 };
        } catch (o3) {
          return console.error(`Error checking anomaly for ${e3} with value ${t3}:`, o3), { valid: false, warnings: n3 };
        }
      }));
    }
    static checkAnomalyInBulk(e3) {
      return So(this, void 0, void 0, (function* () {
        Go.cacheInitialized || (yield Go.initializeAnomalyParameters());
        try {
          const t3 = {};
          for (const [n3, o3] of Object.entries(e3)) {
            const e4 = o3.value, { valid: i3, warnings: r3 } = yield new Go().checkConceptAnomaly(n3, e4);
            t3[n3] = { valid: i3, warnings: r3 };
          }
          return t3;
        } catch (e4) {
          throw console.error("Bulk Anomaly Check Error:", e4), e4;
        }
      }));
    }
    static getExportedFunction() {
      console.log("Main : ", o2);
      const e3 = Object.keys(o2);
      return console.log("The exported List : ", e3), e3;
    }
    static getFunctionaAnomalyParameters() {
    }
  }
  Go.anomalyParamsCache = null, Go.cacheInitialized = false, Go.lastFetchedTime = 0, Go.cacheExpiryThreshold = 6e5;
  var xo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Bo {
    checkUniqueness(e3, t3) {
      return xo(this, void 0, void 0, (function* () {
        const n3 = yo.V.logfunction("checkUniqueness");
        e3.startsWith("the_") || (e3 = "the_" + e3);
        let o3 = (yield Se2(e3, 999)).id, i3 = yield (0, re2.A)(t3, o3);
        return console.log("This is the concept for validator", i3), !(i3.id > 0 || (yo.V.logUpdate(n3), 0));
      }));
    }
    validateField(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3, d3, u3, p3) {
      return xo(this, arguments, void 0, (function* (e4, t4, n4, o4, i4, r4, c4, a4, s4, l4, d4, u4, p4, f3 = false) {
        var y3;
        const g3 = yo.V.logfunction("validateField");
        try {
          performance.now();
          const e5 = {};
          if (!p4 || null !== o4 && "" !== o4 || (e5.required = "This is required field"), n4 && o4) {
            let t5 = Lo[n4];
            t5 && "" !== o4 && !t5.test(o4) && (e5.dataType = `Invalid value for ${n4}`);
          }
          if (i4 && o4) {
            const t5 = "string" == typeof i4 ? new RegExp(i4) : i4;
            "" === o4 || t5.test(o4) || (e5.pattern = "Pattern doesn't match with value");
          }
          if (o4 && null !== c4 && o4.length > c4 && (e5.maxLength = `Length exceeds the maximum length of ${c4}`), o4 && null !== a4 && o4.length < a4 && (e5.minLength = `Length must be at least ${a4} characters long`), null !== s4 && o4 && !isNaN(Number(o4)) && Number(o4) < s4 && (e5.minValue = `Value must be greater than or equal to ${s4}`), null !== l4 && o4 && !isNaN(Number(o4)) && Number(o4) > l4 && (e5.maxValue = `Value must be less than or equal to ${l4}`), u4 && t4 && d4) {
            const t5 = d4.split(",").map(((e6) => e6.trim().toLowerCase())), n5 = null === (y3 = u4.name.split(".").pop()) || void 0 === y3 ? void 0 : y3.toLowerCase();
            n5 && !t5.includes(n5) && (e5.accept = `File must be a valid file type: ${t5.join(", ")}`);
          }
          return r4 && f3 && o4 && ((yield this.checkUniqueness(r4, o4)) || (e5.unique = "Value is not unique")), yo.V.logUpdate(g3), e5;
        } catch (e5) {
          throw (0, h2.ey)(g3, "Validator.validateField", e5), e5;
        }
      }));
    }
    validateForm(e3) {
      return xo(this, void 0, void 0, (function* () {
        const t3 = yo.V.logfunction("validateForm");
        try {
          performance.now();
          const n3 = {};
          for (const t4 in e3) {
            const { value: o3, fieldType: i3, dataType: r3, pattern: c3, conceptType: a3, maxLength: s3 = null, minLength: l3 = null, minValue: d3 = null, maxValue: h3 = null, accept: u3 = null, file: p3 = null, required: f3, isUnique: y3 } = e3[t4], g3 = yield this.validateField(t4, i3, r3, o3, c3, a3, s3, l3, d3, h3, u3, p3, f3, y3);
            Object.keys(g3).length > 0 && (n3[t4] = g3);
          }
          return yo.V.logUpdate(t3), n3;
        } catch (e4) {
          throw (0, h2.ey)(t3, "Validator.validateForm", e4), e4;
        }
      }));
    }
    validate(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3, d3, u3, p3, f3 = false) {
      const y3 = yo.V.logfunction("validate");
      try {
        let h3 = {};
        return this.validateField(e3, t3, n3, o3, i3, r3, c3, a3, s3, l3, d3, u3, p3, f3).then(((e4) => {
          Object.keys(e4).length > 0 ? (h3.status = false, h3.details = e4) : h3.status = true;
        })), console.error("Error on validate object"), yo.V.logUpdate(y3), h3;
      } catch (e4) {
        (0, h2.ey)(y3, "Validator.validate", e4);
      }
    }
  }
  const Ro = (e3) => {
    var t3;
    const n3 = document.getElementsByName(e3)[0];
    if (!n3) return console.warn(`Element with NAME "${e3}" not found.`), { value: null, fieldType: null, dataType: null, pattern: null, conceptType: null, maxLength: null, minLength: null, minValue: null, maxValue: null, accept: null, file: null, required: false, isUnique: true };
    const o3 = n3.hasAttribute("required") || "true" === n3.getAttribute("data-required"), i3 = n3.hasAttribute("isUnique") && "true" === n3.getAttribute("isUnique");
    return { value: n3.value, fieldType: n3.type, dataType: n3.getAttribute("data-type"), pattern: n3.getAttribute("data-pattern"), conceptType: n3.getAttribute("concept-type"), maxLength: n3.getAttribute("data-maxlength") ? parseInt(n3.getAttribute("data-maxlength")) : null, minLength: n3.getAttribute("data-minlength") ? parseInt(n3.getAttribute("data-minlength")) : null, minValue: n3.getAttribute("data-min") ? parseInt(n3.getAttribute("data-min")) : null, maxValue: n3.getAttribute("data-max") ? parseInt(n3.getAttribute("data-max")) : null, accept: n3.getAttribute("accept") || null, file: "file" === n3.type && (null === (t3 = n3.files) || void 0 === t3 ? void 0 : t3[0]) || null, required: o3, isUnique: i3 };
  };
  var bo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Do(e3, t3) {
    var n3 = arguments;
    return bo(this, void 0, void 0, (function* () {
      const o3 = yo.V.logfunction("DeleteConnectionByType", n3);
      if (oi) {
        o3.serviceWorker = true;
        try {
          const n4 = yield ui("DeleteConnectionByType", { id: e3, linker: t3 });
          return yo.V.logUpdate(o3), n4.data;
        } catch (e4) {
          console.error("DeleteConnectionByType sw error: ", e4), (0, h2.ey)(o3, "DeleteConnectionByType", e4), vi(e4);
        }
      }
      let i3 = yield xe2(e3);
      for (let e4 = 0; e4 < i3.length; e4++) ze2.d.AddConnection(i3[e4]);
      let r3 = yield ze2.d.GetConnectionsOfConcept(e3), c3 = yield (0, v2.A)(t3), a3 = [];
      for (let e4 = 0; e4 < r3.length; e4++) r3[e4].typeId == c3.id && a3.push(r3[e4]);
      for (let e4 = 0; e4 < a3.length; e4++) (0, J2.m)(a3[e4].id);
      yo.V.logUpdate(o3);
    }));
  }
  function Wo(e3, t3) {
    return bo(this, arguments, void 0, (function* (e4, t4, n3 = false) {
      if (oi) try {
        return (yield ui("GetAllTheConnectionsByTypeAndOfTheConcept", { id: e4, linker: t4, reverse: n3 })).data;
      } catch (e5) {
        console.error("GetAllTheConnectionsByTypeAndOfTheConcept sw error: ", e5), vi(e5);
      }
      let o3 = [];
      if (n3) {
        let n4 = yield Re2(e4), i3 = yield Se2(t4, 999);
        for (let e5 = 0; e5 < n4.length; e5++) n4[e5].typeId == i3.id && o3.push(n4[e5]);
      } else {
        let n4 = yield xe2(e4);
        for (let e5 = 0; e5 < n4.length; e5++) ze2.d.AddConnection(n4[e5]);
        let i3 = yield ze2.d.GetConnectionsOfConcept(e4), r3 = yield (0, v2.A)(t4);
        for (let e5 = 0; e5 < i3.length; e5++) i3[e5].typeId == r3.id && o3.push(i3[e5]);
      }
      return o3;
    }));
  }
  class Fo {
    constructor() {
      this.type = "", this.inpage = 10, this.page = 1, this.concepts = [], this.conceptIds = [], this.selectors = [], this.freeschemaQueries = [], this.filters = [], this.filterLogic = "", this.typeConnection = "", this.order = "DESC", this.outputFormat = Dn.yv, this.name = "", this.reverse = false, this.limit = false, this.includeInFilter = false, this.isOldConnectionType = false;
    }
  }
  var Eo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Uo(e3) {
    var t3 = arguments;
    return Eo(this, arguments, void 0, (function* (e4, n3 = "") {
      const o3 = yo.V.logfunction("FreeschemaQueryApi", t3);
      var i3 = (0, d2.ab)("application/json", n3);
      const r3 = l2.B.FreeschemaQueryUrl(), c3 = JSON.stringify(e4);
      try {
        const e5 = yield fetch(r3, { method: "POST", headers: i3, body: c3 });
        return e5.ok ? yield e5.json() : ((0, h2.ry)(e5), console.log("This is the freeschema query error", e5.status), []);
      } catch (e5) {
        console.log("This is the freeschema query error others", e5), (0, h2.Mb)(e5, r3), (0, h2.ey)(o3, "FreeschemaQueryApi", e5);
      }
    }));
  }
  var _o = n2(5898), Oo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  class Vo extends On.w {
    constructor(e3, t3) {
      super(), this.query = new Fo(), this.countInfoStrings = [], this.order = "DESC", this.query = e3, this.format = e3.outputFormat, this.order = e3.order;
    }
    bind() {
      return Oo(this, void 0, void 0, (function* () {
        var e3, t3;
        if (this.isDataLoaded) for (let e4 = 0; e4 < this.compositionIds.length; e4++) this.listenToEvent(this.compositionIds[e4]);
        else {
          if (this.isDataLoaded = true, this.query.outputFormat = Dn.BG, "" != this.query.type) {
            let e4 = yield Se2(this.query.type, 999);
            this.listenToEventType(e4.id);
          }
          let n3 = yield Uo(this.query, "");
          this.conceptIds = n3.conceptIds, this.internalConnections = null !== (e3 = n3.internalConnections) && void 0 !== e3 ? e3 : [], this.linkers = null !== (t3 = n3.linkers) && void 0 !== t3 ? t3 : [], this.reverse = n3.reverse, this.compositionIds = n3.mainCompositionIds;
          for (let e4 = 0; e4 < this.compositionIds.length; e4++) this.listenToEvent(this.compositionIds[e4]);
          this.countInfoStrings = n3.countinfo;
        }
        return yield this.build();
      }));
    }
    build() {
      return Oo(this, void 0, void 0, (function* () {
        yo.V.logfunction("build", ["schemaquery", this.compositionIds]);
        let e3 = (0, _o.w)(this.countInfoStrings);
        return this.format == Dn.y0 ? this.data = yield (0, qn.e$)(this.linkers, this.conceptIds, this.compositionIds, this.reverse, e3, this.order) : this.format == Dn.ZJ ? this.data = yield (0, qn.y6)(this.linkers, this.conceptIds, this.compositionIds, this.reverse, e3, this.order) : this.data = yield (0, qn.b6)(this.linkers, this.conceptIds, this.compositionIds, this.reverse, e3), this.data;
      }));
    }
  }
  function Mo(e3, t3) {
    return new Vo(e3, t3);
  }
  class Po {
    constructor() {
      this.id = 0, this.name = "", this.html = "", this.css = "", this.js = "", this.library = { css: [], js: [] }, this.timestamp = "", this.widgetId = 0, this.type = "", this.clean = "", this.after_render = "", this.before_render = "", this.update = "", this.origin = 0, this.version = 0, this.mount_child = "", this.children = [], this.wrapper = "0", this.widget = new ko();
    }
  }
  var jo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function Ho(e3, t3, n3) {
    return jo(this, void 0, void 0, (function* () {
      var o3;
      const i3 = yo.V.logfunction("CreateConnectionBetweenEntityLocal", [e3.id, t3.id, n3]), r3 = e3.userId, c3 = (null === (o3 = e3.type) || void 0 === o3 ? void 0 : o3.characterValue) + "_" + n3, a3 = yield (0, le2.$)(c3, 999, 999, r3);
      console.log(yield (0, on2.F)(e3.id, t3.id, a3.id, 1e3)), yo.V.logUpdate(i3);
    }));
  }
  var $o = n2(4310), Jo = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  function zo(e3, t3, n3) {
    return Jo(this, void 0, void 0, (function* () {
      var o3;
      const i3 = yield en2(e3, "the_page_body");
      (null === (o3 = null == i3 ? void 0 : i3[0]) || void 0 === o3 ? void 0 : o3.id) ? yield Qo(i3[0].id, t3, n3) : t3.innerHTML = "<h4>Invalid or Page doesn't exist</h4>";
    }));
  }
  function qo(e3, t3, n3) {
    return Jo(this, void 0, void 0, (function* () {
      var o3;
      const i3 = yield en2(e3, "the_widget_latest");
      if (0 == (null == i3 ? void 0 : i3.length)) yield Qo(e3, t3, n3);
      else {
        const e4 = null === (o3 = null == i3 ? void 0 : i3[0]) || void 0 === o3 ? void 0 : o3.id;
        e4 && (yield Qo(e4, t3, n3));
      }
    }));
  }
  function Qo(e3, t3, n3) {
    return Jo(this, void 0, void 0, (function* () {
      try {
        const o3 = yield (0, $o.C)(e3), i3 = yield Yo(e3, [], o3);
        if (!i3.name) return void (t3.innerHTML = "<h4>Invalid or Widget doesn't exist</h4>");
        const r3 = t3, c3 = yield Zo(i3, r3, void 0, n3);
        console.log("this is the tree newWidget", i3);
        const a3 = document.createElement("style");
        a3.innerHTML = i3.css + c3.css, r3.appendChild(a3);
        const s3 = document.createElement("script");
        s3.innerHTML = i3.js, r3.appendChild(s3), r3.querySelectorAll(".wb-initial-empty").forEach(((e4) => {
          e4.classList.remove("wb-initial-empty");
        })), document.querySelectorAll('[onclick="widgetSelected(event)"]').forEach(((e4) => {
          e4.removeAttribute("onclick");
        }));
      } catch (e4) {
        console.error("Error Caught Rendering Widget");
      }
    }));
  }
  function Xo(e3) {
    return Jo(this, arguments, void 0, (function* (e4, t3 = [], n3 = "") {
      const o3 = yield (0, $o.C)(e4);
      return yield Yo(e4, [], o3);
    }));
  }
  function Yo(e3) {
    return Jo(this, arguments, void 0, (function* (e4, t3 = [], n3, o3 = "") {
      var i3, r3, c3, a3, s3, l3, d3, h3, u3, p3, f3, y3, g3, v3, C3, m3, T3, I3, w3, k3, N3, A3, L3, S3, G3, x3, B3, R3, b3, D3, W3, F3, E3, U3, _3, O3, V3, M3, P3, j3, H3, $3, J3, z3;
      try {
        const q3 = new Po(), Q3 = (0, $o.i)(n3, e4);
        t3.push(e4);
        const X3 = null === (i3 = null == Q3 ? void 0 : Q3.data) || void 0 === i3 ? void 0 : i3.the_widget;
        q3.name = null === (c3 = null === (r3 = null == X3 ? void 0 : X3.the_widget_name) || void 0 === r3 ? void 0 : r3.data) || void 0 === c3 ? void 0 : c3.the_name, q3.html = null === (s3 = null === (a3 = null == X3 ? void 0 : X3.the_widget_html) || void 0 === a3 ? void 0 : a3.data) || void 0 === s3 ? void 0 : s3.the_html, q3.css = null === (d3 = null === (l3 = null == X3 ? void 0 : X3.the_widget_css) || void 0 === l3 ? void 0 : l3.data) || void 0 === d3 ? void 0 : d3.the_css, q3.js = null === (u3 = null === (h3 = null == X3 ? void 0 : X3.the_widget_js) || void 0 === h3 ? void 0 : h3.data) || void 0 === u3 ? void 0 : u3.the_js, q3.origin = Number(null === (f3 = null === (p3 = null == X3 ? void 0 : X3.the_widget_origin) || void 0 === p3 ? void 0 : p3.data) || void 0 === f3 ? void 0 : f3.the_origin), q3.version = null === (g3 = null === (y3 = null == X3 ? void 0 : X3.the_widget_version) || void 0 === y3 ? void 0 : y3.data) || void 0 === g3 ? void 0 : g3.the_version, q3.clean = null === (C3 = null === (v3 = null == X3 ? void 0 : X3.the_widget_clean) || void 0 === v3 ? void 0 : v3.data) || void 0 === C3 ? void 0 : C3.the_clean, q3.timestamp = null === (T3 = null === (m3 = null == X3 ? void 0 : X3.the_widget_timestamp) || void 0 === m3 ? void 0 : m3.data) || void 0 === T3 ? void 0 : T3.the_timestamp, q3.id = Q3.id;
        const Y3 = null === (w3 = null === (I3 = null == X3 ? void 0 : X3.the_widget_type) || void 0 === I3 ? void 0 : I3.data) || void 0 === w3 ? void 0 : w3.the_type;
        q3.type = "null" == Y3 || null == Y3 ? "the_element_name" : Y3, q3.after_render = null === (N3 = null === (k3 = null == X3 ? void 0 : X3.the_widget_after_render) || void 0 === k3 ? void 0 : k3.data) || void 0 === N3 ? void 0 : N3.the_after_render, q3.before_render = null === (L3 = null === (A3 = null == X3 ? void 0 : X3.the_widget_before_render) || void 0 === A3 ? void 0 : A3.data) || void 0 === L3 ? void 0 : L3.the_before_render, q3.update = null === (G3 = null === (S3 = null == X3 ? void 0 : X3.the_widget_update) || void 0 === S3 ? void 0 : S3.data) || void 0 === G3 ? void 0 : G3.the_update, q3.widgetId = e4, q3.mount_child = null === (B3 = null === (x3 = null == X3 ? void 0 : X3.the_widget_mount_child) || void 0 === x3 ? void 0 : x3.data) || void 0 === B3 ? void 0 : B3.the_mount_child;
        const Z3 = null == X3 ? void 0 : X3.the_widget_s_child;
        if (null == Z3 ? void 0 : Z3.length) for (let e5 = 0; e5 < Z3.length; e5++) {
          const i4 = (null === (D3 = null === (b3 = null === (R3 = Z3[e5]) || void 0 === R3 ? void 0 : R3.data.the_child_widget) || void 0 === b3 ? void 0 : b3.the_child_widget_info) || void 0 === D3 ? void 0 : D3.id) || (null === (U3 = null === (E3 = null === (F3 = null === (W3 = Z3[e5]) || void 0 === W3 ? void 0 : W3.data.the_child_widget) || void 0 === F3 ? void 0 : F3.the_child_widget_parent) || void 0 === E3 ? void 0 : E3.data) || void 0 === U3 ? void 0 : U3.the_parent), r4 = yield Yo(i4, t3, n3, o3), c4 = null === (P3 = null === (M3 = null === (V3 = null === (O3 = null === (_3 = Z3[e5]) || void 0 === _3 ? void 0 : _3.data) || void 0 === O3 ? void 0 : O3.the_child_widget) || void 0 === V3 ? void 0 : V3.the_child_widget_type) || void 0 === M3 ? void 0 : M3.data) || void 0 === P3 ? void 0 : P3.the_type, a4 = null === (z3 = null === (J3 = null === ($3 = null === (H3 = null === (j3 = Z3[e5]) || void 0 === j3 ? void 0 : j3.data) || void 0 === H3 ? void 0 : H3.the_child_widget) || void 0 === $3 ? void 0 : $3.the_child_widget_wrapper) || void 0 === J3 ? void 0 : J3.data) || void 0 === z3 ? void 0 : z3.the_wrapper;
          r4.type = "null" == c4 || null == c4 ? "the_element_name" : c4, r4.wrapper = a4, q3.children.push(r4);
        }
        return q3;
      } catch (e5) {
        throw console.error("error", e5), e5;
      }
    }));
  }
  function Zo(e3, t3) {
    return Jo(this, arguments, void 0, (function* (e4, t4, n3 = true, o3, i3) {
      var r3, c3;
      const a3 = new ko();
      a3.html = e4.html, a3.widgetType = e4.type, a3.componentDidMountFunction = e4.before_render, a3.addEventFunction = e4.after_render, a3.mountChildWidgetsFunction = e4.mount_child, a3.widgetState = Object.assign({}, i3), o3 && (a3.data = o3), t4.innerHTML = "";
      const s3 = t4;
      if (s3 && (yield a3.mount(s3), e4.widget = a3, e4.children.length > 0 && (null === (r3 = a3.childWidgetElement) || void 0 === r3 ? void 0 : r3.length) > 0)) for (let t5 = 0; t5 < (null === (c3 = e4.children) || void 0 === c3 ? void 0 : c3.length); t5++) {
        const n4 = e4.children[t5];
        for (let e5 = 0; e5 < a3.childWidgetElement.length; e5++) {
          const t6 = a3.childWidgetElement[e5];
          if (n4.wrapper === t6.id) {
            const e6 = ei(n4);
            n4.html = `<div id="${n4.wrapper}">${n4.html}</div>`;
            const o4 = yield Zo(e6, t6, false, a3.data, a3.widgetState);
            a3.childWidgets.push(o4), a3.css = a3.css + o4.css + `#${t6.id} { ${n4.css} }`, o4.dataChange(((e7) => {
              var t7;
              const n5 = null === (t7 = null == e7 ? void 0 : e7.type) || void 0 === t7 ? void 0 : t7.characterValue;
              n5 && (a3.childrenData[n5] = e7);
            }));
          }
        }
      }
      return console.log("newWidget ->", a3, e4), yield ni(t4, ".widget_container"), a3;
    }));
  }
  function Ko(e3, t3) {
    return Jo(this, arguments, void 0, (function* (e4, t4, n3 = true, o3) {
      var i3, r3;
      let c3 = new ko();
      c3.html = e4.html, c3.widgetState = Object.assign({}, o3), c3.widgetType = e4.type, c3.componentDidMountFunction = e4.before_render, c3.addEventFunction = e4.after_render, c3.mountChildWidgetsFunction = e4.mount_child, c3.inDevelopment = true, t4.innerHTML = "";
      let a3 = t4;
      if (a3 && (yield c3.mount(a3), e4.widget = c3, e4.children.length > 0 && (null === (i3 = c3.childWidgetElement) || void 0 === i3 ? void 0 : i3.length) > 0)) for (let t5 = 0; t5 < (null === (r3 = e4.children) || void 0 === r3 ? void 0 : r3.length); t5++) {
        let n4 = e4.children[t5];
        for (let e5 = 0; e5 < c3.childWidgetElement.length; e5++) {
          let t6 = c3.childWidgetElement[e5];
          if (n4.wrapper === t6.id) {
            const e6 = ei(n4), o4 = yield Ko(e6, t6, false, c3.widgetState);
            c3.childWidgets.push(o4), c3.css = c3.css + o4.css + `#${t6.id} { ${n4.css} }`, o4.dataChange(((e7) => {
              var t7;
              console.log("This is the data change in child", e7);
              let n5 = null === (t7 = null == e7 ? void 0 : e7.type) || void 0 === t7 ? void 0 : t7.characterValue;
              n5 && (c3.childrenData[n5] = e7), console.log("new child data", c3.childrenData);
            }));
          }
        }
      }
      return console.log("newWidget ->", c3, e4), c3;
    }));
  }
  function ei(e3) {
    return e3.html = e3.html.replace(/<[^>]*\bclass=["'][^"']*\bwidget_container\b[^"']*["'][^>]*>/g, ((e4) => e4.replace(/\bwidget_container\b/g, "").trim())), e3.html = e3.html.replace(/<[^>]*\bdraggable=["'][^"']*\btrue\b[^"']*["'][^>]*>/g, ((e4) => e4.replace(/\btrue\b/g, "false").trim())), e3.html = e3.html.replace(/<[^>]*\bclass=["'][^"']*\bhover-element\b[^"']*["'][^>]*>/g, ((e4) => e4.replace(/\bhover-element\b/g, "").trim())), e3.html = e3.html.replace(/<[^>]*\bclass=["'][^"']*\bwb-block\b[^"']*["'][^>]*>/g, ((e4) => e4.replace(/\bwb-block\b/g, "").trim())), e3.html = e3.html.replace(/<[^>]*onclick="widgetSelected\(event\)"\s*,?\s*ondragover="_dragService\.dragOverWidgetElement\(event\)"\s*,?\s*ondrop="_dragService\.dropWidgetElement\(event\)"\s*,?\s*ondragstart="_dragService\.dragStartWidgetElement\(event\)"\s*,?\s*ondragend="_dragService\.dragEndWidgetElement\(event\)"[^>]*>/g, ((e4) => e4.replace(/onclick="widgetSelected\(event\)"/g, 'onclick=""').replace(/ondragover="_dragService\.dragOverWidgetElement\(event\)"/g, 'ondragover=""').replace(/ondrop="_dragService\.dropWidgetElement\(event\)"/g, 'ondrop=""').replace(/ondragstart="_dragService\.dragStartWidgetElement\(event\)"/g, 'ondragstart=""').replace(/ondragend="_dragService\.dragEndWidgetElement\(event\)"/g, 'ondragend=""').trim())), e3.html = e3.html.replace(/<[^>]*\bondragstart=["'][^"']*\b_dragService\.onWidgetDragStart\(event\)\b[^"']*["'][^>]*>/g, ((e4) => e4.replace(/\b_dragService\.onWidgetDragStart\(event\)\b/g, "").trim())), e3;
  }
  function ti(e3, t3) {
    return Jo(this, void 0, void 0, (function* () {
      return e3.querySelectorAll(t3).forEach(((e4) => {
        for (; e4.firstChild; ) e4.parentNode.insertBefore(e4.firstChild, e4);
        e4.remove();
      })), e3;
    }));
  }
  function ni(e3, t3) {
    return Jo(this, void 0, void 0, (function* () {
      const n3 = e3.querySelectorAll(t3);
      for (const e4 of n3) {
        const n4 = e4.parentElement;
        if (n4) {
          for (; e4.firstChild; ) {
            const o3 = yield ti(e4.firstChild, t3);
            n4.insertBefore(o3, e4);
          }
          n4.removeChild(e4);
        }
      }
    }));
  }
  var oi, ii = function(e3, t3, n3, o3) {
    return new (n3 || (n3 = Promise))((function(i3, r3) {
      function c3(e4) {
        try {
          s3(o3.next(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function a3(e4) {
        try {
          s3(o3.throw(e4));
        } catch (e5) {
          r3(e5);
        }
      }
      function s3(e4) {
        var t4;
        e4.done ? i3(e4.value) : (t4 = e4.value, t4 instanceof n3 ? t4 : new n3((function(e5) {
          e5(t4);
        }))).then(c3, a3);
      }
      s3((o3 = o3.apply(e3, t3 || [])).next());
    }));
  };
  const ri = Date.now().toString(36) + Math.random().toString(36).substring(2);
  let ci = [], ai = [], si = false;
  function li(e3) {
    si = e3;
  }
  function di(e3 = "", t3) {
    yt2.b.BearerAccessToken = e3, null == typeof document ? yt2.b.sessionId = t3 : yt2.b.sessionId = parseInt((0, yo.R)("SessionId")), oi && ui("updateAccessToken", { accessToken: e3, session: parseInt((0, yo.R)("SessionId")) });
  }
  function hi() {
    return ii(this, arguments, void 0, (function* (e3 = "", t3 = "", n3 = "", o3 = "", i3 = true, c3 = "", a3 = void 0, s3 = {}, d3 = {}) {
      var u3;
      try {
        l2.B.BASE_URL = e3, l2.B.AI_URL = t3, l2.B.NODE_URL = o3, l2.B.BASE_APPLICATION = c3, l2.B.LOG_SERVER = null !== (u3 = d3.logserver) && void 0 !== u3 ? u3 : "https://logdev.freeschema.com", console.log("setting the logserver", l2.B.LOG_SERVER, d3.logserver), di(n3);
        let i4 = Math.floor(1e8 * Math.random());
        l2.B.setRandomizer(i4);
        const p3 = { logApplication: false, logPackage: false, accessTracker: false, isTest: false };
        if (l2.B.FLAGS = p3, l2.B.FLAGS = Object.assign(Object.assign({}, p3), s3), (function(e4) {
          const t4 = yo.V.logfunction("initializeFlags", arguments);
          try {
            return e4.logApplication && (go.initialize(), yo.V.logApplicationActivationStatus = true, console.warn("Application log started.")), e4.logPackage && (yo.V.logPackageActivationStatus = true, console.warn("Package log started.")), e4.accessTracker && (Je2.J.activateStatus = true, console.warn("Access Tracker Activated.")), e4.isTest && (r2.B.isDataLoaded = true, r2.B.isCharacterLoaded = true, r2.B.isTypeLoaded = true, r2.B.isLocalDataLoaded = true, r2.B.isLocalTypeLoaded = true, r2.B.isLocalCharacterLoaded = true, r2.B.isConnectionLoaded = true, r2.B.isConnectionTypeLoaded = true, r2.B.isLocalConnectionLoaded = true), yo.V.logUpdate(t4), e4;
          } catch (e5) {
            throw (0, h2.ey)(t4, "initializeFlags", e5), e5;
          }
        })(l2.B.FLAGS), !("serviceWorker" in navigator)) return yield fi(), void console.warn("Service Worker not supported in this browser.");
        if ((function() {
          navigator.serviceWorker.addEventListener("message", ((e4) => ii(this, void 0, void 0, (function* () {
            var t4, n4, o4, i5;
            try {
              if (e4.data && "API_401" === e4.data.type) {
                const { requestDetails: o5 } = e4.data, i6 = { method: o5.method, headers: new Headers(o5.headers), body: o5.body }, r3 = yield fetch(o5.url, i6), c4 = yield null == r3 ? void 0 : r3.json();
                null === (n4 = null === (t4 = null === navigator || void 0 === navigator ? void 0 : navigator.serviceWorker) || void 0 === t4 ? void 0 : t4.controller) || void 0 === n4 || n4.postMessage({ type: "API_RESPONSE", messageId: e4.data.messageId, response: new Response(c4, { status: r3.status, statusText: r3.statusText, headers: r3.headers }) });
              }
            } catch (t5) {
              console.error("Error during listenPostMessage", t5), null === (i5 = null === (o4 = null === navigator || void 0 === navigator ? void 0 : navigator.serviceWorker) || void 0 === o4 ? void 0 : o4.controller) || void 0 === i5 || i5.postMessage({ type: "API_RESPONSE", messageId: e4.data.messageId });
            }
          }))));
        })(), (function() {
          fo.x.addEventListener("message", ((e4) => ii(this, void 0, void 0, (function* () {
            const { type: t4, payload: n4 } = e4.data;
            if (!t4) return;
            let o4 = { success: false, data: void 0 };
            pi[t4] ? yield pi[t4](n4) : console.warn(`Unable to handle "${t4}" case in BC service worker`);
          }))));
        })(), a3 && a3.activate && a3.manual) yield new Promise(((e4, t4) => {
          navigator.serviceWorker.ready.then(((t5) => ii(this, void 0, void 0, (function* () {
            console.log("registraions ready", t5), oi = t5.active, yield Ci(), e4("done");
          })))).catch(((e5) => {
            console.error("Error: Ready service worker", e5), t4(e5);
          })).finally((() => console.log("Finally service worker ready done"))), setTimeout((() => t4("Timeout ready")), 3e4);
        }));
        else if (a3 && (null == a3 ? void 0 : a3.activate)) try {
          console.log("service worker initialiing"), yield (function(e4) {
            var t4 = arguments;
            return ii(this, void 0, void 0, (function* () {
              const n4 = yo.V.logfunction("handleRegisterServiceWorker", t4);
              yield new Promise(((t5, o4) => {
                var i5, r3;
                let c4 = false;
                navigator.serviceWorker.register(null !== (i5 = e4.pathToSW) && void 0 !== i5 ? i5 : "./serviceWorker.bundle.js", { scope: null !== (r3 = e4.scope) && void 0 !== r3 ? r3 : "/" }).then(((e5) => ii(this, void 0, void 0, (function* () {
                  console.log("Service Worker registered:", e5), setInterval((() => {
                    ai.length && gi();
                  }), 2e3), console.log("update listen start"), e5.onupdatefound = () => {
                    const n5 = e5.installing;
                    console.log("new worker", n5), n5 && (n5.onstatechange = () => ii(this, void 0, void 0, (function* () {
                      console.warn("on state change triggered", n5.state, navigator.serviceWorker.controller), "installing" === n5.state && (console.log("Service Worker installing"), oi = void 0), "activated" !== n5.state && "redundant" !== n5.state || !navigator.serviceWorker.controller || (oi = n5, console.log("New Service Worker is active", e5), setTimeout((() => {
                        console.log("Message Processed after some time"), gi();
                      }), 5e3), yield Ci(), c4 = true, gi(), t5());
                    })));
                  }, e5.addEventListener("controllerchange", (() => ii(this, void 0, void 0, (function* () {
                    console.warn("controller change triggered", navigator.serviceWorker.controller), navigator.serviceWorker.controller && (oi = navigator.serviceWorker.controller, console.warn("Service worker has been activated; controller change"), yield Ci());
                  })))), (e5.installing || e5.waiting || e5.active) && e5.addEventListener("statechange", ((e6) => ii(this, void 0, void 0, (function* () {
                    var t6;
                    "activating" === (null === (t6 = null == e6 ? void 0 : e6.target) || void 0 === t6 ? void 0 : t6.state) && (oi = navigator.serviceWorker.controller, console.warn("Service Worker is activating statechange"), yield Ci());
                  })))), e5.active ? (console.log("active sw"), oi = e5.active, yield Ci(), gi(), t5()) : setTimeout((() => {
                    c4 || o4("Not Completed Initialization");
                  }), 1e4);
                })))).catch(((e5) => ii(this, void 0, void 0, (function* () {
                  yield fi(), o4(e5), console.error("Service Worker registration failed:", e5), (0, h2.ey)(n4, "handleRegisterServiceWorker", e5);
                }))));
              }));
            }));
          })(a3);
        } catch (e4) {
          yield fi(), console.error("Unable to start service worker", e4);
        }
        else yield fi(), console.warn("Service Worker not activated");
        return true;
      } catch (e4) {
        yield fi(), console.warn("Cannot initialize the system", e4);
      }
    }));
  }
  function ui(e3, t3) {
    return ii(this, arguments, void 0, (function* (e4, t4, n3 = 0) {
      let o3 = false;
      const i3 = Math.random().toString(36).substring(2);
      t4.messageId = i3, t4.TABID = ri;
      const r3 = JSON.parse(JSON.stringify(t4));
      let c3;
      return "checkProcess" != e4 && 0 == n3 && (c3 = setInterval((() => ii(this, void 0, void 0, (function* () {
        if (console.log("process took more than one second", i3, e4, o3), !o3 && !(yield (function(e5, t5) {
          return ii(this, void 0, void 0, (function* () {
            var n4;
            try {
              const o4 = yield ui("checkProcess", { checkMessageId: e5 });
              if (console.log("check interval data res for type ", t5, e5, o4.data), null === (n4 = null == o4 ? void 0 : o4.data) || void 0 === n4 ? void 0 : n4.processing) return true;
            } catch (n5) {
              return console.error("error on checing executing process", t5, e5, n5), false;
            }
          }));
        })(i3, e4)) && (clearInterval(c3), !o3)) {
          if (console.log("Failed to handle type " + e4 + " message not found " + i3, "retrying: ", 0 == n3, e4), 0 == n3 && "checkProcess" != e4) return console.log("retrying ", e4, i3), yield ui(e4, t4, n3 + 1);
          console.log("Failed to handle type " + e4 + " " + i3);
        }
      }))), 2e3)), new Promise(((n4, a3) => {
        if (navigator.serviceWorker.controller || oi || console.log("will go to queue", navigator.serviceWorker.controller, oi, e4), navigator.serviceWorker.controller || oi) {
          const s3 = (r4) => {
            var l3, d3, u3, p3, f3, y3;
            (null === (l3 = null == r4 ? void 0 : r4.data) || void 0 === l3 ? void 0 : l3.messageId) == i3 && (o3 = true, clearInterval(c3), r4.data.success || (401 == (null === (d3 = null == r4 ? void 0 : r4.data) || void 0 === d3 ? void 0 : d3.status) ? a3((0, h2.ry)(new Response("Unauthorized", { status: 401, statusText: null === (u3 = null == r4 ? void 0 : r4.data) || void 0 === u3 ? void 0 : u3.statusText }))) : 500 == (null === (p3 = null == r4 ? void 0 : r4.data) || void 0 === p3 ? void 0 : p3.status) ? a3((0, h2.Mb)(new Response("Internal Server Error", { status: 500, statusText: null === (f3 = null == r4 ? void 0 : r4.data) || void 0 === f3 ? void 0 : f3.statusText }))) : (console.error("Error in the response from worker:", r4), a3(`Failed to handle action ${e4} ${JSON.stringify(t4)}, Response: ${JSON.stringify(r4.data)}`))), (null === (y3 = r4.data) || void 0 === y3 ? void 0 : y3.actions) && (t4.actions = JSON.parse(JSON.stringify(r4.data.actions))), n4(r4.data), navigator.serviceWorker.removeEventListener("message", s3));
          };
          if (navigator.serviceWorker.addEventListener("message", s3), navigator.serviceWorker.controller) "checkProcess" != e4 && console.log("sent to sw", e4, i3), navigator.serviceWorker.controller.postMessage({ type: e4, payload: r3 });
          else if (oi) {
            console.warn(`controller not found but serviceWorker is available. messageId: ${i3}, type: ${e4}`);
            try {
              oi.postMessage({ type: e4, payload: r3 });
            } catch (t5) {
              console.log("Retrying again on catch service worker", t5), oi.postMessage({ type: e4, payload: r3 });
            }
          } else console.warn(`Service Worker hasn't loaded yet. messageId: ${i3}, type: ${e4}`), console.info("ready", navigator.serviceWorker.ready), setTimeout((() => {
            console.warn(`Re-Trying after certain time. messageId: ${i3}, type: ${e4}`), oi ? (console.info("This is triggered "), null == oi || oi.postMessage({ type: e4, payload: t4 })) : (console.log("not ready", e4), clearInterval(c3), a3("Service worker not ready"));
          }), 3e4);
          setTimeout((() => {
            clearInterval(c3), a3(`No response from service worker after timeout: ${e4}`), navigator.serviceWorker.removeEventListener("message", s3);
          }), 21e4);
        } else ai.push({ message: { type: e4, payload: r3 } }), console.log("Message Queued", e4, t4), console.log(navigator.serviceWorker.controller, oi, e4), "init" == e4 && (clearInterval(c3), n4(null));
      }));
    }));
  }
  const pi = { GetLinkListener: (e3) => ii(void 0, void 0, void 0, (function* () {
    const t3 = ci.find(((t4) => t4.listenerId == e3.listenerId));
    return null == t3 || t3.callback(e3.data), { success: true };
  })), dispatchEvent: (e3) => ii(void 0, void 0, void 0, (function* () {
    if (oi) {
      let t3 = new CustomEvent(e3.id || "", e3.data);
      dispatchEvent(t3);
    }
    return { success: true };
  })), checkInit: (e3) => ii(void 0, void 0, void 0, (function* () {
    return console.log("service worker init 0"), navigator.serviceWorker.controller && (console.log("service worker init 1"), oi = navigator.serviceWorker.controller), yield Ci(), { success: true };
  })) };
  function fi() {
    return ii(this, void 0, void 0, (function* () {
      yield (0, po.A)();
      const e3 = (/* @__PURE__ */ new Date()).getTime();
      yield (0, i2.A)().then((() => {
        let t3 = (/* @__PURE__ */ new Date()).getTime() - e3;
        console.log("The time taken to prepare concept  data is  ", t3);
      })).catch(((e4) => {
        throw e4;
      })), yield (0, uo.Ay)().then((() => {
        let t3 = (/* @__PURE__ */ new Date()).getTime() - e3;
        console.log("The time taken to prepare local concept  ", t3);
      })).catch(((e4) => {
        throw e4;
      })), yield (0, ho.p)().then((() => {
        r2.B.isLocalConnectionLoaded = true;
      })).catch(((e4) => {
        throw e4;
      })), yield (0, uo.xd)().catch(((e4) => {
        throw console.log("This is the error in populating binary tree"), e4;
      })), yield (0, ho.a)().then((() => {
        r2.B.isConnectionLoaded = true, r2.B.isConnectionTypeLoaded = true;
        let t3 = (/* @__PURE__ */ new Date()).getTime() - e3;
        console.log("The time taken to prepare connections  ", t3);
      })).catch(((e4) => {
        throw e4;
      }));
    }));
  }
  function yi(e3, t3 = {}) {
    if (oi || "undefined" != typeof window) {
      let n3 = new CustomEvent(`${e3}`, t3);
      dispatchEvent(n3);
    } else fo.x.postMessage({ type: "dispatchEvent", payload: { id: e3, data: t3 } });
  }
  function gi() {
    return ii(this, void 0, void 0, (function* () {
      console.log("message queue", ai);
      const e3 = ai.find(((e4) => {
        var t3;
        return "init" == (null === (t3 = null == e4 ? void 0 : e4.message) || void 0 === t3 ? void 0 : t3.type);
      }));
      if (e3) {
        console.log("Processing Init Queue poped", null == e3 ? void 0 : e3.type, e3);
        const t3 = ai.indexOf(e3);
        t3 > -1 && ai.splice(t3, 1), yield ui(null == e3 ? void 0 : e3.type, null == e3 ? void 0 : e3.payload);
      }
      for (console.log("message queue while", ai); ai.length > 0; ) {
        const { message: e4, resolve: t3, reject: n3 } = ai.shift();
        console.log("Queue poped", e4.type, e4), yield ui(e4.type, e4.payload);
      }
    }));
  }
  const vi = (e3) => {
    if (e3 instanceof j2.z) throw console.error("FreeSchemaResponse Error", e3), e3;
    console.error("Service Worker Error", e3);
  };
  function Ci() {
    return ii(this, void 0, void 0, (function* () {
      yield ui("init", { url: l2.B.BASE_URL, aiurl: l2.B.AI_URL, accessToken: yt2.b.BearerAccessToken, nodeUrl: l2.B.NODE_URL, enableAi: false, applicationName: l2.B.BASE_APPLICATION, flags: l2.B.FLAGS });
    }));
  }
} };
var t = {};
function n(o2) {
  var i2 = t[o2];
  if (void 0 !== i2) return i2.exports;
  var r2 = t[o2] = { exports: {} };
  return e[o2](r2, r2.exports, n), r2.exports;
}
n.d = (e2, t2) => {
  for (var o2 in t2) n.o(t2, o2) && !n.o(e2, o2) && Object.defineProperty(e2, o2, { enumerable: true, get: t2[o2] });
}, n.o = (e2, t2) => Object.prototype.hasOwnProperty.call(e2, t2), n.r = (e2) => {
  "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
};
var o = n(2830);
var i = o.ADMIN;
var r = o.ALLID;
var c = o.AccessTracker;
var a = o.AddGhostConcept;
var s = o.Anomaly;
var l = o.BaseUrl;
var d = o.BinaryTree;
var h = o.BuildWidgetFromId;
var u = o.BuilderStatefulWidget;
var p = o.Composition;
var f = o.CompositionBinaryTree;
var y = o.CompositionNode;
var g = o.Concept;
var v = o.ConceptsData;
var C = o.Connection;
var m = o.ConnectionData;
var T = o.CreateComposition;
var I = o.CreateConnectionBetweenEntityLocal;
var w = o.CreateConnectionBetweenTwoConcepts;
var k = o.CreateConnectionBetweenTwoConceptsGeneral;
var N = o.CreateConnectionBetweenTwoConceptsLocal;
var A = o.CreateDefaultConcept;
var L = o.CreateDefaultLConcept;
var S = o.CreateSession;
var G = o.CreateSessionVisit;
var x = o.CreateTheCompositionLocal;
var B = o.CreateTheCompositionWithCache;
var R = o.CreateTheConnection;
var b = o.CreateTheConnectionGeneral;
var D = o.CreateTheConnectionLocal;
var W = o.DATAID;
var F = o.DATAIDDATE;
var E = o.DelayFunctionExecution;
var U = o.DeleteConceptById;
var _ = o.DeleteConceptLocal;
var O = o.DeleteConnectionById;
var V = o.DeleteConnectionByType;
var M = o.DeleteUser;
var P = o.DependencyObserver;
var j = o.FilterSearch;
var H = o.FormatFromConnections;
var $ = o.FormatFromConnectionsAltered;
var J = o.FreeschemaQuery;
var z = o.FreeschemaQueryApi;
var q = o.GetAllConnectionsOfComposition;
var Q = o.GetAllConnectionsOfCompositionBulk;
var X = o.GetAllTheConnectionsByTypeAndOfTheConcept;
var Y = o.GetComposition;
var Z = o.GetCompositionBulk;
var K = o.GetCompositionBulkWithDataId;
var ee = o.GetCompositionFromConnectionsWithDataId;
var te = o.GetCompositionFromConnectionsWithDataIdFromConnections;
var ne = o.GetCompositionFromConnectionsWithDataIdInObject;
var oe = o.GetCompositionFromConnectionsWithDataIdIndex;
var ie = o.GetCompositionFromConnectionsWithIndex;
var re = o.GetCompositionFromConnectionsWithIndexFromConnections;
var ce = o.GetCompositionFromMemoryWithConnections;
var ae = o.GetCompositionList;
var se = o.GetCompositionListAll;
var le = o.GetCompositionListAllWithId;
var de = o.GetCompositionListListener;
var he = o.GetCompositionListLocal;
var ue = o.GetCompositionListLocalWithId;
var pe = o.GetCompositionListWithId;
var fe = o.GetCompositionListWithIdUpdated;
var ye = o.GetCompositionListener;
var ge = o.GetCompositionLocal;
var ve = o.GetCompositionLocalWithId;
var Ce = o.GetCompositionWithAllIds;
var me = o.GetCompositionWithCache;
var Te = o.GetCompositionWithDataIdBulk;
var Ie = o.GetCompositionWithDataIdWithCache;
var we = o.GetCompositionWithId;
var ke = o.GetCompositionWithIdAndDateFromMemory;
var Ne = o.GetConceptBulk;
var Ae = o.GetConceptByCharacter;
var Le = o.GetConceptByCharacterAndCategoryLocal;
var Se = o.GetConceptByCharacterAndType;
var Ge = o.GetConnectionBetweenTwoConceptsLinker;
var xe = o.GetConnectionBulk;
var Be = o.GetConnectionById;
var Re = o.GetConnectionDataPrefetch;
var be = o.GetConnectionOfTheConcept;
var De = o.GetLink;
var We = o.GetLinkListListener;
var Fe = o.GetLinkListener;
var Ee = o.GetLinkRaw;
var Ue = o.GetLinkerConnectionFromConcepts;
var _e = o.GetLinkerConnectionToConcepts;
var Oe = o.GetRelation;
var Ve = o.GetRelationLocal;
var Me = o.GetRelationRaw;
var Pe = o.GetTheConcept;
var je = o.GetTheConceptLocal;
var He = o.GetUserGhostId;
var $e = o.JUSTDATA;
var Je = o.LConcept;
var ze = o.LConnection;
var qe = o.LISTNORMAL;
var Qe = o.LocalConceptsData;
var Xe = o.LocalSyncData;
var Ye = o.LocalTransaction;
var Ze = o.Logger;
var Ke = o.LoginToBackend;
var et = o.MakeTheInstanceConcept;
var tt = o.MakeTheInstanceConceptLocal;
var nt = o.MakeTheTimestamp;
var ot = o.MakeTheTypeConcept;
var it = o.MakeTheTypeConceptApi;
var rt = o.MakeTheTypeConceptLocal;
var ct = o.NORMAL;
var at = o.PRIVATE;
var st = o.PUBLIC;
var lt = o.PatcherStructure;
var dt = o.RAW;
var ht = o.RecursiveSearchApi;
var ut = o.RecursiveSearchApiNewRawFullLinker;
var pt = o.RecursiveSearchApiRaw;
var ft = o.RecursiveSearchApiRawFullLinker;
var yt = o.RecursiveSearchApiWithInternalConnections;
var gt = o.RecursiveSearchListener;
var vt = o.SchemaQueryListener;
var Ct = o.SearchAllConcepts;
var mt = o.SearchLinkInternal;
var Tt = o.SearchLinkInternalAll;
var It = o.SearchLinkMultipleAll;
var wt = o.SearchLinkMultipleAllObservable;
var kt = o.SearchLinkMultipleApi;
var Nt = o.SearchQuery;
var At = o.SearchStructure;
var Lt = o.SearchWithLinker;
var St = o.SearchWithTypeAndLinker;
var Gt = o.SearchWithTypeAndLinkerApi;
var xt = o.SessionData;
var Bt = o.Signin;
var Rt = o.Signup;
var bt = o.SignupEntity;
var Dt = o.SplitStrings;
var Wt = o.StatefulWidget;
var Ft = o.SyncData;
var Et = o.TrashTheConcept;
var Ut = o.UpdateComposition;
var _t = o.UpdateCompositionLocal;
var Ot = o.UserBinaryTree;
var Vt = o.Validator;
var Mt = o.ViewInternalData;
var Pt = o.ViewInternalDataApi;
var jt = o.WidgetTree;
var Ht = o.convertFromConceptToLConcept;
var $t = o.convertFromLConceptToConcept;
var Jt = o.convertWidgetTreeToWidget;
var zt = o.convertWidgetTreeToWidgetWithWrapper;
var qt = o.createFormFieldData;
var Qt = o.dispatchIdEvent;
var Xt = o.getFromDatabaseWithType;
var Yt = o.getObjectsFromIndexDb;
var Zt = o.getWidgetBulkFromId;
var Kt = o.getWidgetFromId;
var en = o.handleServiceWorkerException;
var tn = o.hasActivatedSW;
var nn = o.init;
var on = o.recursiveFetch;
var rn = o.recursiveFetchNew;
var cn = o.renderLatestWidget;
var an = o.renderPage;
var sn = o.renderWidget;
var ln = o.searchLinkMultipleListener;
var dn = o.sendEmail;
var hn = o.sendMessage;
var un = o.serviceWorker;
var pn = o.setHasActivatedSW;
var fn = o.storeToDatabase;
var yn = o.subscribedListeners;
var gn = o.unwrapContainers;
var vn = o.updateAccessToken;
var Cn = o.uploadAttachment;
var mn = o.uploadFile;
var Tn = o.uploadImage;
var In = o.validDocumentFormats;
var wn = o.validImageFormats;
export {
  i as ADMIN,
  r as ALLID,
  c as AccessTracker,
  a as AddGhostConcept,
  s as Anomaly,
  l as BaseUrl,
  d as BinaryTree,
  h as BuildWidgetFromId,
  u as BuilderStatefulWidget,
  p as Composition,
  f as CompositionBinaryTree,
  y as CompositionNode,
  g as Concept,
  v as ConceptsData,
  C as Connection,
  m as ConnectionData,
  T as CreateComposition,
  I as CreateConnectionBetweenEntityLocal,
  w as CreateConnectionBetweenTwoConcepts,
  k as CreateConnectionBetweenTwoConceptsGeneral,
  N as CreateConnectionBetweenTwoConceptsLocal,
  A as CreateDefaultConcept,
  L as CreateDefaultLConcept,
  S as CreateSession,
  G as CreateSessionVisit,
  x as CreateTheCompositionLocal,
  B as CreateTheCompositionWithCache,
  R as CreateTheConnection,
  b as CreateTheConnectionGeneral,
  D as CreateTheConnectionLocal,
  W as DATAID,
  F as DATAIDDATE,
  E as DelayFunctionExecution,
  U as DeleteConceptById,
  _ as DeleteConceptLocal,
  O as DeleteConnectionById,
  V as DeleteConnectionByType,
  M as DeleteUser,
  P as DependencyObserver,
  j as FilterSearch,
  H as FormatFromConnections,
  $ as FormatFromConnectionsAltered,
  J as FreeschemaQuery,
  z as FreeschemaQueryApi,
  q as GetAllConnectionsOfComposition,
  Q as GetAllConnectionsOfCompositionBulk,
  X as GetAllTheConnectionsByTypeAndOfTheConcept,
  Y as GetComposition,
  Z as GetCompositionBulk,
  K as GetCompositionBulkWithDataId,
  ee as GetCompositionFromConnectionsWithDataId,
  te as GetCompositionFromConnectionsWithDataIdFromConnections,
  ne as GetCompositionFromConnectionsWithDataIdInObject,
  oe as GetCompositionFromConnectionsWithDataIdIndex,
  ie as GetCompositionFromConnectionsWithIndex,
  re as GetCompositionFromConnectionsWithIndexFromConnections,
  ce as GetCompositionFromMemoryWithConnections,
  ae as GetCompositionList,
  se as GetCompositionListAll,
  le as GetCompositionListAllWithId,
  de as GetCompositionListListener,
  he as GetCompositionListLocal,
  ue as GetCompositionListLocalWithId,
  pe as GetCompositionListWithId,
  fe as GetCompositionListWithIdUpdated,
  ye as GetCompositionListener,
  ge as GetCompositionLocal,
  ve as GetCompositionLocalWithId,
  Ce as GetCompositionWithAllIds,
  me as GetCompositionWithCache,
  Te as GetCompositionWithDataIdBulk,
  Ie as GetCompositionWithDataIdWithCache,
  we as GetCompositionWithId,
  ke as GetCompositionWithIdAndDateFromMemory,
  Ne as GetConceptBulk,
  Ae as GetConceptByCharacter,
  Le as GetConceptByCharacterAndCategoryLocal,
  Se as GetConceptByCharacterAndType,
  Ge as GetConnectionBetweenTwoConceptsLinker,
  xe as GetConnectionBulk,
  Be as GetConnectionById,
  Re as GetConnectionDataPrefetch,
  be as GetConnectionOfTheConcept,
  De as GetLink,
  We as GetLinkListListener,
  Fe as GetLinkListener,
  Ee as GetLinkRaw,
  Ue as GetLinkerConnectionFromConcepts,
  _e as GetLinkerConnectionToConcepts,
  Oe as GetRelation,
  Ve as GetRelationLocal,
  Me as GetRelationRaw,
  Pe as GetTheConcept,
  je as GetTheConceptLocal,
  He as GetUserGhostId,
  $e as JUSTDATA,
  Je as LConcept,
  ze as LConnection,
  qe as LISTNORMAL,
  Qe as LocalConceptsData,
  Xe as LocalSyncData,
  Ye as LocalTransaction,
  Ze as Logger,
  Ke as LoginToBackend,
  et as MakeTheInstanceConcept,
  tt as MakeTheInstanceConceptLocal,
  nt as MakeTheTimestamp,
  ot as MakeTheTypeConcept,
  it as MakeTheTypeConceptApi,
  rt as MakeTheTypeConceptLocal,
  ct as NORMAL,
  at as PRIVATE,
  st as PUBLIC,
  lt as PatcherStructure,
  dt as RAW,
  ht as RecursiveSearchApi,
  ut as RecursiveSearchApiNewRawFullLinker,
  pt as RecursiveSearchApiRaw,
  ft as RecursiveSearchApiRawFullLinker,
  yt as RecursiveSearchApiWithInternalConnections,
  gt as RecursiveSearchListener,
  vt as SchemaQueryListener,
  Ct as SearchAllConcepts,
  mt as SearchLinkInternal,
  Tt as SearchLinkInternalAll,
  It as SearchLinkMultipleAll,
  wt as SearchLinkMultipleAllObservable,
  kt as SearchLinkMultipleApi,
  Nt as SearchQuery,
  At as SearchStructure,
  Lt as SearchWithLinker,
  St as SearchWithTypeAndLinker,
  Gt as SearchWithTypeAndLinkerApi,
  xt as SessionData,
  Bt as Signin,
  Rt as Signup,
  bt as SignupEntity,
  Dt as SplitStrings,
  Wt as StatefulWidget,
  Ft as SyncData,
  Et as TrashTheConcept,
  Ut as UpdateComposition,
  _t as UpdateCompositionLocal,
  Ot as UserBinaryTree,
  Vt as Validator,
  Mt as ViewInternalData,
  Pt as ViewInternalDataApi,
  jt as WidgetTree,
  Ht as convertFromConceptToLConcept,
  $t as convertFromLConceptToConcept,
  Jt as convertWidgetTreeToWidget,
  zt as convertWidgetTreeToWidgetWithWrapper,
  qt as createFormFieldData,
  Qt as dispatchIdEvent,
  Xt as getFromDatabaseWithType,
  Yt as getObjectsFromIndexDb,
  Zt as getWidgetBulkFromId,
  Kt as getWidgetFromId,
  en as handleServiceWorkerException,
  tn as hasActivatedSW,
  nn as init,
  on as recursiveFetch,
  rn as recursiveFetchNew,
  cn as renderLatestWidget,
  an as renderPage,
  sn as renderWidget,
  ln as searchLinkMultipleListener,
  dn as sendEmail,
  hn as sendMessage,
  un as serviceWorker,
  pn as setHasActivatedSW,
  fn as storeToDatabase,
  yn as subscribedListeners,
  gn as unwrapContainers,
  vn as updateAccessToken,
  Cn as uploadAttachment,
  mn as uploadFile,
  Tn as uploadImage,
  In as validDocumentFormats,
  wn as validImageFormats
};
//# sourceMappingURL=mftsccs-browser.js.map
